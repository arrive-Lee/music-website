import{y as e,z as a}from"../element-plus/element-plus.372e8740.js";import{G as s,ax as l,u as o,d as n,i as t,e as i,o as r,M as d,O as c,R as u,U as v,a as p,a2 as g,I as w,T as f,c as m,P as y,S as h,V as b,z as C,n as I,aq as S}from"../@vue/@vue.7ad02ad1.js";import{g as k,u as x,a as L,K as M,L as j,f as _,h as P,M as R,l as q}from"../../assets/index-0cefdbff.js";import{s as O}from"../pinia/pinia.07d51cb2.js";import{o as z}from"../vue-router/vue-router.53ff932e.js";const A=["onMousedown","textContent"],B={key:0,class:"iconfont vip"},D=["onClick"],F={class:"operation"},N=["onClick"],T=["onClick"],E=s({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1},showSelect:{type:Boolean}},emits:["getSelectItems"],setup(s,{emit:E}){const G=s;l((e=>({adbd3a88:o(H),ad3006d6:o(U),"489580e8":o(K)})));const H=k().get("fontColor"),K=k().get("background"),U=k().get("tableHover"),V=C("hideScroll"),J=n(),Q=x(),{songList:W,current:X,isPlay:Y,playProcess:Z,playTime:$,songListId:ee}=O(Q),ae=L(),se=t((()=>G.showSelect)),le=t((()=>G.showSelect?55:0));i(se,(e=>{e||J.value.clearSelection()}));const oe=e=>{E("getSelectItems",e)},ne=e=>{const a=G.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");G.isPlaylist?s[a+1].style.opacity="1":s[a].style.opacity="1"},te=e=>{const a=G.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");G.isPlaylist?s[a+1].style.opacity="0":s[a].style.opacity="0"},ie=async e=>{if("0"==e.available||"8"==e.available){const a=ee.value.get(e.id);null==a?(ae.addRecord(e,ae.songRecord,ae.songRecordId,"songRecord"),0==X.value?(Y&&(Y.value=!1),Z.value=0,$.value=0,W.value.unshift(e),await I(),Y.value=!0):(W.value.unshift(e),X.value=0)):X.value!=a?X.value=a:Y.value=!0}else(e.available="1")?_(P.INFO,"此歌曲为vip专属"):(e.available="10")&&_(P.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let re=0;return re=setInterval((()=>{const e=G.songs.map((e=>e.id)),a=G.songs.findIndex((e=>e.id==W.value[X.value].id));e.length>0&&q(e.join(","),G.songs,"",a)}),3e5),z((()=>{clearInterval(re)})),(l,n)=>{const t=a,i=S("prevent");return r(),d(o(e),{data:s.songs,onCellDblclick:ie,onCellMouseEnter:ne,onCellMouseLeave:te,onSelectionChange:oe,ref_key:"tableContainer",ref:J,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:c((()=>[o(se)?(r(),d(t,{key:0,type:"selection",width:o(le)},null,8,["width"])):u("",!0),v(t,{label:"歌曲",width:500-o(le)},{default:c((e=>[p("div",null,[p("span",{onMousedown:g((a=>o(ae).addLove(e.row,o(ae).loveSongs,o(ae).loveMusicId,"loveSongs")),["prevent"]),class:w(["iconfont love",{"is-love":e.row.isLove}]),textContent:f(e.row.isLove?"󰅅":"")},null,42,A),p("span",null,f(e.row.name),1),"1"==e.row.available||"10"==e.row.available?(r(),m("span",B,"")):u("",!0),y((r(),m("span",{class:"iconfont playmv",onClick:a=>{return s=e.row,void R(s,(()=>{V()}));var s}},[h("")],8,D)),[[i]]),p("div",F,[y((r(),m("span",{onClick:a=>ie(e.row),class:"iconfont"},[h("")],8,N)),[[b,!o(Y)||o(X)!=o(W).findIndex((a=>a.id==e.row.id))],[i]]),y((r(),m("span",{onClick:n[0]||(n[0]=e=>Y.value=!1),class:"iconfont"},[h(" ")])),[[b,o(Y)&&o(X)==o(W).findIndex((a=>a.id==e.row.id))],[i]]),y((r(),m("span",{class:"iconfont",onClick:a=>o(ae).addMuiscDownload(e.row)},[h("󰌄")],8,T)),[[i]]),v(M,{song:e.row,play:ie},null,8,["song"])])])])),_:1},8,["width"]),v(t,{prop:"singer",label:"歌手",width:"320"}),v(t,{prop:"album",label:"专辑",width:"320"}),v(t,{label:"时长"},{default:c((e=>[p("span",null,f(o(j)(e.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}});export{E as _};
