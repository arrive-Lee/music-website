import{y as e,z as a}from"../element-plus/element-plus.372e8740.js";import{G as s,ax as o,u as l,d as n,i as t,e as i,o as r,M as d,O as c,R as u,U as v,a as p,a2 as g,I as w,T as f,c as m,P as y,S as h,V as b,z as C,n as I,aq as S}from"../@vue/@vue.7ad02ad1.js";import{g as k,u as x,a as L,L as M,M as _,f as j,h as P,N as R,l as q}from"../../assets/index-4587ef8d.js";import{s as N}from"../pinia/pinia.07d51cb2.js";import{o as O}from"../vue-router/vue-router.53ff932e.js";const z=["onMousedown","textContent"],A={key:0,class:"iconfont vip"},B=["onClick"],D={class:"operation"},F=["onClick"],T=["onClick"],E=s({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1},showSelect:{type:Boolean}},emits:["getSelectItems"],setup(s,{emit:E}){const G=s;o((e=>({adbd3a88:l(H),ad3006d6:l(V),"489580e8":l(U)})));const H=k().get("fontColor"),U=k().get("background"),V=k().get("tableHover"),J=C("hideScroll"),K=n(),Q=x(),{songList:W,current:X,isPlay:Y,playProcess:Z,playTime:$,songListId:ee}=N(Q),ae=L(),se=t((()=>G.showSelect)),oe=t((()=>G.showSelect?55:0));i(se,(e=>{e||K.value.clearSelection()}));const le=e=>{E("getSelectItems",e)},ne=e=>{const a=G.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");G.isPlaylist?s[a+1].style.opacity="1":s[a].style.opacity="1"},te=e=>{const a=G.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");G.isPlaylist?s[a+1].style.opacity="0":s[a].style.opacity="0"},ie=async e=>{if("0"==e.available||"8"==e.available){const a=ee.value.get(e.id);null==a?(ae.addRecord(e,ae.songRecord,ae.songRecordId,"songRecord"),0==X.value?(Y&&(Y.value=!1),Z.value=0,$.value=0,W.value.unshift(e),await I(),Y.value=!0):(W.value.unshift(e),X.value=0)):X.value!=a?X.value=a:Y.value=!0}else(e.available="1")?j(P.INFO,"此歌曲为vip专属"):(e.available="10")&&j(P.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let re=0;return re=setInterval((()=>{const e=G.songs.map((e=>e.id)),a=G.songs.findIndex((e=>e.id==W.value[X.value].id));e.length>0&&q(e.join(","),G.songs,"",a)}),3e5),O((()=>{clearInterval(re)})),(o,n)=>{const t=a,i=S("prevent");return r(),d(l(e),{data:s.songs,onCellDblclick:ie,onCellMouseEnter:ne,onCellMouseLeave:te,onSelectionChange:le,ref_key:"tableContainer",ref:K,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:c((()=>[l(se)?(r(),d(t,{key:0,type:"selection",width:l(oe)},null,8,["width"])):u("",!0),v(t,{label:"歌曲",width:500-l(oe)},{default:c((e=>[p("div",null,[p("span",{onMousedown:g((a=>l(ae).addLove(e.row,l(ae).loveSongs,l(ae).loveMusicId,"loveSongs")),["prevent"]),class:w(["iconfont love",{"is-love":e.row.isLove}]),textContent:f(e.row.isLove?"󰅅":"")},null,42,z),p("span",null,f(e.row.name),1),"1"==e.row.available||"10"==e.row.available?(r(),m("span",A,"")):u("",!0),y((r(),m("span",{class:"iconfont playmv",onClick:a=>{return s=e.row,void R(s,(()=>{J()}));var s}},[h("")],8,B)),[[i]]),p("div",D,[y((r(),m("span",{onClick:a=>ie(e.row),class:"iconfont"},[h("")],8,F)),[[b,!l(Y)||l(X)!=l(W).findIndex((a=>a.id==e.row.id))],[i]]),y((r(),m("span",{onClick:n[0]||(n[0]=e=>Y.value=!1),class:"iconfont"},[h(" ")])),[[b,l(Y)&&l(X)==l(W).findIndex((a=>a.id==e.row.id))],[i]]),y((r(),m("span",{class:"iconfont",onClick:a=>l(ae).addMuiscDownload(e.row)},[h("󰌄")],8,T)),[[i]]),v(M,{song:e.row,play:ie},null,8,["song"])])])])),_:1},8,["width"]),v(t,{prop:"singer",label:"歌手",width:"320"}),v(t,{prop:"album",label:"专辑",width:"320"}),v(t,{label:"时长"},{default:c((e=>[p("span",null,f(l(_)(e.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}});export{E as _};
