import{y as a,z as e,A as s}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as n,u as o,o as t,M as i,O as u,U as r,a as c,I as d,T as v,P as p,V as m,c as f,S as b,n as g,aq as y,d as h,H as w}from"../@vue/@vue.7ad02ad1.js";import{g as I,u as C,H as x,e as _,d as k,I as j,t as N,j as P,_ as A}from"../../assets/index-107c9b53.js";import{s as L}from"../pinia/pinia.07d51cb2.js";import{o as O}from"../vue-router/vue-router.53ff932e.js";const T=["textContent"],F={class:"operation"},S=["onClick"],V=["onClick"],q=c("span",{class:"iconfont"},"",-1),H=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;n((a=>({"7c9d4413":o(h),"7ce3ddec":o(A),"2e61b595":o(w)})));const h=I().get("fontColor"),w=I().get("background"),A=I().get("tableHover"),H=C(),{songList:M,current:U,isPlay:z,playProcess:B,playTime:D,songNum:E}=L(H),G=async a=>{if("0"==a.available||"8"==a.available){const e=M.value.findIndex((e=>e.id==a.id));-1==e?0==U.value?(z&&(z.value=!1),B.value=0,D.value=0,M.value.unshift(a),await g(),z.value=!0):(M.value.unshift(a),U.value=0):U.value!=e?U.value=e:z.value=!0}else(a.available="1")?_(k.INFO,"此歌曲为vip专属"):(a.available="10")&&_(k.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")},$=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.display="block":s[e].style.display="block"},J=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.display="none":s[e].style.display="none"};let K=0;return(()=>{const a=l.songs.map((a=>a.id));K=setInterval((()=>{E.value>0&&P(a.join(","),l.songs)}),12e5)})(),O((()=>{clearInterval(K)})),(l,n)=>{const g=a,h=e,w=y("prevent");return t(),i(h,{data:s.songs,onCellDblclick:G,onCellMouseEnter:$,onCellMouseLeave:J,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:u((()=>[r(g,{label:"歌曲",width:"500"},{default:u((a=>[c("div",null,[c("span",{class:d(["iconfont love",{"is-love":a.row.isLove}]),textContent:v(a.row.isLove?"󰅅":"")},null,10,T),c("span",null,v(a.row.name),1),c("div",F,[p((t(),f("span",{onClick:e=>G(a.row),class:"iconfont"},[b("")],8,S)),[[m,!o(z)||o(U)!=o(M).findIndex((e=>e.id==a.row.id))],[w]]),p((t(),f("span",{onClick:n[0]||(n[0]=a=>z.value=!1),class:"iconfont"},[b(" ")])),[[m,o(z)&&o(U)==o(M).findIndex((e=>e.id==a.row.id))],[w]]),c("span",{class:"iconfont",onClick:e=>(a=>{if("0"==a.available||"8"==a.available){const e=a.name+"-"+j(a.singer)+".mp3",s=a.url;N(s,e)}else"10"==a.available?_(k.INFO,"该歌曲暂无版权，无法下载！"):_(k.INFO,"该歌曲为vip歌曲，请您开通vip")})(a.row)},"󰌄",8,V),q])])])),_:1}),r(g,{prop:"singer",label:"歌手",width:"320"}),r(g,{prop:"album",label:"专辑",width:"320"}),r(g,{label:"时长"},{default:u((a=>[c("span",null,v(o(x)(a.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),M=A(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(a,{emit:e}){const l=a;n((a=>({"377914ab":o(r)})));const r=I().get("fontColor"),c=h(l.active),d=a=>{e("getActive",a.paneName)};return(a,e)=>{const l=s;return t(),i(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onTabClick:d,class:"tab"},{default:u((()=>[w(a.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{M as T,H as _};
