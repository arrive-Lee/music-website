import{y as a,z as e,A as s}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as o,u as t,o as n,M as i,O as u,U as r,a as c,a2 as d,I as p,T as v,P as m,V as f,c as g,S as y,n as b,aq as w,d as h,H as C}from"../@vue/@vue.7ad02ad1.js";import{g as x,u as _,L as I,M as k,N as j,e as L,f as M,k as P,O as A,_ as N}from"../../assets/index-c87ad811.js";import{s as T}from"../pinia/pinia.07d51cb2.js";import{o as O}from"../vue-router/vue-router.53ff932e.js";const S=["onMousedown","textContent"],V={class:"operation"},q=["onClick"],F=["onClick"],H=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;o((a=>({c1c3238c:t(h),c135efda:t(N),"422a14ce":t(C)})));const h=x().get("fontColor"),C=x().get("background"),N=x().get("tableHover"),H=_(),{songList:U,current:z,isPlay:B,playProcess:D,playTime:E,songNum:G}=T(H),$=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="1":s[e].style.opacity="1"},J=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="0":s[e].style.opacity="0"},K=async a=>{if("0"==a.available||"8"==a.available){const e=U.value.findIndex((e=>e.id==a.id));-1==e?0==z.value?(B&&(B.value=!1),D.value=0,E.value=0,U.value.unshift(a),await b(),B.value=!0):(U.value.unshift(a),z.value=0):z.value!=e?z.value=e:B.value=!0}else(a.available="1")?L(M.INFO,"此歌曲为vip专属"):(a.available="10")&&L(M.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let Q=0;return(()=>{const a=l.songs.map((a=>a.id));Q=setInterval((()=>{G.value>0&&P(a.join(","),l.songs)}),6e5)})(),O((()=>{clearInterval(Q)})),(l,o)=>{const b=a,h=e,C=w("prevent");return n(),i(h,{data:s.songs,onCellDblclick:K,onCellMouseEnter:$,onCellMouseLeave:J,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:u((()=>[r(b,{label:"歌曲",width:"500"},{default:u((a=>[c("div",null,[c("span",{onMousedown:d((e=>t(A)(a.row)),["prevent"]),class:p(["iconfont love",{"is-love":a.row.isLove}]),textContent:v(a.row.isLove?"󰅅":"")},null,42,S),c("span",null,v(a.row.name),1),c("div",V,[m((n(),g("span",{onClick:e=>K(a.row),class:"iconfont"},[y("")],8,q)),[[f,!t(B)||t(z)!=t(U).findIndex((e=>e.id==a.row.id))],[C]]),m((n(),g("span",{onClick:o[0]||(o[0]=a=>B.value=!1),class:"iconfont"},[y(" ")])),[[f,t(B)&&t(z)==t(U).findIndex((e=>e.id==a.row.id))],[C]]),m((n(),g("span",{class:"iconfont",onClick:e=>t(I)(a.row)},[y("󰌄")],8,F)),[[C]]),r(k,{song:a.row,play:K},null,8,["song"])])])])),_:1}),r(b,{prop:"singer",label:"歌手",width:"320"}),r(b,{prop:"album",label:"专辑",width:"320"}),r(b,{label:"时长"},{default:u((a=>[c("span",null,v(t(j)(a.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),U=N(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(a,{emit:e}){const l=a;o((a=>({"377914ab":t(r)})));const r=x().get("fontColor"),c=h(l.active),d=a=>{e("getActive",a.paneName)};return(a,e)=>{const l=s;return n(),i(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onTabClick:d,class:"tab"},{default:u((()=>[C(a.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{U as T,H as _};
