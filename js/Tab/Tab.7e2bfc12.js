import{y as a,z as e,A as s}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as o,u as t,o as n,M as i,O as u,U as r,a as c,I as d,T as v,P as p,V as m,c as f,S as g,n as b,aq as y,d as w,H as h}from"../@vue/@vue.7ad02ad1.js";import{g as C,u as I,L as x,M as _,e as k,f as j,N,y as L,k as P,_ as A}from"../../assets/index-1a5908cb.js";import{s as O}from"../pinia/pinia.07d51cb2.js";import{o as T}from"../vue-router/vue-router.53ff932e.js";const F=["textContent"],M={class:"operation"},S=["onClick"],V=["onClick"],q=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;o((a=>({"0329f7f1":t(w),"037091ca":t(A),"72bebe77":t(h)})));const w=C().get("fontColor"),h=C().get("background"),A=C().get("tableHover"),q=I(),{songList:H,current:U,isPlay:z,playProcess:B,playTime:D,songNum:E}=O(q),G=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="1":s[e].style.opacity="1"},$=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="0":s[e].style.opacity="0"},J=async a=>{if("0"==a.available||"8"==a.available){const e=H.value.findIndex((e=>e.id==a.id));-1==e?0==U.value?(z&&(z.value=!1),B.value=0,D.value=0,H.value.unshift(a),await b(),z.value=!0):(H.value.unshift(a),U.value=0):U.value!=e?U.value=e:z.value=!0}else(a.available="1")?k(j.INFO,"此歌曲为vip专属"):(a.available="10")&&k(j.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")},K=a=>{if("0"==a.available||"8"==a.available){const e=a.name+"-"+N(a.singer)+".mp3",s=a.url;L(s,e)}else"10"==a.available?k(j.INFO,"该歌曲暂无版权，无法下载！"):k(j.INFO,"该歌曲为vip歌曲，请您开通vip！")};let Q=0;return(()=>{const a=l.songs.map((a=>a.id));Q=setInterval((()=>{E.value>0&&P(a.join(","),l.songs)}),6e5)})(),T((()=>{clearInterval(Q)})),(l,o)=>{const b=a,w=e,h=y("prevent");return n(),i(w,{data:s.songs,onCellDblclick:J,onCellMouseEnter:G,onCellMouseLeave:$,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:u((()=>[r(b,{label:"歌曲",width:"500"},{default:u((a=>[c("div",null,[c("span",{class:d(["iconfont love",{"is-love":a.row.isLove}]),textContent:v(a.row.isLove?"󰅅":"")},null,10,F),c("span",null,v(a.row.name),1),c("div",M,[p((n(),f("span",{onClick:e=>J(a.row),class:"iconfont"},[g("")],8,S)),[[m,!t(z)||t(U)!=t(H).findIndex((e=>e.id==a.row.id))],[h]]),p((n(),f("span",{onClick:o[0]||(o[0]=a=>z.value=!1),class:"iconfont"},[g(" ")])),[[m,t(z)&&t(U)==t(H).findIndex((e=>e.id==a.row.id))],[h]]),c("span",{class:"iconfont",onClick:e=>K(a.row)},"󰌄",8,V),r(x,{song:a.row,play:J,"download-music":K},null,8,["song"])])])])),_:1}),r(b,{prop:"singer",label:"歌手",width:"320"}),r(b,{prop:"album",label:"专辑",width:"320"}),r(b,{label:"时长"},{default:u((a=>[c("span",null,v(t(_)(a.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),H=A(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(a,{emit:e}){const l=a;o((a=>({"377914ab":t(r)})));const r=C().get("fontColor"),c=w(l.active),d=a=>{e("getActive",a.paneName)};return(a,e)=>{const l=s;return n(),i(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onTabClick:d,class:"tab"},{default:u((()=>[h(a.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{H as T,q as _};
