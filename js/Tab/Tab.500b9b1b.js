import{y as e,z as a,A as s}from"../element-plus/element-plus.372e8740.js";import{G as o,ax as l,u as t,d as n,i,e as c,o as r,M as d,O as u,R as v,U as p,a as g,a2 as m,I as f,T as w,c as y,P as h,S as b,V as C,z as I,n as k,aq as S,H as _}from"../@vue/@vue.7ad02ad1.js";import{g as x,u as L,a as M,J as j,K as P,f as A,h as R,L as T,l as V,_ as q}from"../../assets/index-964692d5.js";import{s as N}from"../pinia/pinia.07d51cb2.js";import{o as O}from"../vue-router/vue-router.53ff932e.js";const z=["onMousedown","textContent"],B={key:0,class:"iconfont vip"},D=["onClick"],F={class:"operation"},H=["onClick"],U=["onClick"],E=o({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1},showSelect:{type:Boolean}},emits:["getSelectItems"],setup(s,{emit:o}){const _=s;l((e=>({adbd3a88:t(q),ad3006d6:t(G),"489580e8":t(E)})));const q=x().get("fontColor"),E=x().get("background"),G=x().get("tableHover"),J=I("hideScroll"),K=n(),$=L(),{songList:Q,current:W,isPlay:X,playProcess:Y,playTime:Z,songListId:ee}=N($),ae=M(),se=i((()=>_.showSelect)),oe=i((()=>_.showSelect?55:0));c(se,(e=>{e||K.value.clearSelection()}));const le=e=>{o("getSelectItems",e)},te=e=>{const a=_.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");_.isPlaylist?s[a+1].style.opacity="1":s[a].style.opacity="1"},ne=e=>{const a=_.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");_.isPlaylist?s[a+1].style.opacity="0":s[a].style.opacity="0"},ie=async e=>{if("0"==e.available||"8"==e.available){const a=ee.value.get(e.id);null==a?(ae.addRecord(e,ae.songRecord,ae.songRecordId,"songRecord"),0==W.value?(X&&(X.value=!1),Y.value=0,Z.value=0,Q.value.unshift(e),await k(),X.value=!0):(Q.value.unshift(e),W.value=0)):W.value!=a?W.value=a:X.value=!0}else(e.available="1")?A(R.INFO,"此歌曲为vip专属"):(e.available="10")&&A(R.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let ce=0;return ce=setInterval((()=>{const e=_.songs.map((e=>e.id)),a=_.songs.findIndex((e=>e.id==Q.value[W.value].id));e.length>0&&V(e.join(","),_.songs,"",a)}),3e5),O((()=>{clearInterval(ce)})),(o,l)=>{const n=a,i=S("prevent");return r(),d(t(e),{data:s.songs,onCellDblclick:ie,onCellMouseEnter:te,onCellMouseLeave:ne,onSelectionChange:le,ref_key:"tableContainer",ref:K,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:u((()=>[t(se)?(r(),d(n,{key:0,type:"selection",width:t(oe)},null,8,["width"])):v("",!0),p(n,{label:"歌曲",width:500-t(oe)},{default:u((e=>[g("div",null,[g("span",{onMousedown:m((a=>t(ae).addLove(e.row,t(ae).loveSongs,t(ae).loveMusicId,"loveSongs")),["prevent"]),class:f(["iconfont love",{"is-love":e.row.isLove}]),textContent:w(e.row.isLove?"󰅅":"")},null,42,z),g("span",null,w(e.row.name),1),"1"==e.row.available||"10"==e.row.available?(r(),y("span",B,"")):v("",!0),h((r(),y("span",{class:"iconfont playmv",onClick:a=>{return s=e.row,void T(s,(()=>{J()}));var s}},[b("")],8,D)),[[i]]),g("div",F,[h((r(),y("span",{onClick:a=>ie(e.row),class:"iconfont"},[b("")],8,H)),[[C,!t(X)||t(W)!=t(Q).findIndex((a=>a.id==e.row.id))],[i]]),h((r(),y("span",{onClick:l[0]||(l[0]=e=>X.value=!1),class:"iconfont"},[b(" ")])),[[C,t(X)&&t(W)==t(Q).findIndex((a=>a.id==e.row.id))],[i]]),h((r(),y("span",{class:"iconfont",onClick:a=>t(ae).addMuiscDownload(e.row)},[b("󰌄")],8,U)),[[i]]),p(j,{song:e.row,play:ie},null,8,["song"])])])])),_:1},8,["width"]),p(n,{prop:"singer",label:"歌手",width:"320"}),p(n,{prop:"album",label:"专辑",width:"320"}),p(n,{label:"时长"},{default:u((e=>[g("span",null,w(t(P)(e.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),G=q(o({__name:"Tab",props:{active:null},emits:["getActive"],setup(e,{emit:a}){const o=e;l((e=>({"377914ab":t(i)})));const i=x().get("fontColor"),c=n(o.active),v=e=>{a("getActive",e.paneName)};return(e,a)=>{const o=s;return r(),d(o,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),onTabClick:v,class:"tab"},{default:u((()=>[_(e.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{G as T,E as _};
