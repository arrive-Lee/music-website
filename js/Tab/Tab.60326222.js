import{y as a,z as e,A as s}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as o,u as n,o as t,M as i,O as r,U as u,a as c,a2 as d,I as v,T as p,P as m,c as f,S as g,V as y,z as w,n as b,aq as h,d as C,H as x}from"../@vue/@vue.7ad02ad1.js";import{g as _,u as k,M as I,N as j,O as P,e as M,f as A,P as L,k as N,Q as S,_ as T}from"../../assets/index-664b7631.js";import{s as O}from"../pinia/pinia.07d51cb2.js";import{o as V}from"../vue-router/vue-router.53ff932e.js";const q=["onMousedown","textContent"],z=["onClick"],F={class:"operation"},H=["onClick"],U=["onClick"],B=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;o((a=>({"0c09ee54":n(C),"0c50882d":n(T),"0c0a1af4":n(x)})));const C=_().get("fontColor"),x=_().get("background"),T=_().get("tableHover"),B=w("hideScroll"),D=k(),{songList:E,current:G,isPlay:Q,playProcess:$,playTime:J,songNum:K}=O(D),R=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="1":s[e].style.opacity="1"},W=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="0":s[e].style.opacity="0"},X=async a=>{if("0"==a.available||"8"==a.available){const e=E.value.findIndex((e=>e.id==a.id));-1==e?0==G.value?(Q&&(Q.value=!1),$.value=0,J.value=0,E.value.unshift(a),await b(),Q.value=!0):(E.value.unshift(a),G.value=0):G.value!=e?G.value=e:Q.value=!0}else(a.available="1")?M(A.INFO,"此歌曲为vip专属"):(a.available="10")&&M(A.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let Y=0;return(()=>{const a=l.songs.map((a=>a.id));Y=setInterval((()=>{K.value>0&&N(a.join(","),l.songs)}),6e5)})(),V((()=>{clearInterval(Y)})),(l,o)=>{const w=a,b=e,C=h("prevent");return t(),i(b,{data:s.songs,onCellDblclick:X,onCellMouseEnter:R,onCellMouseLeave:W,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:r((()=>[u(w,{label:"歌曲",width:"500"},{default:r((a=>[c("div",null,[c("span",{onMousedown:d((e=>n(S)(a.row)),["prevent"]),class:v(["iconfont love",{"is-love":a.row.isLove}]),textContent:p(a.row.isLove?"󰅅":"")},null,42,q),c("span",null,p(a.row.name),1),m((t(),f("span",{class:"iconfont playmv",onClick:e=>{return s=a.row,void L(s,(()=>{B()}));var s}},[g("")],8,z)),[[C]]),c("div",F,[m((t(),f("span",{onClick:e=>X(a.row),class:"iconfont"},[g("")],8,H)),[[y,!n(Q)||n(G)!=n(E).findIndex((e=>e.id==a.row.id))],[C]]),m((t(),f("span",{onClick:o[0]||(o[0]=a=>Q.value=!1),class:"iconfont"},[g(" ")])),[[y,n(Q)&&n(G)==n(E).findIndex((e=>e.id==a.row.id))],[C]]),m((t(),f("span",{class:"iconfont",onClick:e=>n(I)(a.row)},[g("󰌄")],8,U)),[[C]]),u(j,{song:a.row,play:X},null,8,["song"])])])])),_:1}),u(w,{prop:"singer",label:"歌手",width:"320"}),u(w,{prop:"album",label:"专辑",width:"320"}),u(w,{label:"时长"},{default:r((a=>[c("span",null,p(n(P)(a.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),D=T(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(a,{emit:e}){const l=a;o((a=>({"377914ab":n(u)})));const u=_().get("fontColor"),c=C(l.active),d=a=>{e("getActive",a.paneName)};return(a,e)=>{const l=s;return t(),i(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onTabClick:d,class:"tab"},{default:r((()=>[x(a.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{D as T,B as _};
