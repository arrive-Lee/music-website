import{y as a,z as e,A as s}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as o,u as n,o as t,M as i,O as r,U as u,a as c,a2 as d,I as v,T as p,c as m,R as f,P as g,S as y,V as w,z as b,n as h,aq as C,d as k,H as x}from"../@vue/@vue.7ad02ad1.js";import{g as _,u as I,M as j,N as P,O as M,e as A,f as L,P as N,k as S,Q as T,_ as O}from"../../assets/index-0ada9847.js";import{s as V}from"../pinia/pinia.07d51cb2.js";import{o as q}from"../vue-router/vue-router.53ff932e.js";const z=["onMousedown","textContent"],F={key:0,class:"iconfont vip"},H=["onClick"],U={class:"operation"},B=["onClick"],D=["onClick"],E=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;o((a=>({"22956cde":n(k),"2208392c":n(O),"75a45e52":n(x)})));const k=_().get("fontColor"),x=_().get("background"),O=_().get("tableHover"),E=b("hideScroll"),G=I(),{songList:Q,current:R,isPlay:$,playProcess:J,playTime:K,songNum:W}=V(G),X=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="1":s[e].style.opacity="1"},Y=a=>{const e=l.songs.findIndex((e=>e.id==a.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[e+1].style.opacity="0":s[e].style.opacity="0"},Z=async a=>{if("0"==a.available||"8"==a.available){const e=Q.value.findIndex((e=>e.id==a.id));-1==e?0==R.value?($&&($.value=!1),J.value=0,K.value=0,Q.value.unshift(a),await h(),$.value=!0):(Q.value.unshift(a),R.value=0):R.value!=e?R.value=e:$.value=!0}else(a.available="1")?A(L.INFO,"此歌曲为vip专属"):(a.available="10")&&A(L.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")};let aa=0;return(()=>{const a=l.songs.map((a=>a.id));aa=setInterval((()=>{W.value>0&&S(a.join(","),l.songs)}),6e5)})(),q((()=>{clearInterval(aa)})),(l,o)=>{const b=a,h=e,k=C("prevent");return t(),i(h,{data:s.songs,onCellDblclick:Z,onCellMouseEnter:X,onCellMouseLeave:Y,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:r((()=>[u(b,{label:"歌曲",width:"500"},{default:r((a=>[c("div",null,[c("span",{onMousedown:d((e=>n(T)(a.row)),["prevent"]),class:v(["iconfont love",{"is-love":a.row.isLove}]),textContent:p(a.row.isLove?"󰅅":"")},null,42,z),c("span",null,p(a.row.name),1),"1"==a.row.available||"10"==a.row.available?(t(),m("span",F,"")):f("",!0),g((t(),m("span",{class:"iconfont playmv",onClick:e=>{return s=a.row,void N(s,(()=>{E()}));var s}},[y("")],8,H)),[[k]]),c("div",U,[g((t(),m("span",{onClick:e=>Z(a.row),class:"iconfont"},[y("")],8,B)),[[w,!n($)||n(R)!=n(Q).findIndex((e=>e.id==a.row.id))],[k]]),g((t(),m("span",{onClick:o[0]||(o[0]=a=>$.value=!1),class:"iconfont"},[y(" ")])),[[w,n($)&&n(R)==n(Q).findIndex((e=>e.id==a.row.id))],[k]]),g((t(),m("span",{class:"iconfont",onClick:e=>n(j)(a.row)},[y("󰌄")],8,D)),[[k]]),u(P,{song:a.row,play:Z},null,8,["song"])])])])),_:1}),u(b,{prop:"singer",label:"歌手",width:"320"}),u(b,{prop:"album",label:"专辑",width:"320"}),u(b,{label:"时长"},{default:r((a=>[c("span",null,p(n(M)(a.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),G=O(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(a,{emit:e}){const l=a;o((a=>({"377914ab":n(u)})));const u=_().get("fontColor"),c=k(l.active),d=a=>{e("getActive",a.paneName)};return(a,e)=>{const l=s;return t(),i(l,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),onTabClick:d,class:"tab"},{default:r((()=>[x(a.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{G as T,E as _};
