import{y as e,z as a,A as s}from"../element-plus/element-plus.1b7b143d.js";import{G as l,o as t,M as n,O as o,U as i,a as u,I as r,T as d,P as c,V as p,u as v,c as m,S as f,ay as g,n as y,aq as b,d as h,H as w}from"../@vue/@vue.8ad7c23d.js";import{g as _,u as x,G as C,e as I,d as j,j as k,_ as P}from"../../assets/index-26ab7b85.js";import{s as A}from"../pinia/pinia.5e0359dc.js";import{o as L}from"../vue-router/vue-router.b970196e.js";const T=["textContent"],N={class:"operation"},S=["onClick"],V=u("span",{class:"iconfont"},"󰌄",-1),q=u("span",{class:"iconfont"},"",-1),M=l({__name:"SongList",props:{songs:null,height:null,isPlaylist:{type:Boolean,default:!1}},setup(s){const l=s;g((e=>({"3e60fa2f":v(h),"3ea79408":v(P),ed49d60e:v(w)})));const h=_().get("fontColor"),w=_().get("background"),P=_().get("tableHover"),M=x(),{songList:O,current:F,isPlay:G,playProcess:H,playTime:U,songNum:z}=A(M),B=async e=>{if("0"==e.available||"8"==e.available){const a=O.value.findIndex((a=>a.id==e.id));-1==a?0==F.value?(G&&(G.value=!1),H.value=0,U.value=0,O.value.unshift(e),await y(),G.value=!0):(O.value.unshift(e),F.value=0):F.value!=a?F.value=a:G.value=!0}else(e.available="1")?I(j.INFO,"此歌曲为vip专属"):(e.available="10")&&I(j.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")},D=e=>{const a=l.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[a+1].style.display="block":s[a].style.display="block"},E=e=>{const a=l.songs.findIndex((a=>a.id==e.id)),s=document.querySelectorAll(".operation");l.isPlaylist?s[a+1].style.display="none":s[a].style.display="none"};let $=0;return(()=>{const e=l.songs.map((e=>e.id));$=setInterval((()=>{z.value>0&&k(e.join(","),l.songs)}),12e5)})(),L((()=>{clearInterval($)})),(l,g)=>{const y=e,h=a,w=b("prevent");return t(),n(h,{data:s.songs,onCellDblclick:B,onCellMouseEnter:D,onCellMouseLeave:E,"max-height":s.height,style:{width:"80vw"},class:"songs-table"},{default:o((()=>[i(y,{label:"歌曲",width:"500"},{default:o((e=>[u("div",null,[u("span",{class:r(["iconfont love",{"is-love":e.row.isLove}]),textContent:d(e.row.isLove?"󰅅":"")},null,10,T),u("span",null,d(e.row.name),1),u("div",N,[c((t(),m("span",{onClick:a=>B(e.row),class:"iconfont"},[f("")],8,S)),[[p,!v(G)||v(F)!=v(O).findIndex((a=>a.id==e.row.id))],[w]]),c((t(),m("span",{onClick:g[0]||(g[0]=e=>G.value=!1),class:"iconfont"},[f(" ")])),[[p,v(G)&&v(F)==v(O).findIndex((a=>a.id==e.row.id))],[w]]),V,q])])])),_:1}),i(y,{prop:"singer",label:"歌手",width:"320"}),i(y,{prop:"album",label:"专辑",width:"320"}),i(y,{label:"时长"},{default:o((e=>[u("span",null,d(v(C)(e.row.time)),1)])),_:1})])),_:1},8,["data","max-height"])}}}),O=P(l({__name:"Tab",props:{active:null},emits:["getActive"],setup(e,{emit:a}){const l=e;g((e=>({"377914ab":v(i)})));const i=_().get("fontColor"),u=h(l.active),r=e=>{a("getActive",e.paneName)};return(e,a)=>{const l=s;return t(),n(l,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),onTabClick:r,class:"tab"},{default:o((()=>[w(e.$slots,"content",{},void 0,!0)])),_:3},8,["modelValue"])}}}),[["__scopeId","data-v-4312e76f"]]);export{O as T,M as _};
