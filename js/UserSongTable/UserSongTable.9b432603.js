import{G as e,ax as a,u as s,i as o,Z as l,o as n,c as t,a as c,U as i,z as u,n as r,r as p,O as d,J as v,F as m,a7 as g,M as f,T as S,I as h,P as C,aq as w,ay as _,az as y}from"../@vue/@vue.59fec093.js";import{s as k}from"../pinia/pinia.81428a33.js";import{g as b,u as N,a as P,e as B,d as I,_ as V,t as j}from"../../assets/index-933c3f88.js";import{D}from"../DecoratedButton/DecoratedButton.d972464c.js";import{_ as M,P as U}from"../PlayButton/PlayButton.fd3f050e.js";import{S as L}from"../SearchButton/SearchButton.6d2e7bb4.js";import{b as R,c as E,d as F}from"../element-plus/element-plus.1ffadbb7.js";const G={class:"batch-container"},x={class:"operation-select"},O=V(e({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:p}){const d=e;a((e=>({"0634ece7":s(v)})));const v=b().get("themeColor"),m=N(),{isPlay:g,songList:f,songListId:S,playProcess:h,playTime:C,current:w}=k(m),_=P(),{songRecord:y,musicDownload:V,loveSongs:j}=k(_),U=u("hideScroll"),L=o((()=>"LoveView"==d.pageName?j.value:"RecentPlayView"==d.pageName?y.value:V.value)),R=o((()=>new Map(L.value.map(((e,a)=>[e.id,a]))))),E=l([]),F=e=>{0!=E.length&&E.splice(0),E.push(...e)},O=async()=>{E.length>0?(g.value=!1,h.value=0,C.value=0,await r(),E.forEach((e=>{null==S.value.get(e.id)&&f.value.unshift(e)})),w.value=S.value.get(E[0].id),g.value=!0,B(I.SUCCESS,"已添加到播放列表！")):B(I.INFO,"请添加歌曲！")},T=()=>{E.forEach((e=>{_.addMuiscDownload(e)}))},z=()=>{if(E.length>0){const e=E.map((e=>e.id)),a=L.value.filter((a=>!e.includes(a.id)));L.value.splice(0),L.value.push(...a),B(I.SUCCESS,"已清除选中的歌曲！")}else B(I.INFO,"请添加歌曲！")},q=()=>{U(),p("closeSelect",!1)};return(e,a)=>(n(),t("div",G,[c("div",x,[i(D,{icon:"",name:"播放",class:"play",onClick:O}),i(D,{icon:"",onClick:z,name:"删除"}),i(D,{icon:"󰌄",onClick:T,name:"下载"}),i(D,{icon:"",name:"取消操作",onClick:q})]),i(M,{songs:s(L),"song-id-mapper":s(R),showSelect:!0,"show-header":!1,onGetSelectItems:F},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-855ad860"]]),T=e=>(_("data-v-d459fc75"),e=e(),y(),e),z={class:"sort-btn"},q=[T((()=>c("span",{class:"iconfont"},"",-1))),T((()=>c("span",null," 排序",-1)))],J=V(e({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:u}){a((e=>({"667892a2":s(_),"3271bb94":s(N),"383c201f":s(k)})));const r=j(),_=b().get("fontColor"),y=b().get("background"),k=b().get("themeColor"),N=o((()=>{var e;return"color"==r.bgMode?null==(e=b().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),P=o((()=>"color"==r.bgMode?"#ffffff"==_.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),B=l(["歌曲排序","歌手排序","专辑排序","时长排序"]),I=l([!1,!1,!1,!1]),V=p(-1),D=o((()=>I.map(((e,a)=>a==V.value)))),M=e=>{"歌曲排序"==e?V.value=D.value[0]?-1:0:"歌手排序"==e?V.value=D.value[1]?-1:1:"专辑排序"==e?V.value=D.value[2]?-1:2:"时长排序"==e&&(V.value=D.value[3]?-1:3),-1==V.value?u("getSortChoice",D.value,!0):u("getSortChoice",D.value,!1)},U=()=>{-1==V.value&&(V.value=0,u("getSortChoice",D.value,!1))};return(e,a)=>{const o=R,l=E,u=F,r=w("prevent");return n(),t("div",z,[i(u,{trigger:"click",onCommand:M,"popper-class":`dropdown sort-drop ${s(P)}`},{dropdown:d((()=>[i(l,{style:v({color:s(_),background:s(y)})},{default:d((()=>[(n(!0),t(m,null,g(B,((e,a)=>(n(),f(o,{key:e,command:e},{default:d((()=>[c("span",{class:h({"is-choose":s(D)[a]})},S(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:d((()=>[C((n(),t("div",{class:"sort",onClick:U},q)),[[r]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-d459fc75"]]),Z={class:"user-container"},$={class:"top-operation"},A=V(e({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const u=e,r=P(),{musicDownload:d,loveSongs:v,songRecord:m}=k(r),g=o((()=>{let e=l([]);return e="LoveView"==u.pageName?v.value:"RecentPlayView"==u.pageName?m.value:d.value,e.filter((e=>e.name.includes(h.value)||e.album.includes(h.value)||e.singer.includes(h.value)))})),f=o((()=>new Map(g.value.map(((e,a)=>[e.id,a]))))),S=o((()=>"LoveView"==u.pageName?"清空全部收藏":"RecentPlayView"==u.pageName?"清空播放记录":"清空下载记录")),h=p(""),C=e=>{h.value=e},w=l([!1,!1,!1,!1]),_=p(!1),y=(e,a)=>{for(let s=0;s<w.length;s++)w[s]=e[s];a&&(_.value=a)},b=()=>{"LoveView"==u.pageName?v.value.splice(0):"RecentPlayView"==u.pageName?m.value.splice(0):d.value.splice(0),B(I.SUCCESS,"已清空全部下载记录！")};return(e,o)=>(n(),t("div",Z,[c("div",$,[i(U,{songs:s(g)},null,8,["songs"]),i(D,{icon:"",name:s(S),onClick:b},null,8,["name"]),i(D,{icon:"",name:"批量操作",onClick:o[0]||(o[0]=e=>a("openSelect",!0))}),i(L,{onGetContent:C}),i(J,{onGetSortChoice:y})]),i(M,{songs:s(g),"song-id-mapper":s(f),sort:w,"is-cancel-sort":_.value},null,8,["songs","song-id-mapper","sort","is-cancel-sort"])]))}}),[["__scopeId","data-v-db80d719"]]);export{O as U,A as a};
