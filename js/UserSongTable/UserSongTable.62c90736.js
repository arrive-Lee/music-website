import{s as e}from"../pinia/pinia.07d51cb2.js";import{u as a,a as s,e as o,d as l,_ as n,p as t,g as i}from"../../assets/index-f2c2582e.js";import{D as c}from"../DecoratedButton/DecoratedButton.47667f48.js";import{_ as u}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.f9082fce.js";import{G as r,i as p,Z as v,o as d,c as m,a as g,U as S,u as h,z as _,n as f,ax as w,d as C,O as y,J as b,F as k,a7 as N,M as P,T as V,I as x,P as B,aq as j,ay as I,az as U}from"../@vue/@vue.7ad02ad1.js";import{P as D}from"../PlayButton/PlayButton.f67bbdc0.js";import{S as L}from"../SearchButton/SearchButton.ff22c4ca.js";import{b as M,c as R,d as E}from"../element-plus/element-plus.372e8740.js";const F={class:"batch-container"},G={class:"operation-select"},O=n(r({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(n,{emit:t}){const i=n,r=a(),{isPlay:w,songList:C,songListId:y,playProcess:b,playTime:k,current:N}=e(r),P=s(),{songRecord:V,musicDownload:x,loveSongs:B}=e(P),j=_("hideScroll"),I=p((()=>"LoveView"==i.pageName?B.value:"RecentPlayView"==i.pageName?V.value:x.value)),U=p((()=>new Map(I.value.map(((e,a)=>[e.id,a]))))),D=v([]),L=e=>{0!=D.length&&D.splice(0),D.push(...e)},M=async()=>{D.length>0?(w.value=!1,b.value=0,k.value=0,await f(),D.forEach((e=>{null==y.value.get(e.id)&&C.value.unshift(e)})),N.value=y.value.get(D[0].id),w.value=!0,o(l.SUCCESS,"已添加到播放列表！")):o(l.INFO,"请添加歌曲！")},R=()=>{D.forEach((e=>{P.addMuiscDownload(e)}))},E=()=>{if(D.length>0){const e=D.map((e=>e.id)),a=I.value.filter((a=>!e.includes(a.id)));I.value.splice(0),I.value.push(...a),o(l.SUCCESS,"已清除选中的歌曲！")}else o(l.INFO,"请添加歌曲！")},O=()=>{j(),t("closeSelect",!1)};return(e,a)=>(d(),m("div",F,[g("div",G,[S(c,{icon:"",name:"播放",class:"play",onClick:M}),S(c,{icon:"",onClick:E,name:"删除"}),S(c,{icon:"󰌄",onClick:R,name:"下载"}),S(c,{icon:"",name:"取消操作",onClick:O})]),S(u,{songs:h(I),"song-id-mapper":h(U),showSelect:!0,"show-header":!1,onGetSelectItems:L},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-ccb17794"]]),T=e=>(I("data-v-efb16a5b"),e=e(),U(),e),$={class:"sort-btn"},z=[T((()=>g("span",{class:"iconfont"},"",-1))),T((()=>g("span",null," 排序",-1)))],q=n(r({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){w((e=>({"308d7694":h(o),"1a914a7d":h(n)})));const s=t(),o=i().get("fontColor"),l=i().get("background"),n=p((()=>{var e;return"color"==s.bgMode?null==(e=i().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),c=p((()=>"color"==s.bgMode?"#ffffff"==o.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),u=v(["歌曲排序","歌手排序","专辑排序","时长排序"]),r=v([!1,!1,!1,!1]),_=C(-1),f=p((()=>r.map(((e,a)=>a==_.value)))),I=e=>{"歌曲排序"==e?_.value=f.value[0]?-1:0:"歌手排序"==e?_.value=f.value[1]?-1:1:"专辑排序"==e?_.value=f.value[2]?-1:2:"时长排序"==e&&(_.value=f.value[3]?-1:3),-1==_.value?a("getSortChoice",f.value,!0):a("getSortChoice",f.value,!1)},U=()=>{-1==_.value&&(_.value=0,a("getSortChoice",f.value,!1))};return(e,a)=>{const n=M,t=R,i=E,r=j("prevent");return d(),m("div",$,[S(i,{trigger:"click",onCommand:I,"popper-class":`dropdown sort-drop ${h(c)}`},{dropdown:y((()=>[S(t,{style:b({color:h(o),background:`${h(l)} url(${h(s).skinUrl}) no-repeat center/cover`})},{default:y((()=>[(d(!0),m(k,null,N(u,((e,a)=>(d(),P(n,{key:e,command:e},{default:y((()=>[g("span",{class:x({"is-choose":h(f)[a]})},V(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:y((()=>[B((d(),m("div",{class:"sort",onClick:U},z)),[[r]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-efb16a5b"]]),A={class:"user-container"},J={class:"top-operation"},K=n(r({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(a,{emit:n}){const i=a,r=t(),{isFullScreen:_}=e(r),f=s(),{musicDownload:w,loveSongs:y,songRecord:b}=e(f),k=p((()=>{let e=v([]);return e="LoveView"==i.pageName?y.value:"RecentPlayView"==i.pageName?b.value:w.value,e.filter((e=>e.name.includes(x.value)||e.album.includes(x.value)||e.singer.includes(x.value)))})),N=p((()=>new Map(k.value.map(((e,a)=>[e.id,a]))))),P=p((()=>"loveView"==i.pageName?"清空全部收藏":"recentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),V=p((()=>_.value?"RecentPlayView"==i.pageName?"560px":"580px":"RecentPlayView"==i.pageName?"420px":"440px")),x=C(""),B=e=>{x.value=e},j=v([!1,!1,!1,!1]),I=C(!1),U=(e,a)=>{for(let s=0;s<j.length;s++)j[s]=e[s];a&&(I.value=a)},M=()=>{"loveView"==i.pageName?y.value.splice(0):"recentPlayView"==i.pageName?b.value.splice(0):w.value.splice(0),o(l.SUCCESS,"已清空全部下载记录！")};return(e,a)=>(d(),m("div",A,[g("div",J,[S(D,{songs:h(k)},null,8,["songs"]),S(c,{icon:"",name:h(P),onClick:M},null,8,["name"]),S(c,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>n("openSelect",!0))}),S(L,{onGetContent:B}),S(q,{onGetSortChoice:U})]),S(u,{songs:h(k),"song-id-mapper":h(N),sort:j,"is-cancel-sort":I.value,height:h(V)},null,8,["songs","song-id-mapper","sort","is-cancel-sort","height"])]))}}),[["__scopeId","data-v-92639a4e"]]);export{O as U,K as a};
