import{_ as e}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.b5ca6b08.js";import{D as a}from"../DecoratedButton/DecoratedButton.e6f62703.js";import{u as s,a as o,e as l,d as t,q as n,r as c,_ as i,g as u}from"../../assets/index-b4bf3e49.js";import{s as r}from"../pinia/pinia.07d51cb2.js";import{G as v,i as p,Z as m,o as d,c as g,a as S,U as h,u as _,z as f,n as C,ax as y,d as w,O as N,J as b,F as k,a7 as P,M as V,T as B,I as L,P as j,aq as I,ay as x,az as D}from"../@vue/@vue.7ad02ad1.js";import{P as R}from"../PlayButton/PlayButton.eb4d2d93.js";import{S as U}from"../SearchButton/SearchButton.4868e782.js";import{b as E,c as O,d as G}from"../element-plus/element-plus.372e8740.js";const z={class:"batch-container"},A={class:"operation-select"},F=i(v({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(i,{emit:u}){const v=i,y=s(),{isPlay:w,songList:N,songListId:b,playProcess:k,playTime:P,current:V}=r(y),B=o(),{songRecord:L,musicDownload:j,loveSongs:I}=r(B),x=f("hideScroll"),D=p((()=>"LoveView"==v.pageName?I.value:"RecentPlayView"==v.pageName?L.value:j.value)),R=m([]),U=e=>{0!=R.length&&R.splice(0),R.push(...e)},E=async()=>{R.length>0?(w.value=!1,k.value=0,P.value=0,await C(),R.forEach((e=>{null==b.value.get(e.id)&&N.value.unshift(e)})),V.value=b.value.get(R[0].id),w.value=!0,l(t.SUCCESS,"已添加到播放列表！")):l(t.INFO,"请添加歌曲！")},O=()=>{R.forEach((e=>{B.addMuiscDownload(e)}))},G=()=>{if(R.length>0){const e=R.map((e=>e.id)),a=D.value.filter((a=>!e.includes(a.id)));D.value.splice(0),D.value.push(...a),n(c.LOCAL,"songRecord",D.value),l(t.SUCCESS,"已清除选中的歌曲！")}else l(t.INFO,"请添加歌曲！")},F=()=>{x(),u("closeSelect",!1)};return(s,o)=>{const l=a,t=e;return d(),g("div",z,[S("div",A,[h(l,{icon:"",name:"播放",class:"play",onClick:E}),h(l,{icon:"",onClick:G,name:"删除"}),h(l,{icon:"󰌄",onClick:O,name:"下载"}),h(l,{icon:"",name:"取消操作",onClick:F})]),h(t,{songs:_(D),showSelect:!0,"show-header":!1,onGetSelectItems:U},null,8,["songs"])])}}}),[["__scopeId","data-v-ddae4e9b"]]),T=e=>(x("data-v-4ba0bd28"),e=e(),D(),e),q={class:"sort-btn"},J=[T((()=>S("span",{class:"iconfont"},"",-1))),T((()=>S("span",null," 排序",-1)))],M=i(v({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){y((e=>({"0714cfa8":_(o),fdda89c0:_(s)})));const s=u().get("searchBg"),o=u().get("fontColor"),l=u().get("background"),t=p((()=>"#ffffff"==l.value?"more-light":"more-dark")),n=m(["歌曲排序","歌手排序","专辑排序","时长排序"]),c=m([!1,!1,!1,!1]),i=w(-1),r=p((()=>c.map(((e,a)=>a==i.value)))),v=e=>{"歌曲排序"==e?i.value=r.value[0]?-1:0:"歌手排序"==e?i.value=r.value[1]?-1:1:"专辑排序"==e?i.value=r.value[2]?-1:2:"时长排序"==e&&(i.value=r.value[3]?-1:3),-1==i.value?a("getSortChoice",r.value,!0):a("getSortChoice",r.value,!1)},f=()=>{-1==i.value&&(i.value=0,a("getSortChoice",r.value,!1))};return(e,a)=>{const s=E,c=O,i=G,u=I("prevent");return d(),g("div",q,[h(i,{trigger:"click",onCommand:v,"popper-class":`more ${_(t)} sort-drop`},{dropdown:N((()=>[h(c,{style:b({background:_(l),color:_(o)})},{default:N((()=>[(d(!0),g(k,null,P(n,((e,a)=>(d(),V(s,{key:e,command:e},{default:N((()=>[S("span",{class:L({"is-choose":_(r)[a]})},B(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:N((()=>[j((d(),g("div",{class:"sort",onClick:f},J)),[[u]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-4ba0bd28"]]),Z={class:"table-container"},$={class:"top-operation"},H=i(v({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(s,{emit:i}){const u=s,v=o(),{musicDownload:f,loveSongs:C,songRecord:y}=r(v),N=p((()=>{let e=m([]);return e="LoveView"==u.pageName?C.value:"RecentPlayView"==u.pageName?y.value:f.value,e.filter((e=>e.name.includes(V.value)||e.album.includes(V.value)||e.singer.includes(V.value)))})),b=p((()=>"loveView"==u.pageName?"清空全部收藏":"recentPlayView"==u.pageName?"清空播放记录":"清空下载记录")),k=p((()=>"loveView"==u.pageName?"loveSongs":"recentPlayView"==u.pageName?"songRecord":"musicDownload")),P=p((()=>"RecentPlayView"==u.pageName?"420px":"440px")),V=w(""),B=e=>{V.value=e},L=m([!1,!1,!1,!1]),j=w(!1),I=(e,a)=>{for(let s=0;s<L.length;s++)L[s]=e[s];a&&(j.value=a)},x=()=>{let e=m([]);e="loveView"==u.pageName?C.value:"recentPlayView"==u.pageName?y.value:f.value,e.splice(0),n(c.LOCAL,k.value,e),l(t.SUCCESS,"已清空全部下载记录！")};return(s,o)=>(d(),g("div",Z,[S("div",$,[h(R,{songs:_(N)},null,8,["songs"]),h(a,{icon:"",name:_(b),onClick:x},null,8,["name"]),h(a,{icon:"",name:"批量操作",onClick:o[0]||(o[0]=e=>i("openSelect",!0))}),h(U,{onGetContent:B}),h(M,{onGetSortChoice:I})]),h(e,{songs:_(N),sort:L,"is-cancel-sort":j.value,height:_(P)},null,8,["songs","sort","is-cancel-sort","height"])]))}}),[["__scopeId","data-v-210a6009"]]);export{F as U,H as a};
