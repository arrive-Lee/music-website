import{s as e}from"../pinia/pinia.81428a33.js";import{u as a,a as s,e as o,d as l,_ as n,t,g as c}from"../../assets/index-19af0c09.js";import{D as i}from"../DecoratedButton/DecoratedButton.9baed474.js";import{_ as u,P as r}from"../PlayButton/PlayButton.d7d7a8ff.js";import{G as p,i as d,Z as v,o as m,c as g,a as f,U as S,u as h,z as w,n as C,ax as _,r as y,O as b,J as k,F as N,a7 as P,M as B,T as I,I as V,P as j,aq as D,ay as M,az as U}from"../@vue/@vue.59fec093.js";import{S as L}from"../SearchButton/SearchButton.be4ea4b7.js";import{b as R,c as E,d as F}from"../element-plus/element-plus.1ffadbb7.js";const G={class:"batch-container"},x={class:"operation-select"},O=n(p({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(n,{emit:t}){const c=n,r=a(),{isPlay:p,songList:_,songListId:y,playProcess:b,playTime:k,current:N}=e(r),P=s(),{songRecord:B,musicDownload:I,loveSongs:V}=e(P),j=w("hideScroll"),D=d((()=>"LoveView"==c.pageName?V.value:"RecentPlayView"==c.pageName?B.value:I.value)),M=d((()=>new Map(D.value.map(((e,a)=>[e.id,a]))))),U=v([]),L=e=>{0!=U.length&&U.splice(0),U.push(...e)},R=async()=>{U.length>0?(p.value=!1,b.value=0,k.value=0,await C(),U.forEach((e=>{null==y.value.get(e.id)&&_.value.unshift(e)})),N.value=y.value.get(U[0].id),p.value=!0,o(l.SUCCESS,"已添加到播放列表！")):o(l.INFO,"请添加歌曲！")},E=()=>{U.forEach((e=>{P.addMuiscDownload(e)}))},F=()=>{if(U.length>0){const e=U.map((e=>e.id)),a=D.value.filter((a=>!e.includes(a.id)));D.value.splice(0),D.value.push(...a),o(l.SUCCESS,"已清除选中的歌曲！")}else o(l.INFO,"请添加歌曲！")},O=()=>{j(),t("closeSelect",!1)};return(e,a)=>(m(),g("div",G,[f("div",x,[S(i,{icon:"",name:"播放",class:"play",onClick:R}),S(i,{icon:"",onClick:F,name:"删除"}),S(i,{icon:"󰌄",onClick:E,name:"下载"}),S(i,{icon:"",name:"取消操作",onClick:O})]),S(u,{songs:h(D),"song-id-mapper":h(M),showSelect:!0,"show-header":!1,onGetSelectItems:L},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-ccb17794"]]),T=e=>(M("data-v-8b16ef51"),e=e(),U(),e),z={class:"sort-btn"},q=[T((()=>f("span",{class:"iconfont"},"",-1))),T((()=>f("span",null," 排序",-1)))],J=n(p({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){_((e=>({cf39b35c:h(o),48493519:h(n)})));const s=t(),o=c().get("fontColor"),l=c().get("background"),n=d((()=>{var e;return"color"==s.bgMode?null==(e=c().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),i=d((()=>"color"==s.bgMode?"#ffffff"==o.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),u=v(["歌曲排序","歌手排序","专辑排序","时长排序"]),r=v([!1,!1,!1,!1]),p=y(-1),w=d((()=>r.map(((e,a)=>a==p.value)))),C=e=>{"歌曲排序"==e?p.value=w.value[0]?-1:0:"歌手排序"==e?p.value=w.value[1]?-1:1:"专辑排序"==e?p.value=w.value[2]?-1:2:"时长排序"==e&&(p.value=w.value[3]?-1:3),-1==p.value?a("getSortChoice",w.value,!0):a("getSortChoice",w.value,!1)},M=()=>{-1==p.value&&(p.value=0,a("getSortChoice",w.value,!1))};return(e,a)=>{const s=R,n=E,t=F,c=D("prevent");return m(),g("div",z,[S(t,{trigger:"click",onCommand:C,"popper-class":`dropdown sort-drop ${h(i)}`},{dropdown:b((()=>[S(n,{style:k({color:h(o),background:h(l)})},{default:b((()=>[(m(!0),g(N,null,P(u,((e,a)=>(m(),B(s,{key:e,command:e},{default:b((()=>[f("span",{class:V({"is-choose":h(w)[a]})},I(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:b((()=>[j((m(),g("div",{class:"sort",onClick:M},q)),[[c]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-8b16ef51"]]),Z={class:"user-container"},$={class:"top-operation"},A=n(p({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(a,{emit:n}){const t=a,c=s(),{musicDownload:p,loveSongs:w,songRecord:C}=e(c),_=d((()=>{let e=v([]);return e="LoveView"==t.pageName?w.value:"RecentPlayView"==t.pageName?C.value:p.value,e.filter((e=>e.name.includes(N.value)||e.album.includes(N.value)||e.singer.includes(N.value)))})),b=d((()=>new Map(_.value.map(((e,a)=>[e.id,a]))))),k=d((()=>"LoveView"==t.pageName?"清空全部收藏":"RecentPlayView"==t.pageName?"清空播放记录":"清空下载记录")),N=y(""),P=e=>{N.value=e},B=v([!1,!1,!1,!1]),I=y(!1),V=(e,a)=>{for(let s=0;s<B.length;s++)B[s]=e[s];a&&(I.value=a)},j=()=>{"LoveView"==t.pageName?w.value.splice(0):"RecentPlayView"==t.pageName?C.value.splice(0):p.value.splice(0),o(l.SUCCESS,"已清空全部下载记录！")};return(e,a)=>(m(),g("div",Z,[f("div",$,[S(r,{songs:h(_)},null,8,["songs"]),S(i,{icon:"",name:h(k),onClick:j},null,8,["name"]),S(i,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>n("openSelect",!0))}),S(L,{onGetContent:P}),S(J,{onGetSortChoice:V})]),S(u,{songs:h(_),"song-id-mapper":h(b),sort:B,"is-cancel-sort":I.value},null,8,["songs","song-id-mapper","sort","is-cancel-sort"])]))}}),[["__scopeId","data-v-405489ed"]]);export{O as U,A as a};
