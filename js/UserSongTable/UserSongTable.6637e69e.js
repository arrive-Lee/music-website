import{s as e}from"../pinia/pinia.07d51cb2.js";import{u as a,a as s,e as o,d as l,_ as n,t,g as i}from"../../assets/index-a64598ed.js";import{D as c}from"../DecoratedButton/DecoratedButton.733dc12e.js";import{_ as u}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.6a6b0b73.js";import{G as r,i as p,Z as v,o as d,c as m,a as g,U as S,u as f,z as h,n as _,ax as w,d as y,O as C,J as N,F as b,a7 as k,M as P,T as V,I as x,P as B,aq as j,ay as I,az as L}from"../@vue/@vue.7ad02ad1.js";import{P as R}from"../PlayButton/PlayButton.cd89caf4.js";import{S as D}from"../SearchButton/SearchButton.95102fb3.js";import{b as U,c as M,d as E}from"../element-plus/element-plus.ec47f34a.js";const F={class:"batch-container"},G={class:"operation-select"},O=n(r({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(n,{emit:t}){const i=n,r=a(),{isPlay:w,songList:y,songListId:C,playProcess:N,playTime:b,current:k}=e(r),P=s(),{songRecord:V,musicDownload:x,loveSongs:B}=e(P),j=h("hideScroll"),I=p((()=>"LoveView"==i.pageName?B.value:"RecentPlayView"==i.pageName?V.value:x.value)),L=p((()=>new Map(I.value.map(((e,a)=>[e.id,a]))))),R=v([]),D=e=>{0!=R.length&&R.splice(0),R.push(...e)},U=async()=>{R.length>0?(w.value=!1,N.value=0,b.value=0,await _(),R.forEach((e=>{null==C.value.get(e.id)&&y.value.unshift(e)})),k.value=C.value.get(R[0].id),w.value=!0,o(l.SUCCESS,"已添加到播放列表！")):o(l.INFO,"请添加歌曲！")},M=()=>{R.forEach((e=>{P.addMuiscDownload(e)}))},E=()=>{if(R.length>0){const e=R.map((e=>e.id)),a=I.value.filter((a=>!e.includes(a.id)));I.value.splice(0),I.value.push(...a),o(l.SUCCESS,"已清除选中的歌曲！")}else o(l.INFO,"请添加歌曲！")},O=()=>{j(),t("closeSelect",!1)};return(e,a)=>(d(),m("div",F,[g("div",G,[S(c,{icon:"",name:"播放",class:"play",onClick:U}),S(c,{icon:"",onClick:E,name:"删除"}),S(c,{icon:"󰌄",onClick:M,name:"下载"}),S(c,{icon:"",name:"取消操作",onClick:O})]),S(u,{songs:f(I),"song-id-mapper":f(L),showSelect:!0,"show-header":!1,onGetSelectItems:D},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-ccb17794"]]),T=e=>(I("data-v-8b16ef51"),e=e(),L(),e),z={class:"sort-btn"},q=[T((()=>g("span",{class:"iconfont"},"",-1))),T((()=>g("span",null," 排序",-1)))],J=n(r({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){w((e=>({cf39b35c:f(o),48493519:f(n)})));const s=t(),o=i().get("fontColor"),l=i().get("background"),n=p((()=>{var e;return"color"==s.bgMode?null==(e=i().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),c=p((()=>"color"==s.bgMode?"#ffffff"==o.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),u=v(["歌曲排序","歌手排序","专辑排序","时长排序"]),r=v([!1,!1,!1,!1]),h=y(-1),_=p((()=>r.map(((e,a)=>a==h.value)))),I=e=>{"歌曲排序"==e?h.value=_.value[0]?-1:0:"歌手排序"==e?h.value=_.value[1]?-1:1:"专辑排序"==e?h.value=_.value[2]?-1:2:"时长排序"==e&&(h.value=_.value[3]?-1:3),-1==h.value?a("getSortChoice",_.value,!0):a("getSortChoice",_.value,!1)},L=()=>{-1==h.value&&(h.value=0,a("getSortChoice",_.value,!1))};return(e,a)=>{const s=U,n=M,t=E,i=j("prevent");return d(),m("div",z,[S(t,{trigger:"click",onCommand:I,"popper-class":`dropdown sort-drop ${f(c)}`},{dropdown:C((()=>[S(n,{style:N({color:f(o),background:f(l)})},{default:C((()=>[(d(!0),m(b,null,k(u,((e,a)=>(d(),P(s,{key:e,command:e},{default:C((()=>[g("span",{class:x({"is-choose":f(_)[a]})},V(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:C((()=>[B((d(),m("div",{class:"sort",onClick:L},q)),[[i]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-8b16ef51"]]),Z={class:"user-container"},$={class:"top-operation"},A=n(r({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(a,{emit:n}){const i=a,r=t(),{isFullScreen:h}=e(r),_=s(),{musicDownload:w,loveSongs:C,songRecord:N}=e(_),b=p((()=>{let e=v([]);return e="LoveView"==i.pageName?C.value:"RecentPlayView"==i.pageName?N.value:w.value,e.filter((e=>e.name.includes(x.value)||e.album.includes(x.value)||e.singer.includes(x.value)))})),k=p((()=>new Map(b.value.map(((e,a)=>[e.id,a]))))),P=p((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),V=p((()=>h.value?"RecentPlayView"==i.pageName?"560px":"580px":"RecentPlayView"==i.pageName?"420px":"440px")),x=y(""),B=e=>{x.value=e},j=v([!1,!1,!1,!1]),I=y(!1),L=(e,a)=>{for(let s=0;s<j.length;s++)j[s]=e[s];a&&(I.value=a)},U=()=>{"LoveView"==i.pageName?C.value.splice(0):"RecentPlayView"==i.pageName?N.value.splice(0):w.value.splice(0),o(l.SUCCESS,"已清空全部下载记录！")};return(e,a)=>(d(),m("div",Z,[g("div",$,[S(R,{songs:f(b)},null,8,["songs"]),S(c,{icon:"",name:f(P),onClick:U},null,8,["name"]),S(c,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>n("openSelect",!0))}),S(D,{onGetContent:B}),S(J,{onGetSortChoice:L})]),S(u,{songs:f(b),"song-id-mapper":f(k),sort:j,"is-cancel-sort":I.value,height:f(V)},null,8,["songs","song-id-mapper","sort","is-cancel-sort","height"])]))}}),[["__scopeId","data-v-a01f6c05"]]);export{O as U,A as a};
