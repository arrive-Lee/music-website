import{G as e,ax as a,u as l,i as s,Z as o,o as n,c as t,a as u,U as c,z as i,n as r,r as p,O as v,J as d,F as m,a7 as g,M as h,T as f,I as S,P as C,aq as w,ay as _,az as y,V as N}from"../@vue/@vue.59fec093.js";import{s as k}from"../pinia/pinia.81428a33.js";import{g as P,u as b,a as V,e as B,d as j,_ as I,t as L}from"../../assets/index-c885de52.js";import{D as M}from"../DecoratedButton/DecoratedButton.86ecbdbc.js";import{_ as R,P as U}from"../PlayButton/PlayButton.80a62826.js";import{S as D}from"../SearchButton/SearchButton.5353349b.js";import{b as E,c as G,d as z}from"../element-plus/element-plus.5cae0800.js";import{P as x}from"../NoSearch/NoSearch.36c5e9e0.js";const F={class:"batch-container"},O={class:"operation-select"},T=I(e({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:p}){const v=e;a((e=>({"0634ece7":l(d)})));const d=P().get("themeColor"),m=b(),{isPlay:g,songList:h,songListId:f,playProcess:S,playTime:C,current:w}=k(m),_=V(),{songRecord:y,musicDownload:N,loveSongs:I}=k(_),L=i("hideScroll"),U=s((()=>"LoveView"==v.pageName?I.value:"RecentPlayView"==v.pageName?y.value:N.value)),D=s((()=>new Map(U.value.map(((e,a)=>[e.id,a]))))),E=o([]),G=e=>{0!=E.length&&E.splice(0),E.push(...e)},z=async()=>{E.length>0?(g.value=!1,S.value=0,C.value=0,await r(),E.forEach((e=>{null==f.value.get(e.id)&&h.value.unshift(e)})),w.value=f.value.get(E[0].id),g.value=!0,B(j.SUCCESS,"已添加到播放列表！")):B(j.INFO,"请添加歌曲！")},x=()=>{E.forEach((e=>{_.addMuiscDownload(e)}))},T=()=>{if(E.length>0){const e=E.map((e=>e.id)),a=U.value.filter((a=>!e.includes(a.id)));U.value.splice(0),U.value.push(...a),B(j.SUCCESS,"已清除选中的歌曲！")}else B(j.INFO,"请添加歌曲！")},q=()=>{L(),p("closeSelect",!1)};return(e,a)=>(n(),t("div",F,[u("div",O,[c(M,{icon:"",name:"播放",class:"play",onClick:z}),c(M,{icon:"",onClick:T,name:"删除"}),c(M,{icon:"󰌄",onClick:x,name:"下载"}),c(M,{icon:"",name:"取消操作",onClick:q})]),c(R,{songs:l(U),"song-id-mapper":l(D),showSelect:!0,"show-header":!1,onGetSelectItems:G},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-855ad860"]]),q=e=>(_("data-v-d459fc75"),e=e(),y(),e),J={class:"sort-btn"},Z=[q((()=>u("span",{class:"iconfont"},"",-1))),q((()=>u("span",null," 排序",-1)))],$=I(e({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:i}){a((e=>({"667892a2":l(_),"3271bb94":l(k),"383c201f":l(N)})));const r=L(),_=P().get("fontColor"),y=P().get("background"),N=P().get("themeColor"),k=s((()=>{var e;return"color"==r.bgMode?null==(e=P().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),b=s((()=>"color"==r.bgMode?"#ffffff"==_.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),V=o(["歌曲排序","歌手排序","专辑排序","时长排序"]),B=o([!1,!1,!1,!1]),j=p(-1),I=s((()=>B.map(((e,a)=>a==j.value)))),M=e=>{"歌曲排序"==e?j.value=I.value[0]?-1:0:"歌手排序"==e?j.value=I.value[1]?-1:1:"专辑排序"==e?j.value=I.value[2]?-1:2:"时长排序"==e&&(j.value=I.value[3]?-1:3),-1==j.value?i("getSortChoice",I.value,!0):i("getSortChoice",I.value,!1)},R=()=>{-1==j.value&&(j.value=0,i("getSortChoice",I.value,!1))};return(e,a)=>{const s=E,o=G,i=z,r=w("prevent");return n(),t("div",J,[c(i,{trigger:"click",onCommand:M,"popper-class":`dropdown sort-drop ${l(b)}`},{dropdown:v((()=>[c(o,{style:d({color:l(_),background:l(y)})},{default:v((()=>[(n(!0),t(m,null,g(V,((e,a)=>(n(),h(s,{key:e,command:e},{default:v((()=>[u("span",{class:S({"is-choose":l(I)[a]})},f(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:v((()=>[C((n(),t("div",{class:"sort",onClick:R},Z)),[[r]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-d459fc75"]]),A={class:"user-container"},H={class:"top-operation"},K=I(e({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,r=V(),{musicDownload:v,loveSongs:d,songRecord:m}=k(r),g=p(1),h=p(50),f=s((()=>{let e=o([]);return e="LoveView"==i.pageName?d.value.slice(g.value-1,g.value*h.value):"RecentPlayView"==i.pageName?m.value.slice(g.value-1,g.value*h.value):v.value.slice(g.value-1,g.value*h.value),e.filter((e=>e.name.includes(P.value)||e.album.includes(P.value)||e.singer.includes(P.value)))})),S=s((()=>"LoveView"==i.pageName?d.value.length:"RecentPlayView"==i.pageName?m.value.length:v.value.length)),w=e=>{g.value=e},_=s((()=>new Map(f.value.map(((e,a)=>[e.id,a]))))),y=s((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),P=p(""),b=e=>{P.value=e},I=o([!1,!1,!1,!1]),L=p(!1),E=(e,a)=>{for(let l=0;l<I.length;l++)I[l]=e[l];a&&(L.value=a)},G=()=>{"LoveView"==i.pageName?d.value.splice(0):"RecentPlayView"==i.pageName?m.value.splice(0):v.value.splice(0),B(j.SUCCESS,"已清空全部下载记录！")};return(e,s)=>(n(),t("div",A,[u("div",H,[c(U,{songs:l(f)},null,8,["songs"]),c(M,{icon:"",name:l(y),onClick:G},null,8,["name"]),c(M,{icon:"",name:"批量操作",onClick:s[0]||(s[0]=e=>a("openSelect",!0))}),c(D,{onGetContent:b}),c($,{onGetSortChoice:E})]),c(R,{songs:l(f),"song-id-mapper":l(_),sort:I,"is-cancel-sort":L.value},null,8,["songs","song-id-mapper","sort","is-cancel-sort"]),C(c(x,{"cur-page":g.value,"page-size":h.value,total:l(S),onPageChange:w},null,8,["cur-page","page-size","total"]),[[N,h.value<l(S)]])]))}}),[["__scopeId","data-v-d21f4cc0"]]);export{T as U,K as a};
