import{s as e}from"../pinia/pinia.07d51cb2.js";import{u as a,a as s,e as o,d as l,q as n,r as t,_ as i,g as c}from"../../assets/index-b52ca4f8.js";import{D as u}from"../DecoratedButton/DecoratedButton.ff497d12.js";import{_ as r}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.33c531c1.js";import{G as p,i as m,Z as v,o as d,c as g,a as S,U as h,u as _,z as f,n as C,ax as w,d as y,O as N,J as k,F as P,a7 as b,M as V,T as L,I as B,P as j,aq as D,ay as I,az as x}from"../@vue/@vue.7ad02ad1.js";import{P as R}from"../PlayButton/PlayButton.5461b9b8.js";import{S as U}from"../SearchButton/SearchButton.fa815166.js";import{b as E,c as O,d as G}from"../element-plus/element-plus.372e8740.js";const M={class:"batch-container"},A={class:"operation-select"},F=i(p({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(i,{emit:c}){const p=i,w=a(),{isPlay:y,songList:N,songListId:k,playProcess:P,playTime:b,current:V}=e(w),L=s(),{songRecord:B,musicDownload:j,loveSongs:D}=e(L),I=f("hideScroll"),x=m((()=>"LoveView"==p.pageName?D.value:"RecentPlayView"==p.pageName?B.value:j.value)),R=m((()=>new Map(x.value.map(((e,a)=>[e.id,a]))))),U=v([]),E=e=>{0!=U.length&&U.splice(0),U.push(...e)},O=async()=>{U.length>0?(y.value=!1,P.value=0,b.value=0,await C(),U.forEach((e=>{null==k.value.get(e.id)&&N.value.unshift(e)})),V.value=k.value.get(U[0].id),y.value=!0,o(l.SUCCESS,"已添加到播放列表！")):o(l.INFO,"请添加歌曲！")},G=()=>{U.forEach((e=>{L.addMuiscDownload(e)}))},F=()=>{if(U.length>0){const e=U.map((e=>e.id)),a=x.value.filter((a=>!e.includes(a.id)));x.value.splice(0),x.value.push(...a),n(t.LOCAL,"songRecord",x.value),o(l.SUCCESS,"已清除选中的歌曲！")}else o(l.INFO,"请添加歌曲！")},T=()=>{I(),c("closeSelect",!1)};return(e,a)=>(d(),g("div",M,[S("div",A,[h(u,{icon:"",name:"播放",class:"play",onClick:O}),h(u,{icon:"",onClick:F,name:"删除"}),h(u,{icon:"󰌄",onClick:G,name:"下载"}),h(u,{icon:"",name:"取消操作",onClick:T})]),h(r,{songs:_(x),"song-id-mapper":_(R),showSelect:!0,"show-header":!1,onGetSelectItems:E},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-9365483f"]]),T=e=>(I("data-v-568d2043"),e=e(),x(),e),q={class:"sort-btn"},z=[T((()=>S("span",{class:"iconfont"},"",-1))),T((()=>S("span",null," 排序",-1)))],J=i(p({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){w((e=>({"37e7ddba":_(o),"6873b45b":_(s)})));const s=c().get("searchBg"),o=c().get("fontColor"),l=c().get("background"),n=m((()=>"#ffffff"==l.value?"more-light":"more-dark")),t=v(["歌曲排序","歌手排序","专辑排序","时长排序"]),i=v([!1,!1,!1,!1]),u=y(-1),r=m((()=>i.map(((e,a)=>a==u.value)))),p=e=>{"歌曲排序"==e?u.value=r.value[0]?-1:0:"歌手排序"==e?u.value=r.value[1]?-1:1:"专辑排序"==e?u.value=r.value[2]?-1:2:"时长排序"==e&&(u.value=r.value[3]?-1:3),-1==u.value?a("getSortChoice",r.value,!0):a("getSortChoice",r.value,!1)},f=()=>{-1==u.value&&(u.value=0,a("getSortChoice",r.value,!1))};return(e,a)=>{const s=E,i=O,c=G,u=D("prevent");return d(),g("div",q,[h(c,{trigger:"click",onCommand:p,"popper-class":`more ${_(n)} sort-drop`},{dropdown:N((()=>[h(i,{style:k({background:_(l),color:_(o)})},{default:N((()=>[(d(!0),g(P,null,b(t,((e,a)=>(d(),V(s,{key:e,command:e},{default:N((()=>[S("span",{class:B({"is-choose":_(r)[a]})},L(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:N((()=>[j((d(),g("div",{class:"sort",onClick:f},z)),[[u]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-568d2043"]]),K={class:"user-container"},Z={class:"top-operation"},$=i(p({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(a,{emit:i}){const c=a,p=s(),{musicDownload:f,loveSongs:C,songRecord:w}=e(p),N=m((()=>{let e=v([]);return e="LoveView"==c.pageName?C.value:"RecentPlayView"==c.pageName?w.value:f.value,e.filter((e=>e.name.includes(L.value)||e.album.includes(L.value)||e.singer.includes(L.value)))})),k=m((()=>new Map(N.value.map(((e,a)=>[e.id,a]))))),P=m((()=>"loveView"==c.pageName?"清空全部收藏":"recentPlayView"==c.pageName?"清空播放记录":"清空下载记录")),b=m((()=>"loveView"==c.pageName?"loveSongs":"recentPlayView"==c.pageName?"songRecord":"musicDownload")),V=m((()=>"RecentPlayView"==c.pageName?"420px":"440px")),L=y(""),B=e=>{L.value=e},j=v([!1,!1,!1,!1]),D=y(!1),I=(e,a)=>{for(let s=0;s<j.length;s++)j[s]=e[s];a&&(D.value=a)},x=()=>{let e=v([]);e="loveView"==c.pageName?C.value:"recentPlayView"==c.pageName?w.value:f.value,e.splice(0),n(t.LOCAL,b.value,e),o(l.SUCCESS,"已清空全部下载记录！")};return(e,a)=>(d(),g("div",K,[S("div",Z,[h(R,{songs:_(N)},null,8,["songs"]),h(u,{icon:"",name:_(P),onClick:x},null,8,["name"]),h(u,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>i("openSelect",!0))}),h(U,{onGetContent:B}),h(J,{onGetSortChoice:I})]),h(r,{songs:_(N),"song-id-mapper":_(k),sort:j,"is-cancel-sort":D.value,height:_(V)},null,8,["songs","song-id-mapper","sort","is-cancel-sort","height"])]))}}),[["__scopeId","data-v-ecd453e8"]]);export{F as U,$ as a};
