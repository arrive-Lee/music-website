import{s as e}from"../pinia/pinia.07d51cb2.js";import{u as a,a as s,e as o,d as l,v as n,w as t,_ as i,p as c,g as u}from"../../assets/index-4f6f95e1.js";import{D as r}from"../DecoratedButton/DecoratedButton.9d487e99.js";import{_ as p}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.3a451f2e.js";import{G as d,i as v,Z as m,o as g,c as S,a as f,U as h,u as _,z as w,n as C,ax as y,d as N,O as b,J as k,F as P,a7 as V,M as L,T as x,I as B,P as j,aq as D,ay as I,az as R}from"../@vue/@vue.7ad02ad1.js";import{P as U}from"../PlayButton/PlayButton.7bd14cef.js";import{S as M}from"../SearchButton/SearchButton.72922f6e.js";import{b as E,c as O,d as F}from"../element-plus/element-plus.372e8740.js";const G={class:"batch-container"},z={class:"operation-select"},A=i(d({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(i,{emit:c}){const u=i,d=a(),{isPlay:y,songList:N,songListId:b,playProcess:k,playTime:P,current:V}=e(d),L=s(),{songRecord:x,musicDownload:B,loveSongs:j}=e(L),D=w("hideScroll"),I=v((()=>"LoveView"==u.pageName?j.value:"RecentPlayView"==u.pageName?x.value:B.value)),R=v((()=>new Map(I.value.map(((e,a)=>[e.id,a]))))),U=m([]),M=e=>{0!=U.length&&U.splice(0),U.push(...e)},E=async()=>{U.length>0?(y.value=!1,k.value=0,P.value=0,await C(),U.forEach((e=>{null==b.value.get(e.id)&&N.value.unshift(e)})),V.value=b.value.get(U[0].id),y.value=!0,o(l.SUCCESS,"已添加到播放列表！")):o(l.INFO,"请添加歌曲！")},O=()=>{U.forEach((e=>{L.addMuiscDownload(e)}))},F=()=>{if(U.length>0){const e=U.map((e=>e.id)),a=I.value.filter((a=>!e.includes(a.id)));I.value.splice(0),I.value.push(...a),n(t.LOCAL,"songRecord",I.value),o(l.SUCCESS,"已清除选中的歌曲！")}else o(l.INFO,"请添加歌曲！")},A=()=>{D(),c("closeSelect",!1)};return(e,a)=>(g(),S("div",G,[f("div",z,[h(r,{icon:"",name:"播放",class:"play",onClick:E}),h(r,{icon:"",onClick:F,name:"删除"}),h(r,{icon:"󰌄",onClick:O,name:"下载"}),h(r,{icon:"",name:"取消操作",onClick:A})]),h(p,{songs:_(I),"song-id-mapper":_(R),showSelect:!0,"show-header":!1,onGetSelectItems:M},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-72a03256"]]),T=e=>(I("data-v-6dd2fbae"),e=e(),R(),e),$={class:"sort-btn"},q=[T((()=>f("span",{class:"iconfont"},"",-1))),T((()=>f("span",null," 排序",-1)))],J=i(d({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:a}){y((e=>({"1f1d7911":_(o),"22a6f1c9":_(n)})));const s=c(),o=u().get("fontColor"),l=u().get("background"),n=v((()=>{var e;return"color"==s.bgMode?null==(e=u().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),t=v((()=>"color"==s.bgMode?"#ffffff"==o.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),i=m(["歌曲排序","歌手排序","专辑排序","时长排序"]),r=m([!1,!1,!1,!1]),p=N(-1),d=v((()=>r.map(((e,a)=>a==p.value)))),w=e=>{"歌曲排序"==e?p.value=d.value[0]?-1:0:"歌手排序"==e?p.value=d.value[1]?-1:1:"专辑排序"==e?p.value=d.value[2]?-1:2:"时长排序"==e&&(p.value=d.value[3]?-1:3),-1==p.value?a("getSortChoice",d.value,!0):a("getSortChoice",d.value,!1)},C=()=>{-1==p.value&&(p.value=0,a("getSortChoice",d.value,!1))};return(e,a)=>{const n=E,c=O,u=F,r=D("prevent");return g(),S("div",$,[h(u,{trigger:"click",onCommand:w,"popper-class":`dropdown sort-drop ${_(t)}`},{dropdown:b((()=>[h(c,{style:k({color:_(o),background:`${_(l)} url(${_(s).skinUrl}) no-repeat center`,backgroundSize:"cover"})},{default:b((()=>[(g(!0),S(P,null,V(i,((e,a)=>(g(),L(n,{key:e,command:e},{default:b((()=>[f("span",{class:B({"is-choose":_(d)[a]})},x(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:b((()=>[j((g(),S("div",{class:"sort",onClick:C},q)),[[r]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-6dd2fbae"]]),K={class:"user-container"},Z={class:"top-operation"},H=i(d({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(a,{emit:i}){const u=a,d=s(),{musicDownload:w,loveSongs:C,songRecord:y}=e(d),b=c(),{isFullScreen:k}=e(b),P=v((()=>{let e=m([]);return e="LoveView"==u.pageName?C.value:"RecentPlayView"==u.pageName?y.value:w.value,e.filter((e=>e.name.includes(j.value)||e.album.includes(j.value)||e.singer.includes(j.value)))})),V=v((()=>new Map(P.value.map(((e,a)=>[e.id,a]))))),L=v((()=>"loveView"==u.pageName?"清空全部收藏":"recentPlayView"==u.pageName?"清空播放记录":"清空下载记录")),x=v((()=>"loveView"==u.pageName?"loveSongs":"recentPlayView"==u.pageName?"songRecord":"musicDownload")),B=v((()=>k.value?"RecentPlayView"==u.pageName?"560px":"580px":"RecentPlayView"==u.pageName?"420px":"440px")),j=N(""),D=e=>{j.value=e},I=m([!1,!1,!1,!1]),R=N(!1),E=(e,a)=>{for(let s=0;s<I.length;s++)I[s]=e[s];a&&(R.value=a)},O=()=>{let e=m([]);e="loveView"==u.pageName?C.value:"recentPlayView"==u.pageName?y.value:w.value,e.splice(0),n(t.LOCAL,x.value,e),o(l.SUCCESS,"已清空全部下载记录！")};return(e,a)=>(g(),S("div",K,[f("div",Z,[h(U,{songs:_(P)},null,8,["songs"]),h(r,{icon:"",name:_(L),onClick:O},null,8,["name"]),h(r,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>i("openSelect",!0))}),h(M,{onGetContent:D}),h(J,{onGetSortChoice:E})]),h(p,{songs:_(P),"song-id-mapper":_(V),sort:I,"is-cancel-sort":R.value,height:_(B)},null,8,["songs","song-id-mapper","sort","is-cancel-sort","height"])]))}}),[["__scopeId","data-v-91f444b5"]]);export{A as U,H as a};
