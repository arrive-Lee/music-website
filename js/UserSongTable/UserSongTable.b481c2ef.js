import{G as e,ax as a,u as s,i as o,Z as l,o as n,c as t,a as u,U as c,z as i,n as r,r as p,O as v,J as d,F as m,a7 as g,M as f,T as h,I as S,P as C,aq as w,ay as _,az as y,V as k}from"../@vue/@vue.59fec093.js";import{s as P}from"../pinia/pinia.81428a33.js";import{g as N,u as b,a as B,e as V,d as j,_ as I,t as U}from"../../assets/index-bd7d6872.js";import{D}from"../DecoratedButton/DecoratedButton.3414623a.js";import{_ as E,P as L}from"../PlayButton/PlayButton.febf1ecc.js";import{S as M}from"../SearchButton/SearchButton.0020c3d1.js";import{b as R,c as G,d as z}from"../element-plus/element-plus.a3a17194.js";import{P as x}from"../Pagination/Pagination.9ca352a2.js";const F={class:"batch-container"},O={class:"operation-select"},T=I(e({__name:"UserBatch",props:{pageName:null},emits:["closeSelect"],setup(e,{emit:p}){const v=e;a((e=>({"0634ece7":s(d)})));const d=N().get("themeColor"),m=b(),{isPlay:g,songList:f,songListId:h,playProcess:S,playTime:C,current:w}=P(m),_=B(),{songRecord:y,musicDownload:k,loveSongs:I}=P(_),U=i("hideScroll"),L=o((()=>"LoveView"==v.pageName?I.value:"RecentPlayView"==v.pageName?y.value:k.value)),M=o((()=>new Map(L.value.map(((e,a)=>[e.id,a]))))),R=l([]),G=e=>{0!=R.length&&R.splice(0),R.push(...e)},z=async()=>{R.length>0?(g.value=!1,S.value=0,C.value=0,await r(),R.forEach((e=>{null==h.value.get(e.id)&&f.value.unshift(e)})),w.value=h.value.get(R[0].id),g.value=!0,V(j.SUCCESS,"已添加到播放列表！")):V(j.INFO,"请添加歌曲！")},x=()=>{R.forEach((e=>{_.addMuiscDownload(e)}))},T=()=>{if(R.length>0){const e=R.map((e=>e.id)),a=L.value.filter((a=>!e.includes(a.id)));L.value.splice(0),L.value.push(...a),V(j.SUCCESS,"已清除选中的歌曲！")}else V(j.INFO,"请添加歌曲！")},q=()=>{U(),p("closeSelect",!1)};return(e,a)=>(n(),t("div",F,[u("div",O,[c(D,{icon:"",name:"播放",class:"play",onClick:z}),c(D,{icon:"",onClick:T,name:"删除"}),c(D,{icon:"󰌄",onClick:x,name:"下载"}),c(D,{icon:"",name:"取消操作",onClick:q})]),c(E,{songs:s(L),"song-id-mapper":s(M),showSelect:!0,"show-header":!1,onGetSelectItems:G},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-855ad860"]]),q=e=>(_("data-v-d459fc75"),e=e(),y(),e),J={class:"sort-btn"},Z=[q((()=>u("span",{class:"iconfont"},"",-1))),q((()=>u("span",null," 排序",-1)))],$=I(e({__name:"SortButton",emits:["getSortChoice"],setup(e,{emit:i}){a((e=>({"667892a2":s(_),"3271bb94":s(P),"383c201f":s(k)})));const r=U(),_=N().get("fontColor"),y=N().get("background"),k=N().get("themeColor"),P=o((()=>{var e;return"color"==r.bgMode?null==(e=N().get("searchBg"))?void 0:e.value:"rgba(210,210,210,0.2)"})),b=o((()=>"color"==r.bgMode?"#ffffff"==_.value?"dropdown-dark":"dropdown-light":"dropdown-skin")),B=l(["歌曲排序","歌手排序","专辑排序","时长排序"]),V=l([!1,!1,!1,!1]),j=p(-1),I=o((()=>V.map(((e,a)=>a==j.value)))),D=e=>{"歌曲排序"==e?j.value=I.value[0]?-1:0:"歌手排序"==e?j.value=I.value[1]?-1:1:"专辑排序"==e?j.value=I.value[2]?-1:2:"时长排序"==e&&(j.value=I.value[3]?-1:3),-1==j.value?i("getSortChoice",I.value,!0):i("getSortChoice",I.value,!1)},E=()=>{-1==j.value&&(j.value=0,i("getSortChoice",I.value,!1))};return(e,a)=>{const o=R,l=G,i=z,r=w("prevent");return n(),t("div",J,[c(i,{trigger:"click",onCommand:D,"popper-class":`dropdown sort-drop ${s(b)}`},{dropdown:v((()=>[c(l,{style:d({color:s(_),background:s(y)})},{default:v((()=>[(n(!0),t(m,null,g(B,((e,a)=>(n(),f(o,{key:e,command:e},{default:v((()=>[u("span",{class:S({"is-choose":s(I)[a]})},h(e),3)])),_:2},1032,["command"])))),128))])),_:1},8,["style"])])),default:v((()=>[C((n(),t("div",{class:"sort",onClick:E},Z)),[[r]])])),_:1},8,["popper-class"])])}}}),[["__scopeId","data-v-d459fc75"]]),A={class:"user-container"},H={class:"top-operation"},K=I(e({__name:"UserSongTable",props:{pageName:null},emits:["openSelect"],setup(e,{emit:a}){const i=e,r=B(),{musicDownload:v,loveSongs:d,songRecord:m}=P(r),g=o((()=>{let e=l([]);return e="LoveView"==i.pageName?d.value:"RecentPlayView"==i.pageName?m.value:v.value,e})),f=o((()=>new Map(g.value.map(((e,a)=>[e.id,a]))))),h=p(1),S=p(40),w=o((()=>g.value.slice((h.value-1)*S.value,h.value*S.value).filter((e=>e.name.includes(b.value)||e.album.includes(b.value)||e.singer.includes(b.value))))),_=o((()=>g.value.length)),y=e=>{h.value=e},N=o((()=>"LoveView"==i.pageName?"清空全部收藏":"RecentPlayView"==i.pageName?"清空播放记录":"清空下载记录")),b=p(""),I=e=>{b.value=e},U=l([!1,!1,!1,!1]),R=p(!1),G=(e,a)=>{for(let s=0;s<U.length;s++)U[s]=e[s];a&&(R.value=a)},z=()=>{"LoveView"==i.pageName?d.value.splice(0):"RecentPlayView"==i.pageName?m.value.splice(0):v.value.splice(0),V(j.SUCCESS,"已清空全部下载记录！")};return(e,o)=>(n(),t("div",A,[u("div",H,[c(L,{songs:s(w)},null,8,["songs"]),c(D,{icon:"",name:s(N),onClick:z},null,8,["name"]),c(D,{icon:"",name:"批量操作",onClick:o[0]||(o[0]=e=>a("openSelect",!0))}),c(M,{onGetContent:I}),c($,{onGetSortChoice:G})]),c(E,{songs:s(w),"song-id-mapper":s(f),sort:U,"is-cancel-sort":R.value},null,8,["songs","song-id-mapper","sort","is-cancel-sort"]),C(c(x,{"cur-page":h.value,"page-size":S.value,total:s(_),onPageChange:y},null,8,["cur-page","page-size","total"]),[[k,S.value<s(_)]])]))}}),[["__scopeId","data-v-ec6166a4"]]);export{T as U,K as a};
