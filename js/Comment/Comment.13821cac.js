import{g as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as a,u as n,d as l,i as t,o,c,F as i,a7 as m,I as p,U as r,a as u,T as v,R as k,P as g,V as y,S as d,O as C,W as h,n as f,aq as _,ay as M,az as w}from"../@vue/@vue.7ad02ad1.js";import{g as b,_ as I}from"../../assets/index-74abaf53.js";const L=s=>(M("data-v-c99428a6"),s=s(),w(),s),j={class:"comment-container"},x=L((()=>u("p",{class:"title"},"精彩评论",-1))),z={class:"right"},H={class:"nickname"},D={class:"ip-time"},F={class:"comment-time"},q={key:0,class:"ip"},B={class:"comment-content"},G={class:"like-count"},O=["onClick"],P=L((()=>u("span",{class:"iconfont_1 like"},"",-1))),R=L((()=>u("span",{class:"reply"},"回复",-1))),S=["onClick"],T={key:0,class:"reply-container"},U={class:"right"},V={class:"nickname"},W={class:"ip-time"},Y={class:"comment-time"},A={key:0,class:"ip"},E={class:"comment-content"},J={class:"like-count"},K=["onClick"],N=L((()=>u("span",{class:"iconfont_1 like"},"",-1))),Q=L((()=>u("span",{class:"reply"},"回复",-1))),X=["onClick"],Z=L((()=>u("span",{class:"iconfont_1"},"",-1))),$=L((()=>u("span",{class:"iconfont"},"",-1))),ss=L((()=>u("span",{class:"iconfont"},"",-1))),es=I(e({__name:"Comment",props:{comments:null},setup(e){const M=e;a((s=>({"2e6c04a1":n(w),"41f15044":n(L),10062509:n(I)})));const w=b().get("fontColor"),I=b().get("shadow"),L=b().get("fontBlack"),es=l(-1),as=l(50),ns=t((()=>M.comments.slice(0,as.value))),ls=()=>{as.value+=50,as.value>M.comments.length&&(as.value=M.comments.length)},ts=s=>{const e=Math.floor(Math.random()*Math.pow(10,3)*60*60*24+60*Math.pow(10,3)*60);return os(e+ +s)},os=s=>{const e=new Date(s);return e.getFullYear()+"年"+(e.getMonth()+1+"月")+(e.getDate()+"日")+" "+(e.getHours()<10?"0"+e.getHours():e.getHours()+"")+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())};return(a,l)=>{const t=s,w=_("prevent");return o(),c("div",j,[x,(o(!0),c(i,null,m(n(ns),((s,a)=>{var n;return o(),c("div",{class:p(["comment",{"none-border":a==e.comments.length-1}]),key:s.commentId},[r(t,{src:s.avatar,loading:"lazy",class:"left"},null,8,["src"]),u("div",z,[u("span",H,v(s.nickname),1),u("p",D,[u("span",F,v(os(+s.time)),1),s.ip?(o(),c("span",q,"来自"+v(s.ip),1)):k("",!0)]),u("p",B,v(s.content),1),u("div",G,[g((o(),c("p",{onClick:s=>(s=>{const{isLove:e,likeCount:a}=M.comments[s];M.comments[s].likeCount=e?+a-1+"":+a+1+"",M.comments[s].isLove=!e})(a)},[P,g(u("span",{class:"count"},v(s.likeCount),513),[[y,+s.likeCount>0]])],8,O)),[[w]]),R]),s.reply&&s.reply.length>0?g((o(),c("p",{key:0,onClick:s=>(async s=>{es.value==s?es.value=-1:(-1==es.value||(es.value=-1,await f()),es.value=s)})(a),class:"get-reply"},[d(" 查看"+v(null==(n=s.reply)?void 0:n.length)+"条回复",1),u("span",{class:p(["iconfont",{"is-rotate":es.value==a}])},"",2)],8,S)),[[w]]):k("",!0),r(h,{name:"show"},{default:C((()=>[s.reply&&s.reply.length>0?g((o(),c("div",T,[(o(!0),c(i,null,m(s.reply,((e,n)=>(o(),c("div",{class:p(["reply-area",{"none-border":n==s.reply.length-1}]),key:e.commentId},[r(t,{src:e.avatar,loading:"lazy",class:"left"},null,8,["src"]),u("div",U,[u("span",V,v(e.nickname),1),u("p",W,[u("span",Y,v(ts(s.time)),1),e.ip?(o(),c("span",A,"来自"+v(e.ip),1)):k("",!0)]),u("p",E,v(e.content),1),u("div",J,[u("p",{onClick:s=>((s,e)=>{const{isLove:a,likeCount:n}=M.comments[s].reply[e];M.comments[s].reply[e].likeCount=a?+n-1+"":+n+1+"",M.comments[s].reply[e].isLove=!a})(a,n)},[N,g(u("span",{class:"count"},v(e.likeCount),513),[[y,+e.likeCount>0]])],8,K),Q])])],2)))),128)),g((o(),c("p",{onClick:s=>es.value=es.value==a?-1:a,class:"collapse"},[d(" 收起 "),Z],8,X)),[[w]])],512)),[[y,es.value==a]]):k("",!0)])),_:2},1024)])],2)})),128)),g(u("button",{class:"more-reply",onClick:ls},[d(" 更多精彩评论"),$],512),[[y,as.value<e.comments.length]]),g(u("button",{class:"more-reply collapse-reply",onClick:l[0]||(l[0]=s=>as.value=50)},[d(" 收起评论"),ss],512),[[y,as.value==e.comments.length]])])}}}),[["__scopeId","data-v-c99428a6"]]);export{es as C};
