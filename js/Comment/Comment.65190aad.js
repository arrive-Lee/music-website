import{g as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as a,u as n,d as l,i as t,o,c,F as i,a7 as m,I as p,U as r,a as u,T as v,R as k,P as d,V as g,S as y,O as C,W as h,n as f,aq as M,ay as _,az as b}from"../@vue/@vue.7ad02ad1.js";import{g as w,_ as I}from"../../assets/index-18827e65.js";const L=s=>(_("data-v-cd6cedfa"),s=s(),b(),s),j={class:"comment-container"},x=L((()=>u("p",{class:"title"},"精彩评论",-1))),z={class:"right"},H={class:"nickname"},D={class:"ip-time"},F={class:"comment-time"},q={key:0,class:"ip"},B={class:"comment-content"},G={class:"like-count"},O=["onClick"],P=L((()=>u("span",{class:"iconfont_1 like"},"",-1))),R=L((()=>u("span",{class:"reply"},"回复",-1))),S=["onClick"],T={key:0,class:"reply-container"},U={class:"right"},V={class:"nickname"},W={class:"ip-time"},Y={class:"comment-time"},A={key:0,class:"ip"},E={class:"comment-content"},J={class:"like-count"},K=["onClick"],N=L((()=>u("span",{class:"iconfont_1 like"},"",-1))),Q=L((()=>u("span",{class:"reply"},"回复",-1))),X=["onClick"],Z=L((()=>u("span",{class:"iconfont"},"",-1))),$=L((()=>u("span",{class:"iconfont"},"",-1))),ss=L((()=>u("span",{class:"iconfont"},"",-1))),es=I(e({__name:"Comment",props:{comments:null},setup(e){const _=e;a((s=>({"4a45d685":n(b),"6cb9147a":n(L),"251c64ed":n(I)})));const b=w().get("fontColor"),I=w().get("shadow"),L=w().get("fontBlack"),es=l(-1),as=l(50),ns=t((()=>_.comments.slice(0,as.value))),ls=()=>{as.value+=50,as.value>_.comments.length&&(as.value=_.comments.length)},ts=s=>{const e=Math.floor(Math.random()*Math.pow(10,3)*60*60*24+60*Math.pow(10,3)*60);return os(e+ +s)},os=s=>{const e=new Date(s);return e.getFullYear()+"年"+(e.getMonth()+1+"月")+(e.getDate()+"日")+" "+(e.getHours()<10?"0"+e.getHours():e.getHours()+"")+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())};return(a,l)=>{const t=s,b=M("prevent");return o(),c("div",j,[x,(o(!0),c(i,null,m(n(ns),((s,a)=>{var n;return o(),c("div",{class:p(["comment",{"none-border":a==e.comments.length-1}]),key:s.commentId},[r(t,{src:s.avatar,loading:"lazy",class:"left"},null,8,["src"]),u("div",z,[u("span",H,v(s.nickname),1),u("p",D,[u("span",F,v(os(+s.time)),1),s.ip?(o(),c("span",q,"来自"+v(s.ip),1)):k("",!0)]),u("p",B,v(s.content),1),u("div",G,[d((o(),c("p",{onClick:s=>(s=>{const{isLove:e,likeCount:a}=_.comments[s];_.comments[s].likeCount=e?+a-1+"":+a+1+"",_.comments[s].isLove=!e})(a)},[P,d(u("span",{class:"count"},v(s.likeCount),513),[[g,+s.likeCount>0]])],8,O)),[[b]]),R]),s.reply&&s.reply.length>0?d((o(),c("p",{key:0,onClick:s=>(async s=>{es.value==s?es.value=-1:(-1==es.value||(es.value=-1,await f()),es.value=s)})(a),class:"get-reply"},[y(" 查看"+v(null==(n=s.reply)?void 0:n.length)+"条回复",1),u("span",{class:p(["iconfont",{"is-rotate":es.value==a}])},"",2)],8,S)),[[b]]):k("",!0),r(h,{name:"show"},{default:C((()=>[s.reply&&s.reply.length>0?d((o(),c("div",T,[(o(!0),c(i,null,m(s.reply,((e,n)=>(o(),c("div",{class:p(["reply-area",{"none-border":n==s.reply.length-1}]),key:e.commentId},[r(t,{src:e.avatar,loading:"lazy",class:"left"},null,8,["src"]),u("div",U,[u("span",V,v(e.nickname),1),u("p",W,[u("span",Y,v(ts(s.time)),1),e.ip?(o(),c("span",A,"来自"+v(e.ip),1)):k("",!0)]),u("p",E,v(e.content),1),u("div",J,[u("p",{onClick:s=>((s,e)=>{const{isLove:a,likeCount:n}=_.comments[s].reply[e];_.comments[s].reply[e].likeCount=a?+n-1+"":+n+1+"",_.comments[s].reply[e].isLove=!a})(a,n)},[N,d(u("span",{class:"count"},v(e.likeCount),513),[[g,+e.likeCount>0]])],8,K),Q])])],2)))),128)),d((o(),c("p",{onClick:s=>es.value=es.value==a?-1:a,class:"collapse"},[y(" 收起 "),Z],8,X)),[[b]])],512)),[[g,es.value==a]]):k("",!0)])),_:2},1024)])],2)})),128)),d(u("button",{class:"more-reply",onClick:ls},[y(" 更多精彩评论"),$],512),[[g,as.value<e.comments.length]]),d(u("button",{class:"more-reply collapse-reply",onClick:l[0]||(l[0]=s=>as.value=50)},[y(" 收起"),ss],512),[[g,as.value==e.comments.length]])])}}}),[["__scopeId","data-v-cd6cedfa"]]);export{es as C};
