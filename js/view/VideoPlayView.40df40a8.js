import{G as a,ax as e,i as s,d as t,Z as o,y as i,c as l,a as r,T as n,P as c,V as m,U as p,u,S as d,z as v,o as y,ay as h,az as j}from"../@vue/@vue.7ad02ad1.js";import{b as f}from"../vue-router/vue-router.47595bf3.js";import{p as R,g,a as w,b as C,v as b,e as E,d as k,w as O,x,y as T,o as z,z as V,r as _,A as I,B as L,D,C as N,s as B,_ as A}from"../../assets/index-3440610b.js";import{D as F}from"../DecoratedButton/DecoratedButton.17d5265b.js";import{M}from"../Mv/Mv.790a8c0a.js";import{h as P}from"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const S={class:"video-container scroll-container"},U=["src","poster"],Z={class:"detail"},G={class:"title"},q={class:"artist-info"},$={class:"operation"},H={class:"comment-area"},J={class:"title"},K=(a=>(h("data-v-e9c1e315"),a=a(),j(),a))((()=>r("span",{class:"iconfont_1"}," ",-1))),Q=A(a({__name:"VideoPlayView",setup(a){e((a=>({"82d1082c":u(j),"82f046f4":u(A),"48370e61":u(Q),a95dde08:u(W),"020728d0":u(X)}))),P("space",(()=>{var a,e,s;(null==(a=aa.value)?void 0:a.paused)?null==(e=aa.value)||e.play():null==(s=aa.value)||s.pause()}));const h=R(),j=g().get("fontColor"),A=g().get("fontBlack"),Q=g().get("shadow"),W=v("fontGray"),X=s((()=>h.isFullScreen?"650px":"520px")),Y=w(),aa=t(),ea=f(),sa=ea.query.id+"",ta=o({id:sa,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),oa=o([]),ia=v("firstLoading"),la=o([]),ra=t(!1),na=()=>{B("我在https://www.liyinchao.cloud/#"+ea.fullPath+"观看"+ta.name+",快来和我一起观看把！")};return C((async()=>{if(/.*[A-Z]+.*/.test(sa)){try{const a=await V(sa),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;ta.name=e,ta.image=s,ta.playCount=o,ta.publishTime=_(t),ta.artist=i.nickname}catch(a){E(k.ERROR,a.message)}try{const a=await I(sa),{urls:e}=a;e?ta.url=e[0].url:E(k.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){E(k.ERROR,a.message)}try{const a=await L(sa),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;oa.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){E(k.ERROR,a.message)}try{const a=await D(sa,100),{comments:e,hotComments:s}=a;z(s,la),z(e,la)}catch(a){E(k.ERROR,a.message)}}else{try{const a=await b(sa),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;ta.name=e,ta.image=t,ta.artist=s,ta.playCount=o,ta.time=i,ta.publishTime=l}catch(a){E(k.ERROR,a.message)}try{const a=await O(sa),{data:{url:e,fee:s}}=a;e?(ta.url=e,ta.available=s):E(k.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){E(k.ERROR,a.message)}try{const a=await x(sa),{mvs:e}=a;e&&e.forEach((a=>{oa.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){E(k.ERROR,a.message)}try{const a=await T(sa,1e4),{comments:e,hotComments:s}=a;z(s,la),z(e,la)}catch(a){E(k.ERROR,a.message)}}Y.addRecord(ta,Y.videoRecord,Y.videoRecordId),Y.initLoveStatus(ta,Y.loveVideoId),ia.value=!1}),ia),i((()=>{P.unbind("space")})),(a,e)=>(y(),l("div",S,[r("video",{src:ta.url,poster:ta.image,controls:"",ref_key:"video",ref:aa,class:"video-player"},null,8,U),r("div",Z,[r("p",G,n(ta.name),1),r("div",q,[r("span",null,n(/.*[A-Z]+.*/.test(sa)?"创作者："+ta.artist:"演唱："+ta.artist),1),r("span",null,n(ta.playCount)+"次观看",1),r("span",null,"发布时间："+n(ta.publishTime),1)]),c(r("div",$,[p(F,{name:ta.isLove?"取消收藏":"收藏",icon:ta.isLove?"":"","icon-style":ta.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>u(Y).addLove(ta,u(Y).loveVideo,u(Y).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),p(F,{name:"下载",onClick:e[1]||(e[1]=a=>u(Y).addVideoDownload(ta)),icon:"",class:"operate"}),p(F,{name:"分享",icon:"",onClick:na,class:"operate"}),p(F,{name:"评论",icon:"",onClick:e[2]||(e[2]=a=>ra.value=!0),class:"operate"})],512),[[m,!ra.value]])]),c(p(M,{mvs:oa,title:"相关推荐"},null,8,["mvs"]),[[m,!ra.value]]),c(r("div",H,[r("h4",J,"全部评论"+n(`(${la.length})`),1),r("button",{class:"exit",onClick:e[3]||(e[3]=a=>ra.value=!1)},[K,d(" 退出 ")]),p(N,{comments:la},null,8,["comments"])],512),[[m,ra.value]])]))}}),[["__scopeId","data-v-e9c1e315"]]);export{Q as default};
