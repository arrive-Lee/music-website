import{u as a}from"../element-plus/element-plus.a3a17194.js";import{P as s}from"../Pagination/Pagination.2864d965.js";import{G as e,ax as t,r as o,Z as i,i as l,c as n,P as r,V as m,U as u,u as c,a as p,T as d,R as v,M as g,O as h,z as f,o as j,F as y,a7 as b,ay as L,az as R}from"../@vue/@vue.59fec093.js";import{b as w}from"../vue-router/vue-router.2f940de9.js";import{g as _,a as z,b as B,Q as E,w as O,e as S,d as T,R as x,S as M,T as P,U as k,x as C,i as D,j as A,s as I,_ as G}from"../../assets/index-2c02ac3d.js";import{M as U}from"../Mv/Mv.70ba4e21.js";import{A as N}from"../Albums/Albums.51b79651.js";import{D as q}from"../DecoratedButton/DecoratedButton.a60b251c.js";import{M as F}from"../MoreButton/MoreButton.1c422820.js";import{T as V}from"../Tab/Tab.86539e97.js";import{P as H,_ as J}from"../PlayButton/PlayButton.abbe39d2.js";import{O as Q}from"../OnlineBatch/OnlineBatch.3fb19db6.js";import{L as Z}from"../Loading/Loading.e6baf2fc.js";import{_ as K}from"../NoSearch/NoSearch.7271c85b.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const W={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},aa={class:"name"},sa={class:"info"},ea={key:0},ta=(a=>(L("data-v-73f8fa43"),a=a(),R(),a))((()=>p("p",{class:"job"},"职业：歌手、词曲创作者",-1))),oa={class:"fans"},ia={class:"header-operation"},la={class:"content"},na={class:"detail"},ra={class:"desc"},ma=G(e({__name:"ArtistDetailView",setup(e){t((a=>({"57d31a36":c(L),"57c37ad2":c(R),"9f7b0da0":c(ua),"3d1aa6a6":c(G),"0f192d78":c(ma)})));const L=_().get("fontColor"),R=_().get("fontBlack"),G=_().get("shadow"),ma=_().get("themeColor"),ua=f("fontGray"),ca=z(),pa=w(),da=pa.query.id+"",va=pa.query.score+"",ga=o(!1),ha=f("firstLoading"),fa=f("hideScroll"),ja=i([!1,!1]),ya=i({name:"",score:va,id:da,avatar:"",alias:[]}),ba=i([]),La=i([]),Ra=l((()=>new Map(La.map(((a,s)=>[a.id,s]))))),wa=o(1),_a=o(50),za=l((()=>La.slice((wa.value-1)*_a.value,wa.value*_a.value))),Ba=l((()=>La.length)),Ea=a=>{wa.value=a},Oa=i([]),Sa=i([]),Ta=o(!1),xa=a=>{fa(),Ta.value=a},Ma=a=>{fa(),Ta.value=a},Pa=()=>{I("我有一个宝藏歌手推荐给你："+ya.name+"，地址：https://www.liyinchao.cloud/#"+pa.fullPath)},ka=a=>{fa(),"album"==a&&0==Sa.length?B((async()=>{try{const a=await E(da),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;Sa.push({name:e,id:a.id,cover:s,publishTime:O(t),artistId:da+""})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{ja[0]=0==Sa.length,ga.value=!1}),500)}),ga):"mv"==a&&0==Oa.length?B((async()=>{try{const a=await x(da),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:o,playCount:i}=a;Oa.push({id:s,name:e,artist:t,image:o,playCount:i})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{ja[1]=0==Oa.length,ga.value=!1}),500)}),ga):"detail"==a&&0==ba.length&&B((async()=>{try{const a=await M(da),{introduction:s}=a;s.forEach((a=>{ba.push({title:a.ti,content:a.txt})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{ga.value=!1}),500)}),ga)};return B((async()=>{try{const a=await P(da),{artist:s}=a,{name:e,alias:t,picUrl:o,briefDesc:i}=s;ya.name=e,ya.alias=t,ya.avatar=o,ya.briefDesc=i,ca.initLoveStatus(ya,ca.loveSingerId)}catch(a){S(T.ERROR,a.message)}try{const a=await k(da,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await C(e),{songs:o}=t;o.forEach((a=>{D([],La,a)})),ca.initLoveMusic(La),A(e,La)}catch(a){S(T.ERROR,a.message)}ha.value=!1}),ha),(e,t)=>{var o,i;const l=s,f=a;return j(),n("div",W,[r(u(Q,{songs:c(za),"song-id-mapper":c(Ra),onCloseSelect:xa},null,8,["songs","song-id-mapper"]),[[m,Ta.value]]),r(p("div",X,[p("img",{src:ya.avatar,class:"left"},null,8,Y),p("div",$,[p("h4",aa,d(ya.name),1),p("div",sa,[0!=(null==(o=ya.alias)?void 0:o.length)?(j(),n("p",ea," 英文名："+d(null==(i=ya.alias)?void 0:i.join("、")),1)):v("",!0),ta]),p("span",oa,"粉丝数："+d(ya.score),1),p("div",ia,[u(H,{songs:c(za)},null,8,["songs"]),u(q,{name:ya.isLove?"取消关注":"关注",icon:ya.isLove?"":"","icon-style":ya.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=a=>c(ca).addLove(ya,c(ca).loveSinger,c(ca).loveSingerId))},null,8,["name","icon","icon-style"]),Ta.value?v("",!0):(j(),g(F,{key:0,"share-to":Pa,onOpenSelect:Ma}))])])],512),[[m,!Ta.value]]),r(p("div",la,[u(V,{active:"hot",onGetActive:ka},{content:h((()=>[u(f,{label:"精选",name:"hot"},{default:h((()=>[u(J,{songs:c(za),"song-id-mapper":c(Ra)},null,8,["songs","song-id-mapper"]),r(u(l,{"cur-page":wa.value,"page-size":_a.value,total:c(Ba),onPageChange:Ea},null,8,["cur-page","page-size","total"]),[[m,_a.value<c(Ba)]])])),_:1}),u(f,{label:"专辑",name:"album"},{default:h((()=>[r(u(K,{text:"歌手暂无专辑",size:280},null,512),[[m,ja[0]]]),u(Z,{isLoading:ga.value},null,8,["isLoading"]),r(u(N,{albums:Sa},null,8,["albums"]),[[m,!ja[0]]])])),_:1}),u(f,{label:"视频",name:"mv"},{default:h((()=>[r(u(K,{text:"歌手暂无视频",size:280},null,512),[[m,ja[1]]]),u(Z,{isLoading:ga.value},null,8,["isLoading"]),r(u(U,{mvs:Oa},null,8,["mvs"]),[[m,!ja[1]]])])),_:1}),u(f,{label:"详情",name:"detail"},{default:h((()=>[u(Z,{isLoading:ga.value},null,8,["isLoading"]),p("div",na,[p("p",ra,d(ya.briefDesc),1),(j(!0),n(y,null,b(ba,(a=>(j(),n(y,{key:a.title},[p("h4",null,d(a.title),1),p("p",null,d(a.content),1)],64)))),128))])])),_:1})])),_:1})],512),[[m,!Ta.value]])])}}}),[["__scopeId","data-v-73f8fa43"]]);export{ma as default};
