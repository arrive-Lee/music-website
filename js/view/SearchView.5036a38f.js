import{u as a}from"../element-plus/element-plus.f3996937.js";import{T as s,_ as e}from"../Tab/Tab.2812a435.js";import{b as t}from"../vue-router/vue-router.53ff932e.js";import{b as l,o,p as i,h as n,_ as r}from"../../assets/index-80ac5bcd.js";import{P as m}from"../PlayButton/PlayButton.6ed61330.js";import{D as u}from"../DecoratedButton/DecoratedButton.e6e05208.js";import{M as p}from"../Mv/Mv.9a10b5ad.js";import{A as c}from"../Albums/Albums.4d3343f4.js";import{P as d}from"../PlayList/PlayList.652a138a.js";import{L as g}from"../Loading/Loading.1ef7473c.js";import{S as v}from"../Singer/Singer.ddc295de.js";import{N as h}from"../NoSearch/NoSearch.c68b6378.js";import{G as y,Z as j,d as f,c as b,U as _,O as k,o as w,a as L,M as S,R as x,z}from"../@vue/@vue.7ad02ad1.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../lodash/lodash.57b1d944.js";import"../nprogress/nprogress.8c6d26c7.js";const E={class:"search-container scroll-container"},P={class:"song"},U={class:"operation-top"},A={key:1,class:"singers"},B=r(y({__name:"SearchView",setup(r){const y=t().query.keyWord+"",B=j([]),C=j([]),I=j([]),T=j([]),D=j([]),M=f(!1),N=z("firstLoading"),G=z("hideScroll"),W=a=>{G(),"video"==a&&0==C.length?l((async()=>{const a=await o(1004,60,y),{result:{mvs:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,cover:t,artistName:l,playCount:o}=a;C.push({id:s,name:e,image:t,artist:l,playCount:o})})),M.value=!1}),M):"album"==a&&0==I.length?l((async()=>{const a=await o(10,60,y),{result:{albums:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,picUrl:t,publishTime:l,artist:o}=a;I.push({id:s,name:e,cover:t,publishTime:i(l),artistId:o.id})})),M.value=!1}),M):"playList"==a&&0==T.length?l((async()=>{const a=await o(1e3,60,y),{result:{playlists:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,coverImgUrl:t,playCount:l}=a;T.push({id:s,name:e,image:t,playCount:l,description:"",tag:[],creator:{nickname:"",avatarUrl:""}})})),M.value=!1}),M):"singer"==a&&0==D.length&&l((async()=>{const a=await o(100,60,y),{result:{artists:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,picUrl:t,accountId:l}=a;D.push({id:s,name:e,avatar:t,score:l})})),M.value=!1}),M)};return l((async()=>{const a=await o(1,40,y),{result:{songs:s}}=a;if(s){const a=[];s.forEach((s=>{const{id:e,name:t,artists:l,album:o,fee:i}=s;a.push(e),B.push({id:e,name:t,singer:l.map((a=>a.name)).join(","),songImage:l[0].img1v1Url,album:o.name,available:i,url:"",time:""})})),n(a.join(","),B)}N.value=!1}),N),(t,l)=>{const o=e,i=a;return w(),b("div",E,[_(s,{onGetActive:W,active:"song",class:"search-tab"},{content:k((()=>[_(i,{label:"歌曲",name:"song"},{default:k((()=>[L("div",P,[L("div",U,[_(m,{songs:B},null,8,["songs"]),_(u,{name:"下载",icon:"󰌄"}),_(u,{name:"批量操作",icon:""})]),_(o,{songs:B,height:"440px"},null,8,["songs"])])])),_:1}),_(i,{label:"视频",name:"video"},{default:k((()=>[M.value?(w(),S(g,{key:0,"is-loading":M.value},null,8,["is-loading"])):x("",!0),0==C.length?(w(),S(h,{key:1})):(w(),S(p,{key:2,mvs:C},null,8,["mvs"]))])),_:1}),_(i,{label:"专辑",name:"album"},{default:k((()=>[M.value?(w(),S(g,{key:0,"is-loading":M.value},null,8,["is-loading"])):x("",!0),0==I.length?(w(),S(h,{key:1})):(w(),S(c,{key:2,albums:I},null,8,["albums"]))])),_:1}),_(i,{label:"歌单",name:"playList"},{default:k((()=>[M.value?(w(),S(g,{key:0,"is-loading":M.value},null,8,["is-loading"])):x("",!0),0==T.length?(w(),S(h,{key:1})):(w(),S(d,{key:2,playlists:T},null,8,["playlists"]))])),_:1}),_(i,{label:"歌手",name:"singer"},{default:k((()=>[0==D.length?(w(),S(h,{key:0})):(w(),b("div",A,[_(v,{"singer-list":D},null,8,["singer-list"])]))])),_:1}),_(i,{label:"歌词",name:"songWord"},{default:k((()=>[_(h)])),_:1}),_(i,{label:"用户",name:"user"},{default:k((()=>[_(h)])),_:1})])),_:1})])}}}),[["__scopeId","data-v-0975eac0"]]);export{B as default};
