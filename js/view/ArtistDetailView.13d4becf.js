import{u as a}from"../element-plus/element-plus.1ffadbb7.js";import{G as s,ax as e,r as t,Z as o,i,c as l,P as n,V as r,U as m,u as c,a as u,T as p,R as d,M as v,O as g,z as h,o as f,F as j,a7 as y,ay as b,az as R}from"../@vue/@vue.59fec093.js";import{b as L}from"../vue-router/vue-router.2f940de9.js";import{g as w,a as _,b as B,Q as E,w as O,e as S,d as T,R as x,S as M,T as k,U as z,x as D,i as C,j as A,s as I,_ as P}from"../../assets/index-933c3f88.js";import{M as G}from"../Mv/Mv.f8f9a7b3.js";import{A as U}from"../Albums/Albums.76412682.js";import{D as N}from"../DecoratedButton/DecoratedButton.d972464c.js";import{M as q}from"../MoreButton/MoreButton.c65f145f.js";import{T as F}from"../Tab/Tab.e5726de1.js";import{P as V,_ as H}from"../PlayButton/PlayButton.fd3f050e.js";import{O as K}from"../OnlineBatch/OnlineBatch.129d96f4.js";import{L as Q}from"../Loading/Loading.cabc153b.js";import{_ as Z}from"../NoSearch/NoSearch.2874fadd.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const J={class:"artist-detail-container scroll-container"},W={class:"header"},X=["src"],Y={class:"right"},$={class:"name"},aa={class:"info"},sa={key:0},ea=(a=>(b("data-v-0b729b17"),a=a(),R(),a))((()=>u("p",{class:"job"},"职业：歌手、词曲创作者",-1))),ta={class:"fans"},oa={class:"header-operation"},ia={class:"content"},la={class:"detail"},na={class:"desc"},ra=P(s({__name:"ArtistDetailView",setup(s){e((a=>({"20c8953c":c(b),"20e7d404":c(R),b6b86ef8:c(ma),"793b47d9":c(P),"7063f7cc":c(ra)})));const b=w().get("fontColor"),R=w().get("fontBlack"),P=w().get("shadow"),ra=w().get("themeColor"),ma=h("fontGray"),ca=_(),ua=L(),pa=ua.query.id+"",da=ua.query.score+"",va=t(!1),ga=h("firstLoading"),ha=h("hideScroll"),fa=o([!1,!1]),ja=o({name:"",score:da,id:pa,avatar:"",alias:[]}),ya=o([]),ba=o([]),Ra=i((()=>new Map(ba.map(((a,s)=>[a.id,s]))))),La=o([]),wa=o([]),_a=t(!1),Ba=a=>{ha(),_a.value=a},Ea=a=>{ha(),_a.value=a},Oa=()=>{I("我有一个宝藏歌手推荐给你："+ja.name+"，地址：https://www.liyinchao.cloud/#"+ua.fullPath)},Sa=a=>{ha(),"album"==a&&0==wa.length?B((async()=>{try{const a=await E(pa),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;wa.push({name:e,id:a.id,cover:s,publishTime:O(t),artistId:pa+""})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{fa[0]=0==wa.length,va.value=!1}),500)}),va):"mv"==a&&0==La.length?B((async()=>{try{const a=await x(pa),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:o,playCount:i}=a;La.push({id:s,name:e,artist:t,image:o,playCount:i})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{fa[1]=0==La.length,va.value=!1}),500)}),va):"detail"==a&&0==ya.length&&B((async()=>{try{const a=await M(pa),{introduction:s}=a;s.forEach((a=>{ya.push({title:a.ti,content:a.txt})}))}catch(a){S(T.ERROR,a.message)}setTimeout((()=>{va.value=!1}),500)}),va)};return B((async()=>{try{const a=await k(pa),{artist:s}=a,{name:e,alias:t,picUrl:o,briefDesc:i}=s;ja.name=e,ja.alias=t,ja.avatar=o,ja.briefDesc=i,ca.initLoveStatus(ja,ca.loveSingerId)}catch(a){S(T.ERROR,a.message)}try{const a=await z(pa,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await D(e),{songs:o}=t;o.forEach((a=>{C([],ba,a)})),ca.initLoveMusic(ba),A(e,ba)}catch(a){S(T.ERROR,a.message)}ga.value=!1}),ga),(s,e)=>{var t,o;const i=a;return f(),l("div",J,[n(m(K,{songs:ba,"song-id-mapper":c(Ra),onCloseSelect:Ba},null,8,["songs","song-id-mapper"]),[[r,_a.value]]),n(u("div",W,[u("img",{src:ja.avatar,class:"left"},null,8,X),u("div",Y,[u("h4",$,p(ja.name),1),u("div",aa,[0!=(null==(t=ja.alias)?void 0:t.length)?(f(),l("p",sa," 英文名："+p(null==(o=ja.alias)?void 0:o.join("、")),1)):d("",!0),ea]),u("span",ta,"粉丝数："+p(ja.score),1),u("div",oa,[m(V,{songs:ba},null,8,["songs"]),m(N,{name:ja.isLove?"取消关注":"关注",icon:ja.isLove?"":"","icon-style":ja.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>c(ca).addLove(ja,c(ca).loveSinger,c(ca).loveSingerId))},null,8,["name","icon","icon-style"]),_a.value?d("",!0):(f(),v(q,{key:0,"share-to":Oa,onOpenSelect:Ea}))])])],512),[[r,!_a.value]]),n(u("div",ia,[m(F,{active:"hot",onGetActive:Sa},{content:g((()=>[m(i,{label:"精选",name:"hot"},{default:g((()=>[m(H,{songs:ba,"song-id-mapper":c(Ra)},null,8,["songs","song-id-mapper"])])),_:1}),m(i,{label:"专辑",name:"album"},{default:g((()=>[n(m(Z,{text:"歌手暂无专辑",size:280},null,512),[[r,fa[0]]]),m(Q,{isLoading:va.value},null,8,["isLoading"]),n(m(U,{albums:wa},null,8,["albums"]),[[r,!fa[0]]])])),_:1}),m(i,{label:"视频",name:"mv"},{default:g((()=>[n(m(Z,{text:"歌手暂无视频",size:280},null,512),[[r,fa[1]]]),m(Q,{isLoading:va.value},null,8,["isLoading"]),n(m(G,{mvs:La},null,8,["mvs"]),[[r,!fa[1]]])])),_:1}),m(i,{label:"详情",name:"detail"},{default:g((()=>[m(Q,{isLoading:va.value},null,8,["isLoading"]),u("div",la,[u("p",na,p(ja.briefDesc),1),(f(!0),l(j,null,y(ya,(a=>(f(),l(j,{key:a.title},[u("h4",null,p(a.title),1),u("p",null,p(a.content),1)],64)))),128))])])),_:1})])),_:1})],512),[[r,!_a.value]])])}}}),[["__scopeId","data-v-0b729b17"]]);export{ra as default};
