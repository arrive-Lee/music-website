import{s,t as a,g as e}from"../element-plus/element-plus.1b7b143d.js";import{G as t,M as l,O as i,o,c as n,a7 as r,a as m,F as c,ay as p,Z as u,U as d,z as v,T as h,az as g,aA as f,n as y,u as j}from"../@vue/@vue.8ad7c23d.js";import{s as S}from"../pinia/pinia.5e0359dc.js";import{_ as E,g as I,u as O,a as b,s as R,b as N,c as _,e as k,d as C,f as x,h as z,i as w,j as P,k as U}from"../../assets/index-26ab7b85.js";import{P as L}from"../PlayList/PlayList.c1217a9f.js";import{M}from"../Mv/Mv.747b0640.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.975449d5.js";import"../@element-plus/@element-plus.6a4138c6.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../lodash/lodash.57b1d944.js";import"../vue-router/vue-router.b970196e.js";import"../nprogress/nprogress.8c6d26c7.js";const F=["src"],T=E(t({__name:"Carousel",props:{pictures:null,type:null,height:null,position:null},setup:e=>(p((s=>({"694f0987":e.height}))),(t,p)=>{const u=a,d=s;return o(),l(d,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:i((()=>[(o(!0),n(c,null,r(e.pictures,(s=>(o(),l(u,{key:s},{default:i((()=>[m("img",{src:s},null,8,F)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-3ac905cd"]]),A=s=>(g("data-v-40716dee"),s=s(),f(),s),B={class:"main-container"},G={class:"musiclist"},V=A((()=>m("h4",{class:"title"},"推荐新音乐",-1))),Z={class:"content"},q=["onClick"],D=[A((()=>m("span",{class:"iconfont"},"",-1)))],H={class:"right"},J=E(t({__name:"RecommendView",setup(s){p((s=>({"680b6e49":j(a),"1c4fb736":j(t),"33087ab1":j(l)})));const a=I().get("fontColor"),t=I().get("fontBlack"),l=I().get("shadow"),i=O(),{songList:g,current:f,isPlay:E,playProcess:F,playTime:A,songNum:J}=S(i),K=u(b(R.SESSION,"recommend-banners")||[]),Q=u(b(R.SESSION,"recommend-playlists")||[]),W=u(b(R.SESSION,"recommend-songlists")||[]),X=u(b(R.SESSION,"recommend-mvlists")||[]),Y=v("firstLoading");return 0==K.length&&(Y.value=!0,N().then((s=>{const{banners:a}=s;a.forEach((s=>{const{imageUrl:a}=s;K.push(a)})),_(R.SESSION,"recommend-banners",K)})).catch((s=>{k(C.ERROR,s.message)})),x().then((s=>{const{playlists:a}=s;a.forEach((s=>{if(Q.length<10){const{name:a,id:e,coverImgUrl:t,playCount:l,description:i,tags:o,creator:n}=s;Q.push({name:a,id:e,playCount:l,description:i,image:t,tag:o,creator:{avatarUrl:n.avatarUrl,nickname:n.nickname}})}})),_(R.SESSION,"recommend-playlists",Q)})).catch((s=>{k(C.ERROR,s.message)})),z(40).then((s=>{const{data:{list:a}}=s,e=[];for(let t of a){const{fee:s}=t.data;if(!(W.length<10))break;"0"!=s&&"8"!=s||w(e,W,t.data)}P(e.join(","),W,"recommend-songlists"),setTimeout((()=>{Y.value=!1}),500)})).catch((s=>{k(C.ERROR,s.message)})),U(10,"内地","全部","最新").then((s=>{const{data:a}=s;a.forEach((s=>{const{id:a,name:e,cover:t,playCount:l,artistName:i}=s;X.push({id:a,name:e,image:t,playCount:l,artist:i})})),_(R.SESSION,"recommend-mvlists",X)})).catch((s=>{k(C.ERROR,s.message)}))),(s,a)=>{const t=e;return o(),n("div",B,[d(T,{pictures:K.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),d(L,{title:"你的歌单补给站",playlists:Q},null,8,["playlists"]),m("div",G,[V,m("div",Z,[(o(!0),n(c,null,r(W,(s=>(o(),n("div",{key:s.id,class:"song-recommend"},[m("div",{onClick:a=>(async s=>{if("0"==s.available||"8"==s.available){const a=g.value.findIndex((a=>a.id==s.id));-1==a?0==f.value?(E&&(E.value=!1),F.value=0,A.value=0,g.value.unshift(s),await y(),E.value=!0):(g.value.unshift(s),f.value=0):f.value!=a?f.value=a:E.value=!0}else(s.available="1")?k(C.INFO,"此歌曲为vip专属"):(s.available="10")&&k(C.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(s),class:"mask"},D,8,q),d(t,{src:s.songImage,lazy:"",class:"left"},null,8,["src"]),m("div",H,[m("p",null,h(s.name),1),m("p",null,h(s.singer),1)])])))),128))])]),d(M,{title:"最新mv",mvs:X,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-40716dee"]]);export{J as default};
