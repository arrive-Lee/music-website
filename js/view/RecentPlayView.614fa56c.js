import{u as s}from"../element-plus/element-plus.e3268319.js";import{G as a,Z as e,d as o,c as t,U as n,O as i,z as l,o as r,a as m,u as p,ax as u,ay as c,az as d}from"../@vue/@vue.69a1071d.js";import{g as j,a as v,s as g,D as h,i as f,j as y,e as _,d as b,E as B,_ as x}from"../../assets/index-c6c9497e.js";import{T as z,_ as R}from"../Tab/Tab.6c9baa6c.js";import{P as S}from"../PlayButton/PlayButton.763039eb.js";import{D}from"../DecoratedButton/DecoratedButton.658abbfa.js";import{S as E}from"../SearchButton/SearchButton.bdab510e.js";import{M as P}from"../Mv/Mv.97b22c16.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.ea52d298.js";import"../@element-plus/@element-plus.a36f95b2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.294e9718.js";import"../lodash/lodash.57b1d944.js";import"../vue-router/vue-router.f91b6d5b.js";import"../nprogress/nprogress.8c6d26c7.js";const w={class:"recent-container scroll-container"},G={class:"operation"},O=(s=>(c("data-v-a1595a8e"),s=s(),d(),s))((()=>m("p",{class:"tip"},"自动同步该账号下最近一周播放的歌曲",-1))),C=x(a({__name:"RecentPlayView",setup(a){var c;u((s=>({86320880:p(d)})));const d=j().get("fontColor"),x=null==(c=v(g.SESSION,"userInfo"))?void 0:c.uid,C=e([]),I=e([]);let M;const T=o(""),A=l("firstLoading");A.value=!0;const U=l("hideScroll"),$=s=>{M=e([]),T.value=s;const a=C.filter((s=>s.name.includes(T.value)||s.album.includes(T.value)||s.singer.includes(T.value)));M.push(...a)},k=()=>{U()};return h(x).then((s=>{const{weekData:a}=s;if(a){const s=[];a.forEach((a=>{f(s,C,a.song)})),y(s.join(","),C)}A.value=!1})).catch((s=>{_(b.ERROR,s.message)})),B().then((s=>{const{data:{videos:a}}=s;a&&a.forEach((s=>{const{id:a,text:e,coverUrl:o}=s.mlogBaseData;I.push({id:a,name:e,image:o,artist:"",playCount:""})}))})).catch((s=>{_(b.ERROR,s.message)})),(a,e)=>{const o=s;return r(),t("div",w,[n(z,{active:"song",onGetActive:k},{content:i((()=>[n(o,{label:`歌曲 ${C.length}`,name:"song"},{default:i((()=>[m("div",G,[n(S,{songs:C},null,8,["songs"]),n(D,{icon:"󰌄",name:"下载"}),n(D,{icon:"",name:"批量操作"}),n(E,{onGetContent:$})]),n(R,{songs:T.value?p(M):C,isPlaylist:!0,height:"420px"},null,8,["songs"]),O])),_:1},8,["label"]),n(o,{label:`视频 ${I.length}`,name:"video "},{default:i((()=>[n(P,{mvs:I},null,8,["mvs"])])),_:1},8,["label"])])),_:1})])}}}),[["__scopeId","data-v-a1595a8e"]]);export{C as default};
