import{s as a,t as s,g as e}from"../element-plus/element-plus.372e8740.js";import{G as t,ax as i,M as l,O as o,o as n,c as r,a7 as c,a as p,F as u,Z as m,U as d,u as v,T as g,ay as h,az as f,z as y,n as j}from"../@vue/@vue.7ad02ad1.js";import{s as R}from"../pinia/pinia.07d51cb2.js";import{_ as k,g as _,u as b,a as w,b as C,c as I,e as x,d as z,f as E,h as O,i as L,j as M,k as P}from"../../assets/index-18827e65.js";import{P as U}from"../PlayList/PlayList.c11a2e16.js";import{M as F}from"../Mv/Mv.9944bf12.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.47595bf3.js";import"../nprogress/nprogress.8c6d26c7.js";const N=["src"],T=k(t({__name:"Carousel",props:{pictures:null,type:null,height:null,position:null},setup:e=>(i((a=>({"0ab291d6":e.height}))),(t,i)=>{const m=s,d=a;return n(),l(d,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:o((()=>[(n(!0),r(u,null,c(e.pictures,(a=>(n(),l(m,{key:a},{default:o((()=>[p("img",{src:a},null,8,N)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-c3094784"]]),B=a=>(h("data-v-166ce0dd"),a=a(),f(),a),G={class:"main-container"},V={class:"musiclist"},Z=B((()=>p("h4",{class:"title"},"推荐新音乐",-1))),q={class:"content"},A=["onClick"],D=[B((()=>p("span",{class:"iconfont"},"",-1)))],H={class:"right"},J=k(t({__name:"RecommendView",setup(a){i((a=>({"57505f60":v(s),"733afce2":v(t),"0292fd90":v(l)})));const s=_().get("fontColor"),t=_().get("fontBlack"),l=_().get("shadow"),o=b(),{songList:h,current:f,isPlay:k,playProcess:N,playTime:B,songListId:J}=R(o),K=w(),Q=m([]),S=m([]),W=m([]),X=m([]),Y=y("firstLoading");return C((async()=>{try{const a=await I(),{banners:s}=a;s.forEach((a=>{const{imageUrl:s}=a;Q.push(s)}))}catch(a){x(z.ERROR,a.message)}try{const a=await E(10),{playlists:s}=a;s.forEach((a=>{if(S.length<10){const{name:s,id:e,coverImgUrl:t,playCount:i,description:l,tags:o,creator:n}=a;S.push({name:s,id:e,playCount:i,description:l,image:t,tag:o,creator:{avatarUrl:n.avatarUrl,nickname:n.nickname}})}}))}catch(a){x(z.ERROR,a.message)}try{const a=await O(40),{data:{list:s}}=a,e=[];for(let t of s){const{fee:a}=t.data;if(!(W.length<10))break;"0"!=a&&"8"!=a||L(e,W,t.data)}M(e.join(","),W)}catch(a){x(z.ERROR,a.message)}try{const a=await P(10,"内地","全部","最新"),{data:s}=a;s.forEach((a=>{const{id:s,name:e,cover:t,playCount:i,artistName:l}=a;X.push({id:s,name:e,image:t,playCount:i,artist:l})}))}catch(a){x(z.ERROR,a.message)}Y.value=!1}),Y),(a,s)=>{const t=e;return n(),r("div",G,[d(T,{pictures:Q.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),d(U,{title:"你的歌单补给站",playlists:S},null,8,["playlists"]),p("div",V,[Z,p("div",q,[(n(!0),r(u,null,c(W,(a=>(n(),r("div",{key:a.id,class:"song-recommend"},[p("div",{onClick:s=>(async a=>{if("0"==a.available||"8"==a.available){const s=J.value.get(a.id);null==s?(K.addRecord(a,K.songRecord,K.loveMusicId,"songRecord"),0==f.value?(k&&(k.value=!1),N.value=0,B.value=0,h.value.unshift(a),await j(),k.value=!0):(h.value.unshift(a),f.value=0)):f.value!=s?f.value=s:k.value=!0}else(a.available="1")?x(z.INFO,"此歌曲为vip专属"):(a.available="10")&&x(z.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(a),class:"mask"},D,8,A),d(t,{src:a.songImage,loading:"lazy",class:"left"},null,8,["src"]),p("div",H,[p("p",null,g(a.name),1),p("p",null,g(a.singer),1)])])))),128))])]),d(F,{title:"最新mv",mvs:X,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-166ce0dd"]]);export{J as default};
