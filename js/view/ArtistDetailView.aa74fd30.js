import{w as a}from"../element-plus/element-plus.4a0090f9.js";import{g as s,a as e,b as t,R as o,w as i,e as l,d as n,S as r,T as m,U as c,V as u,x as p,i as d,j as v,P as g,s as h,_ as f}from"../../assets/index-a0247f8c.js";import{G as j,ax as y,r as b,Z as w,i as R,c as L,P as z,V as _,U as B,u as E,a as O,T,R as x,M,O as S,z as k,o as C,F as D,a7 as P,ay as A,az as I}from"../@vue/@vue.59fec093.js";import{b as G}from"../vue-router/vue-router.2f940de9.js";import{M as U}from"../Mv/Mv.8ca69f8a.js";import{A as N}from"../Albums/Albums.5295aee7.js";import{D as V}from"../DecoratedButton/DecoratedButton.d6f2fda2.js";import{M as q}from"../MoreButton/MoreButton.a606018d.js";import{T as F}from"../Tab/Tab.bef77694.js";import{P as H,_ as K}from"../PlayButton/PlayButton.a1b68cfb.js";import{O as Z}from"../OnlineBatch/OnlineBatch.aa9d6bfe.js";import{L as J}from"../Loading/Loading.184b9483.js";import{_ as Q}from"../NoSearch/NoSearch.ca7c48c1.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const W={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},aa={class:"name"},sa={class:"info"},ea={key:0},ta=(a=>(A("data-v-cba25c76"),a=a(),I(),a))((()=>O("p",{class:"job"},"职业：歌手、词曲创作者",-1))),oa={class:"fans"},ia={class:"header-operation"},la={class:"content"},na={class:"detail"},ra={class:"desc"},ma=f(j({__name:"ArtistDetailView",setup(f){y((a=>({d3aaadfe:E(j),d3c9ecc6:E(A),"3ea86505":E(ca),"1fca3b78":E(I),c8990fe6:E(ma)})));const j=s().get("fontColor"),A=s().get("fontBlack"),I=s().get("shadow"),ma=s().get("themeColor"),ca=k("fontGray"),ua=e(),pa=G(),da=pa.query.id+"",va=pa.query.score+"",ga=b(!1),ha=k("firstLoading"),fa=w([!1,!1]),ja=w({name:"",score:va,id:da,avatar:"",alias:[]}),ya=w([]),ba=w([]),wa=R((()=>new Map(ba.map(((a,s)=>[a.id,s]))))),Ra=b(1),La=b(30),za=R((()=>ba.slice((Ra.value-1)*La.value,Ra.value*La.value))),_a=R((()=>ba.length)),Ba=a=>{Ra.value=a},Ea=w([]),Oa=w([]),Ta=b(!1),xa=a=>{Ta.value=a},Ma=a=>{Ta.value=a},Sa=()=>{h("我有一个宝藏歌手推荐给你："+ja.name+"，地址：https://www.liyinchao.cloud/#"+pa.fullPath)},ka=a=>{"album"==a&&0==Oa.length?t((async()=>{try{const a=await o(da),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;Oa.push({name:e,id:a.id,cover:s,publishTime:i(t),artistId:da+""})}))}catch(a){l(n.ERROR,a.message)}setTimeout((()=>{fa[0]=0==Oa.length,ga.value=!1}),500)}),ga):"mv"==a&&0==Ea.length?t((async()=>{try{const a=await r(da),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:o,playCount:i}=a;Ea.push({id:s,name:e,artist:t,image:o,playCount:i})}))}catch(a){l(n.ERROR,a.message)}setTimeout((()=>{fa[1]=0==Ea.length,ga.value=!1}),500)}),ga):"detail"==a&&0==ya.length&&t((async()=>{try{const a=await m(da),{introduction:s}=a;s.forEach((a=>{ya.push({title:a.ti,content:a.txt})}))}catch(a){l(n.ERROR,a.message)}setTimeout((()=>{ga.value=!1}),500)}),ga)};return t((async()=>{try{const a=await c(da),{artist:s}=a,{name:e,alias:t,picUrl:o,briefDesc:i}=s;ja.name=e,ja.alias=t,ja.avatar=o,ja.briefDesc=i,ua.initLoveStatus(ja,ua.loveSingerId)}catch(a){l(n.ERROR,a.message)}try{const a=await u(da,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await p(e),{songs:o}=t;o.forEach((a=>{d([],ba,a)})),ua.initLoveMusic(ba),v(e,ba)}catch(a){l(n.ERROR,a.message)}ha.value=!1}),ha),(s,e)=>{var t,o;const i=g,l=a;return C(),L("div",W,[z(B(Z,{songs:E(za),"song-id-mapper":E(wa),onCloseSelect:xa},null,8,["songs","song-id-mapper"]),[[_,Ta.value]]),z(O("div",X,[O("img",{src:ja.avatar,class:"left"},null,8,Y),O("div",$,[O("h4",aa,T(ja.name),1),O("div",sa,[0!=(null==(t=ja.alias)?void 0:t.length)?(C(),L("p",ea," 英文名："+T(null==(o=ja.alias)?void 0:o.join("、")),1)):x("",!0),ta]),O("span",oa,"粉丝数："+T(ja.score),1),O("div",ia,[B(H,{songs:E(za)},null,8,["songs"]),B(V,{name:ja.isLove?"取消关注":"关注",icon:ja.isLove?"":"","icon-style":ja.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>E(ua).addLove(ja,E(ua).loveSinger,E(ua).loveSingerId))},null,8,["name","icon","icon-style"]),Ta.value?x("",!0):(C(),M(q,{key:0,"share-to":Sa,onOpenSelect:Ma}))])])],512),[[_,!Ta.value]]),z(O("div",la,[B(F,{active:"hot",onGetActive:ka},{content:S((()=>[B(l,{label:"精选",name:"hot"},{default:S((()=>[B(K,{songs:E(za),"page-size":La.value,"song-id-mapper":E(wa)},null,8,["songs","page-size","song-id-mapper"]),z(B(i,{"cur-page":Ra.value,"page-size":La.value,total:E(_a),onPageChange:Ba},null,8,["cur-page","page-size","total"]),[[_,La.value<E(_a)]])])),_:1}),B(l,{label:"专辑",name:"album"},{default:S((()=>[z(B(Q,{text:"歌手暂无专辑",size:280},null,512),[[_,fa[0]]]),B(J,{isLoading:ga.value},null,8,["isLoading"]),z(B(N,{albums:Oa,"show-pagination":!0},null,8,["albums"]),[[_,!fa[0]]])])),_:1}),B(l,{label:"视频",name:"mv"},{default:S((()=>[z(B(Q,{text:"歌手暂无视频",size:280},null,512),[[_,fa[1]]]),B(J,{isLoading:ga.value},null,8,["isLoading"]),z(B(U,{mvs:Ea,"show-pagination":!0},null,8,["mvs"]),[[_,!fa[1]]])])),_:1}),B(l,{label:"详情",name:"detail"},{default:S((()=>[B(J,{isLoading:ga.value},null,8,["isLoading"]),O("div",na,[O("p",ra,T(ja.briefDesc),1),(C(!0),L(D,null,P(ya,(a=>(C(),L(D,{key:a.title},[O("h4",null,T(a.title),1),O("p",null,T(a.content),1)],64)))),128))])])),_:1})])),_:1})],512),[[_,!Ta.value]])])}}}),[["__scopeId","data-v-cba25c76"]]);export{ma as default};
