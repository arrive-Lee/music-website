import{u as a}from"../element-plus/element-plus.372e8740.js";import{G as s,ax as e,d as t,Z as o,i,c as l,P as n,V as r,U as m,u as c,a as u,T as p,R as d,M as v,O as g,o as h,F as f,a7 as j,ay as y,az as b,z as _}from"../@vue/@vue.7ad02ad1.js";import{b as L}from"../vue-router/vue-router.47595bf3.js";import{g as R,a as w,b as E,G as M,e as O,d as S,H as x,o as k,I as z,J as A,K as B,p as D,i as I,j as C,s as T,_ as G}from"../../assets/index-b52ca4f8.js";import{M as U}from"../Mv/Mv.3eacd0c0.js";import{A as q}from"../Albums/Albums.02ea3acc.js";import{D as F}from"../DecoratedButton/DecoratedButton.ff497d12.js";import{M as N}from"../MoreButton/MoreButton.54649ff4.js";import{T as P}from"../Tab/Tab.bf805a3b.js";import{_ as V}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.33c531c1.js";import{O as H}from"../OnlineBatch/OnlineBatch.46fc896a.js";import{L as J}from"../Loading/Loading.8a33cb22.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const K={class:"artist-detail-container scroll-container"},Z={class:"header"},Q=["src"],W={class:"right"},X={class:"name"},Y={class:"info"},$={key:0},aa=(a=>(y("data-v-5469c13f"),a=a(),b(),a))((()=>u("p",{class:"job"},"职业：歌手、词曲创作者",-1))),sa={class:"fans"},ea={class:"header-operation"},ta={class:"content"},oa={class:"detail"},ia={class:"desc"},la=G(s({__name:"ArtistDetailView",setup(s){e((a=>({e4b68dac:c(y),"54e710f5":c(b),"034f6d12":c(G)})));const y=R().get("fontColor"),b=R().get("fontBlack"),G=R().get("shadow"),la=w(),na=L(),ra=na.query.id+"",ma=na.query.score,ca=t(!1),ua=_("firstLoading"),pa=_("hideScroll"),da=o({name:"",score:Math.floor(Number.parseInt(ma)/1e4)+"万",id:ra,avatar:"",alias:[]}),va=o([]),ga=o([]),ha=i((()=>new Map(ga.map(((a,s)=>[a.id,s]))))),fa=o([]),ja=o([]),ya=t(!1),ba=a=>{ya.value=a},_a=a=>{pa(),ya.value=a},La=()=>{T("我有一个宝藏歌手推荐给你："+da.name+"，地址：https://www.liyinchao.cloud/#"+na.fullPath)},Ra=a=>{pa(),"mv"==a&&0==fa.length?E((async()=>{try{const a=await M(ra),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:o,playCount:i}=a;fa.push({id:s,name:e,artist:t,image:o,playCount:i})}))}catch(a){O(S.ERROR,a.message)}ca.value=!1}),ca):"album"==a&&0==ja.length?E((async()=>{try{const a=await x(ra),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;ja.push({name:e,id:a.id,cover:s,publishTime:k(t),artistId:ra+""})}))}catch(a){O(S.ERROR,a.message)}ca.value=!1}),ca):"detail"==a&&0==va.length&&E((async()=>{try{const a=await z(ra),{introduction:s}=a;s.forEach((a=>{va.push({title:a.ti,content:a.txt})}))}catch(a){O(S.ERROR,a.message)}ca.value=!1}),ca)};return E((async()=>{try{const a=await A(ra),{artist:s}=a,{name:e,alias:t,picUrl:o,briefDesc:i}=s;da.name=e,da.alias=t,da.avatar=o,da.briefDesc=i,la.initLoveStatus(da,la.loveSingerId)}catch(a){O(S.ERROR,a.message)}try{const a=await B(ra,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await D(e),{songs:o}=t;o.forEach((a=>{I([],ga,a)})),la.initLoveMusic(ga),C(e,ga)}catch(a){O(S.ERROR,a.message)}ua.value=!1}),ua),(s,e)=>{var t,o;const i=a;return h(),l("div",K,[n(m(H,{songs:ga,"song-id-mapper":c(ha),onCloseSelect:ba},null,8,["songs","song-id-mapper"]),[[r,ya.value]]),n(u("div",Z,[u("img",{src:da.avatar,class:"left"},null,8,Q),u("div",W,[u("h4",X,p(da.name),1),u("div",Y,[0!=(null==(t=da.alias)?void 0:t.length)?(h(),l("p",$," 英文名："+p(null==(o=da.alias)?void 0:o.join("、")),1)):d("",!0),aa]),u("span",sa,"粉丝数："+p(da.score),1),u("div",ea,[m(F,{name:da.isLove?"取消关注":"关注",icon:da.isLove?"":"","icon-style":da.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>c(la).addLove(da,c(la).loveSinger,c(la).loveSingerId,"loveSinger"))},null,8,["name","icon","icon-style"]),m(F,{icon:"",name:"歌手电台"}),ya.value?d("",!0):(h(),v(N,{key:0,"share-to":La,onOpenSelect:_a}))])])],512),[[r,!ya.value]]),n(u("div",ta,[m(P,{active:"hot",onGetActive:Ra},{content:g((()=>[m(i,{label:"精选",name:"hot"},{default:g((()=>[m(V,{songs:ga,"song-id-mapper":c(ha)},null,8,["songs","song-id-mapper"])])),_:1}),m(i,{label:"专辑",name:"album"},{default:g((()=>[m(J,{isLoading:ca.value},null,8,["isLoading"]),m(q,{albums:ja},null,8,["albums"])])),_:1}),m(i,{label:"视频",name:"mv"},{default:g((()=>[m(J,{isLoading:ca.value},null,8,["isLoading"]),m(U,{mvs:fa},null,8,["mvs"])])),_:1}),m(i,{label:"详情",name:"detail"},{default:g((()=>[m(J,{isLoading:ca.value},null,8,["isLoading"]),u("div",oa,[u("p",ia,p(da.briefDesc),1),va.length>0?(h(!0),l(f,{key:0},j(va,(a=>(h(),l(f,{key:a.title},[u("h4",null,p(a.title),1),u("p",null,p(a.content),1)],64)))),128)):d("",!0)])])),_:1})])),_:1})],512),[[r,!ya.value]])])}}}),[["__scopeId","data-v-5469c13f"]]);export{la as default};
