import{g as a,u as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as t,Z as o,c as l,a as i,T as r,U as n,F as c,a7 as m,u as p,O as u,o as d,z as g}from"../@vue/@vue.7ad02ad1.js";import{b as v}from"../vue-router/vue-router.53ff932e.js";import{g as j,a as y,c as f,n as _,f as h,h as L,o as b,k as P,l as k,_ as x}from"../../assets/index-0cefdbff.js";import{_ as C}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.bea6b4d1.js";import{P as w}from"../PlayButton/PlayButton.63362df6.js";import{D as B}from"../DecoratedButton/DecoratedButton.f452dc7a.js";import{N as R}from"../NoSearch/NoSearch.1c821f1c.js";import{T as S}from"../Tab/Tab.8cc6d4ba.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const U={class:"playlist-container scroll-container"},z={class:"header"},D=["src"],E={class:"right"},I={class:"title"},T={class:"creator"},N={class:"creator-name"},O={class:"tag"},A={class:"description"},G={class:"operation"},M=x(e({__name:"PlayListView",setup(e){t((a=>({"346ec782":p(x),"533f8cc6":p(M),"018ae12c":p($)})));const x=j().get("fontColor"),M=j().get("fontBlack"),$=j().get("shadow"),q=y(),F=v().query.id+"",V=o({id:F,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),Z=o([]),H=g("firstLoading"),J=g("hideScroll"),K=()=>{J()};return f((async()=>{try{const a=await _(F),{playlist:{name:s,coverImgUrl:e,description:t,tags:o,creator:l,playCount:i}}=a;V.name=s,V.image=e,V.description=t,V.tag=o,V.creator.avatarUrl=l.avatarUrl,V.creator.nickname=l.nickname,V.playCount=i,q.initLoveStatus(V,q.lovePlaylistId)}catch(a){h(L.ERROR,a.message)}try{const a=await b(F),{songs:s}=a,e=[];s.forEach((a=>{P(e,Z,a)})),q.initLoveMusic(Z),k(e.join(","),Z)}catch(a){h(L.ERROR,a.message)}H.value=!1}),H),(e,t)=>{const o=a,g=s;return d(),l("div",U,[i("div",z,[i("img",{src:V.image,class:"left-image"},null,8,D),i("div",E,[i("p",I,r(V.name),1),i("div",T,[n(o,{src:V.creator.avatarUrl},null,8,["src"]),i("span",N,r(V.creator.nickname),1),i("div",O,[(d(!0),l(c,null,m(V.tag,(a=>(d(),l("span",{key:a},"#"+r(a),1)))),128))])]),i("p",A,r(V.description),1),i("div",G,[n(w,{songs:Z},null,8,["songs"]),n(B,{name:V.isLove?"取消收藏":"收藏",icon:V.isLove?"":"","icon-style":V.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=a=>p(q).addLove(V,p(q).lovePlaylist,p(q).lovePlaylistId,"lovePlaylist")),class:"operate"},null,8,["name","icon","icon-style"])])])]),n(S,{active:"song",class:"playlist-tab",onGetActive:K},{content:u((()=>[n(g,{label:`歌曲 ${Z.length}`,name:"song"},{default:u((()=>[n(C,{songs:Z,isPlaylist:!0},null,8,["songs"])])),_:1},8,["label"]),n(g,{label:`评论 ${Math.floor(+V.playCount%1e3)}`,name:"comment"},{default:u((()=>[n(R)])),_:1},8,["label"])])),_:1})])}}}),[["__scopeId","data-v-f5c67c41"]]);export{M as default};
