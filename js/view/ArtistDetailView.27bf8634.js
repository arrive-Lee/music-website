import{u as a}from"../element-plus/element-plus.f3996937.js";import{G as s,ax as e,d as t,Z as l,c as o,a as i,T as n,R as r,U as m,O as c,u,z as d,o as p,M as v,F as h,a7 as f,ay as g,az as j}from"../@vue/@vue.7ad02ad1.js";import{b}from"../vue-router/vue-router.53ff932e.js";import{g as y,y as R,i as _,j as L,e as E,d as z,z as D,A as k,o as A,B as x,_ as T}from"../../assets/index-107c9b53.js";import{M as B}from"../Mv/Mv.b208f279.js";import{D as M}from"../DecoratedButton/DecoratedButton.033e5b3b.js";import{A as O}from"../Albums/Albums.13a23bf8.js";import{T as w,_ as C}from"../Tab/Tab.7f2d4d35.js";import{L as I}from"../Loading/Loading.2057c2be.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../lodash/lodash.57b1d944.js";import"../nprogress/nprogress.8c6d26c7.js";const U={class:"artist-detail-container scroll-container"},q={class:"header"},G=["src"],N={class:"right"},S={class:"name"},F={class:"info"},V={key:0},Z=(a=>(g("data-v-dd8dacf9"),a=a(),j(),a))((()=>i("p",{class:"job"},"职业：歌手、词曲创作者",-1))),H={class:"fans"},J={class:"content"},K={class:"detail"},P={class:"desc"},Q=T(s({__name:"ArtistDetailView",setup(s){e((a=>({"59a6f1ec":u(g),d6d7fd1a:u(j),"1e2374d4":u(T)})));const g=y().get("fontColor"),j=y().get("fontBlack"),T=y().get("shadow"),Q=b(),W=Q.query.id,X=Q.query.score,Y=t(!1),$=d("firstLoading");$.value=!0;const aa=d("hideScroll"),sa=l({name:W+"",id:"",avatar:"",score:Math.floor(Number.parseInt(X)/1e4)+"万",alias:[]}),ea=l([]),ta=l([]),la=l([]),oa=l([]),ia=a=>{aa(),"mv"==a&&0==la.length?(Y.value=!0,D(W+"").then((a=>{const{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:l,playCount:o}=a;la.push({id:s,name:e,artist:t,image:l,playCount:o})})),Y.value=!1})).catch((a=>{E(z.ERROR,a.message)}))):"album"==a&&0==oa.length?(Y.value=!0,k(W+"").then((a=>{const{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;oa.push({name:e,id:a.id,cover:s,publishTime:A(t),artistId:W+""})})),Y.value=!1})).catch((a=>{E(z.ERROR,a.message)}))):"detail"==a&&0==ea.length&&(Y.value=!0,x(W+"").then((a=>{const{introduction:s}=a;s.forEach((a=>{ea.push({title:a.ti,content:a.txt})})),Y.value=!1})).catch((a=>{E(z.ERROR,a.message)})))};return R(W+"").then((a=>{const{artist:s,hotSongs:e}=a,{name:t,alias:l,picUrl:o,briefDesc:i}=s;sa.name=t,sa.alias=l,sa.avatar=o,sa.briefDesc=i;const n=[];e.forEach((a=>{_(n,ta,a)})),L(n.join(","),ta),$.value=!1})).catch((a=>{E(z.ERROR,a.message)})),(s,e)=>{var t,l;const u=a;return p(),o("div",U,[i("div",q,[i("img",{src:sa.avatar,class:"left"},null,8,G),i("div",N,[i("h4",S,n(sa.name),1),i("div",F,[0!=(null==(t=sa.alias)?void 0:t.length)?(p(),o("p",V," 英文名："+n(null==(l=sa.alias)?void 0:l.join("、")),1)):r("",!0),Z]),i("span",H,"粉丝数："+n(sa.score),1),i("div",null,[m(M,{icon:"󰅵",name:"关注",class:"operate"}),m(M,{icon:"",name:"歌手电台",class:"operate"})])])]),i("div",J,[m(w,{active:"hot",onGetActive:ia},{content:c((()=>[m(u,{label:"精选",name:"hot"},{default:c((()=>[m(C,{songs:ta},null,8,["songs"])])),_:1}),m(u,{label:"专辑",name:"album"},{default:c((()=>[Y.value?(p(),v(I,{key:0,isLoading:Y.value},null,8,["isLoading"])):r("",!0),m(O,{albums:oa},null,8,["albums"])])),_:1}),m(u,{label:"视频",name:"mv"},{default:c((()=>[Y.value?(p(),v(I,{key:0,isLoading:Y.value},null,8,["isLoading"])):r("",!0),m(B,{mvs:la},null,8,["mvs"])])),_:1}),m(u,{label:"详情",name:"detail"},{default:c((()=>[Y.value?(p(),v(I,{key:0,isLoading:Y.value},null,8,["isLoading"])):r("",!0),i("div",K,[i("p",P,n(sa.briefDesc),1),ea.length>0?(p(!0),o(h,{key:0},f(ea,(a=>(p(),o(h,{key:a.title},[i("h4",null,n(a.title),1),i("p",null,n(a.content),1)],64)))),128)):r("",!0)])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-dd8dacf9"]]);export{Q as default};
