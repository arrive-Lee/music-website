import{u as a}from"../element-plus/element-plus.5cae0800.js";import{_ as s,P as e}from"../NoSearch/NoSearch.36c5e9e0.js";import{G as t,ax as o,r as l,Z as i,i as n,c as r,P as m,V as u,U as c,u as p,a as d,T as v,R as g,M as h,O as f,z as j,o as y,F as b,a7 as R,ay as L,az as w}from"../@vue/@vue.59fec093.js";import{b as _}from"../vue-router/vue-router.2f940de9.js";import{g as z,a as B,b as E,Q as O,w as S,e as T,d as x,R as M,S as k,T as C,U as D,x as P,i as A,j as I,s as G,_ as U}from"../../assets/index-c885de52.js";import{M as N}from"../Mv/Mv.95596618.js";import{A as q}from"../Albums/Albums.27e91b6c.js";import{D as F}from"../DecoratedButton/DecoratedButton.86ecbdbc.js";import{M as V}from"../MoreButton/MoreButton.0020d2f1.js";import{T as H}from"../Tab/Tab.5e4df894.js";import{P as K,_ as Q}from"../PlayButton/PlayButton.80a62826.js";import{O as Z}from"../OnlineBatch/OnlineBatch.043664a2.js";import{L as J}from"../Loading/Loading.483dcedc.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const W={class:"artist-detail-container scroll-container"},X={class:"header"},Y=["src"],$={class:"right"},aa={class:"name"},sa={class:"info"},ea={key:0},ta=(a=>(L("data-v-f9003844"),a=a(),w(),a))((()=>d("p",{class:"job"},"职业：歌手、词曲创作者",-1))),oa={class:"fans"},la={class:"header-operation"},ia={class:"content"},na={class:"detail"},ra={class:"desc"},ma=U(t({__name:"ArtistDetailView",setup(t){o((a=>({bc19fbb4:p(L),bc393a7c:p(w),"4f8dd340":p(ua),"2b92949d":p(U),"08f64388":p(ma)})));const L=z().get("fontColor"),w=z().get("fontBlack"),U=z().get("shadow"),ma=z().get("themeColor"),ua=j("fontGray"),ca=B(),pa=_(),da=pa.query.id+"",va=pa.query.score+"",ga=l(!1),ha=j("firstLoading"),fa=j("hideScroll"),ja=i([!1,!1]),ya=i({name:"",score:va,id:da,avatar:"",alias:[]}),ba=i([]),Ra=l(1),La=l(50),wa=i([]),_a=n((()=>wa.slice(Ra.value-1,Ra.value*La.value))),za=n((()=>wa.length)),Ba=a=>{Ra.value=a},Ea=n((()=>new Map(wa.map(((a,s)=>[a.id,s]))))),Oa=i([]),Sa=i([]),Ta=l(!1),xa=a=>{fa(),Ta.value=a},Ma=a=>{fa(),Ta.value=a},ka=()=>{G("我有一个宝藏歌手推荐给你："+ya.name+"，地址：https://www.liyinchao.cloud/#"+pa.fullPath)},Ca=a=>{fa(),"album"==a&&0==Sa.length?E((async()=>{try{const a=await O(da),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;Sa.push({name:e,id:a.id,cover:s,publishTime:S(t),artistId:da+""})}))}catch(a){T(x.ERROR,a.message)}setTimeout((()=>{ja[0]=0==Sa.length,ga.value=!1}),500)}),ga):"mv"==a&&0==Oa.length?E((async()=>{try{const a=await M(da),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:o,playCount:l}=a;Oa.push({id:s,name:e,artist:t,image:o,playCount:l})}))}catch(a){T(x.ERROR,a.message)}setTimeout((()=>{ja[1]=0==Oa.length,ga.value=!1}),500)}),ga):"detail"==a&&0==ba.length&&E((async()=>{try{const a=await k(da),{introduction:s}=a;s.forEach((a=>{ba.push({title:a.ti,content:a.txt})}))}catch(a){T(x.ERROR,a.message)}setTimeout((()=>{ga.value=!1}),500)}),ga)};return E((async()=>{try{const a=await C(da),{artist:s}=a,{name:e,alias:t,picUrl:o,briefDesc:l}=s;ya.name=e,ya.alias=t,ya.avatar=o,ya.briefDesc=l,ca.initLoveStatus(ya,ca.loveSingerId)}catch(a){T(x.ERROR,a.message)}try{const a=await D(da,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await P(e),{songs:o}=t;o.forEach((a=>{A([],wa,a)})),ca.initLoveMusic(wa),I(e,wa)}catch(a){T(x.ERROR,a.message)}ha.value=!1}),ha),(t,o)=>{var l,i;const n=e,j=a;return y(),r("div",W,[m(c(Z,{songs:p(_a),"song-id-mapper":p(Ea),onCloseSelect:xa},null,8,["songs","song-id-mapper"]),[[u,Ta.value]]),m(d("div",X,[d("img",{src:ya.avatar,class:"left"},null,8,Y),d("div",$,[d("h4",aa,v(ya.name),1),d("div",sa,[0!=(null==(l=ya.alias)?void 0:l.length)?(y(),r("p",ea," 英文名："+v(null==(i=ya.alias)?void 0:i.join("、")),1)):g("",!0),ta]),d("span",oa,"粉丝数："+v(ya.score),1),d("div",la,[c(K,{songs:p(_a)},null,8,["songs"]),c(F,{name:ya.isLove?"取消关注":"关注",icon:ya.isLove?"":"","icon-style":ya.isLove?"color:#ff6a6a;":"",onClick:o[0]||(o[0]=a=>p(ca).addLove(ya,p(ca).loveSinger,p(ca).loveSingerId))},null,8,["name","icon","icon-style"]),Ta.value?g("",!0):(y(),h(V,{key:0,"share-to":ka,onOpenSelect:Ma}))])])],512),[[u,!Ta.value]]),m(d("div",ia,[c(H,{active:"hot",onGetActive:Ca},{content:f((()=>[c(j,{label:"精选",name:"hot"},{default:f((()=>[c(Q,{songs:p(_a),"song-id-mapper":p(Ea)},null,8,["songs","song-id-mapper"]),m(c(n,{"cur-page":Ra.value,"page-size":La.value,total:p(za),onPageChange:Ba},null,8,["cur-page","page-size","total"]),[[u,La.value<p(za)]])])),_:1}),c(j,{label:"专辑",name:"album"},{default:f((()=>[m(c(s,{text:"歌手暂无专辑",size:280},null,512),[[u,ja[0]]]),c(J,{isLoading:ga.value},null,8,["isLoading"]),m(c(q,{albums:Sa},null,8,["albums"]),[[u,!ja[0]]])])),_:1}),c(j,{label:"视频",name:"mv"},{default:f((()=>[m(c(s,{text:"歌手暂无视频",size:280},null,512),[[u,ja[1]]]),c(J,{isLoading:ga.value},null,8,["isLoading"]),m(c(N,{mvs:Oa},null,8,["mvs"]),[[u,!ja[1]]])])),_:1}),c(j,{label:"详情",name:"detail"},{default:f((()=>[c(J,{isLoading:ga.value},null,8,["isLoading"]),d("div",na,[d("p",ra,v(ya.briefDesc),1),(y(!0),r(b,null,R(ba,(a=>(y(),r(b,{key:a.title},[d("h4",null,v(a.title),1),d("p",null,v(a.content),1)],64)))),128))])])),_:1})])),_:1})],512),[[u,!Ta.value]])])}}}),[["__scopeId","data-v-f9003844"]]);export{ma as default};
