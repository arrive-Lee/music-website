import{v as e,w as a}from"../element-plus/element-plus.1b7b143d.js";import{G as t,d as l,o as s,c as i,a as o,T as n,F as u,a7 as v,I as c,ay as r,u as p,Z as m,P as d,U as g,V as h,az as j,aA as y,z as f,n as b}from"../@vue/@vue.8ad7c23d.js";import{g as w,_,k,e as C,d as V,S as x}from"../../assets/index-26ab7b85.js";import{M as z}from"../Mv/Mv.747b0640.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.975449d5.js";import"../@element-plus/@element-plus.6a4138c6.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.5e0359dc.js";import"../lodash/lodash.57b1d944.js";import"../vue-router/vue-router.b970196e.js";import"../nprogress/nprogress.8c6d26c7.js";const A={class:"button-group-container"},R={class:"title"},G={class:"type"},E=["onClick"],M=_(t({__name:"ButtonGroup",props:{title:null,activeValue:null,type:null},emits:["getActive"],setup(e,{emit:a}){const t=e;r((e=>({c356da7c:p(m),"1ec8baaa":p(d)})));const m=w().get("fontColor"),d=w().get("boxShadow"),g=l(t.activeValue);return(l,r)=>(s(),i("div",A,[o("h4",R,n(e.title),1),o("div",G,[(s(!0),i(u,null,v(e.type,((e,l)=>(s(),i("button",{onClick:e=>(e=>{g.value=e,a("getActive",e,t.title)})(l),key:e,class:c({"is-active":l==g.value})},n(e),11,E)))),128))])]))}}),[["__scopeId","data-v-67b80a25"]]),S=["infinite-scroll-disabled"],I=(e=>(j("data-v-97e82095"),e=e(),y(),e))((()=>o("h4",{class:"title all"},"全部mv",-1))),B=["element-loading-background","element-loading-spinner"],N=_(t({__name:"VideoView",setup(t){r((e=>({"3d72b6bc":p(n),"24f4df06":p(v),d6c246ec:p(u)})));const n=w().get("fontColor"),u=w().get("boxShadow"),v=w().get("fontBlack"),c=w().get("background"),j=m(["全部","韩国","日本","欧美","港台","内地"]),y=m(["全部","官方版","现场版","网易出品"]),_=m(["上升最快","最新","最热"]),A=l(0),R=l(0),G=l(0),E=m(new Map);let N=m([]),O=m([]);const T=l(100),F=l(30),L=l(!1),P=l(!1),U=f("firstLoading"),Z=f("hideScroll"),q=async(e,a)=>{Z(),F.value=40,N.splice(0),O.splice(0),"地区"==a?A.value=e:"来源"==a?R.value=e:G.value=e,await b();const t=E.get(A.value+""+R.value+G.value);t?(N.push(...t),O.push(...t.slice(0,F.value))):H()},D=()=>{P.value=!0,L.value=!0,setTimeout((()=>{F.value+=10,F.value<T.value?(O.push(...N.slice(O.length,F.value)),P.value=!1,L.value=!1):(T.value*=2,J())}),1e3)},H=()=>{U.value=!0,k(T.value,j[A.value],y[R.value],_[G.value]).then((e=>{const{data:a}=e;a.forEach((e=>{const{id:a,name:t,cover:l,playCount:s,artistName:i}=e;N.push({id:a,name:t,image:l,playCount:s,artist:i})})),E.set(A.value+""+R.value+G.value,[...N]),O.push(...N.slice(0,F.value)),U.value=!1})).catch((e=>{C(V.ERROR,e.message)}))},J=()=>{k(T.value,j[A.value],y[R.value],_[G.value]).then((e=>{const{data:a}=e;a.slice(N.length).forEach((e=>{const{id:a,name:t,cover:l,playCount:s,artistName:i}=e;N.push({id:a,name:t,image:l,playCount:s,artist:i})})),E.set(A.value+""+R.value+G.value,[...N]),O.push(...N.slice(O.length,F.value)),P.value=!1,L.value=!1})).catch((e=>{C(V.ERROR,e.message)}))};return H(),(t,l)=>{const n=e,u=a;return d((s(),i("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":L.value,style:{overflow:"auto"}},[g(M,{onGetActive:q,title:"地区",activeValue:0,type:j},null,8,["type"]),g(M,{onGetActive:q,title:"来源",activeValue:0,type:y},null,8,["type"]),g(M,{onGetActive:q,title:"排序",activeValue:0,type:_},null,8,["type"]),I,g(z,{mvs:p(O)},null,8,["mvs"]),d(o("div",{"element-loading-background":p(c),"element-loading-text":"加载中，请勿继续滚动！","element-loading-spinner":p(x),class:"tip"},null,8,B),[[h,P.value],[n,P.value]])],8,S)),[[u,D]])}}}),[["__scopeId","data-v-97e82095"]]);export{N as default};
