import{g as a,u as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as o,Z as t,i as l,d as i,c as r,P as n,V as c,U as m,u as p,a as u,T as d,F as v,a7 as g,M as j,R as y,O as f,o as h,z as _}from"../@vue/@vue.7ad02ad1.js";import{b}from"../vue-router/vue-router.47595bf3.js";import{g as w,a as B,b as L,l as P,e as k,d as C,m as S,i as x,j as M,s as O,_ as R}from"../../assets/index-2ea1dc3c.js";import{_ as z}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.caaeb116.js";import{P as U}from"../PlayButton/PlayButton.37e50d1e.js";import{D}from"../DecoratedButton/DecoratedButton.f99c924f.js";import{N as E}from"../NoSearch/NoSearch.9fb5ba1e.js";import{T as I}from"../Tab/Tab.558c13db.js";import{M as T}from"../MoreButton/MoreButton.bb798f59.js";import{O as N}from"../OnlineBatch/OnlineBatch.5708f426.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";const A={class:"playlist-container scroll-container"},F={class:"header"},G=["src"],V={class:"right"},$={class:"title"},q={class:"creator"},Z={class:"creator-name"},H={class:"tag"},J={class:"description"},K={class:"header-operation"},Q=R(e({__name:"PlayListView",setup(e){o((a=>({"06deb68c":p(R),"796fdf65":p(Q),"0789debc":p(W)})));const R=w().get("fontColor"),Q=w().get("fontBlack"),W=w().get("shadow"),X=B(),Y=b(),aa=Y.query.id+"",sa=t({id:aa,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),ea=t([]),oa=l((()=>new Map(ea.map(((a,s)=>[a.id,s]))))),ta=_("firstLoading"),la=_("hideScroll"),ia=i(!1),ra=a=>{ia.value=a},na=a=>{la(),ia.value=a},ca=()=>{O("我有一个精品歌单分享给你："+sa.name+"，地址：https://www.liyinchao.cloud/#"+Y.fullPath)},ma=()=>{la()};return L((async()=>{try{const a=await P(aa),{playlist:{name:s,coverImgUrl:e,description:o,tags:t,creator:l,playCount:i}}=a;sa.name=s,sa.image=e,sa.description=o,sa.tag=t,sa.creator.avatarUrl=l.avatarUrl,sa.creator.nickname=l.nickname,sa.playCount=i,X.initLoveStatus(sa,X.lovePlaylistId)}catch(a){k(C.ERROR,a.message)}try{const a=await S(aa),{songs:s}=a,e=[];s.forEach((a=>{x(e,ea,a)})),X.initLoveMusic(ea),M(e.join(","),ea)}catch(a){k(C.ERROR,a.message)}ta.value=!1}),ta),(e,o)=>{const t=a,l=s;return h(),r("div",A,[n(m(N,{"song-id-mapper":p(oa),songs:ea,onCloseSelect:ra},null,8,["song-id-mapper","songs"]),[[c,ia.value]]),n(u("div",F,[u("img",{src:sa.image,class:"left-image"},null,8,G),u("div",V,[u("p",$,d(sa.name),1),u("div",q,[m(t,{src:sa.creator.avatarUrl},null,8,["src"]),u("span",Z,d(sa.creator.nickname),1),u("div",H,[(h(!0),r(v,null,g(sa.tag,(a=>(h(),r("span",{key:a},"#"+d(a),1)))),128))])]),u("p",J,d(sa.description),1),u("div",K,[m(U,{songs:ea},null,8,["songs"]),m(D,{name:sa.isLove?"取消收藏":"收藏",icon:sa.isLove?"":"","icon-style":sa.isLove?"color:#ff6a6a;":"",onClick:o[0]||(o[0]=a=>p(X).addLove(sa,p(X).lovePlaylist,p(X).lovePlaylistId,"lovePlaylist"))},null,8,["name","icon","icon-style"]),ia.value?y("",!0):(h(),j(T,{key:0,"share-to":ca,onOpenSelect:na}))])])],512),[[c,!ia.value]]),n(m(I,{active:"song",class:"playlist-tab",onGetActive:ma},{content:f((()=>[m(l,{label:`歌曲 ${ea.length}`,name:"song"},{default:f((()=>[m(z,{songs:ea,"song-id-mapper":p(oa)},null,8,["songs","song-id-mapper"])])),_:1},8,["label"]),m(l,{label:`评论 ${Math.floor(+sa.playCount%1e3)}`,name:"comment"},{default:f((()=>[m(E)])),_:1},8,["label"])])),_:1},512),[[c,!ia.value]])])}}}),[["__scopeId","data-v-8ba506c2"]]);export{Q as default};
