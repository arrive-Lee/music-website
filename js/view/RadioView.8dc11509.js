import{g as a,w as s}from"../element-plus/element-plus.f7914039.js";import{G as e,ax as i,Z as t,d as o,P as l,c as r,a as n,F as p,a7 as m,U as c,u as d,o as u,M as j,ay as v,az as y,z as h}from"../@vue/@vue.7ad02ad1.js";import{g as f,b as g,T as R,e as b,d as w,U as k,V as C,_ as E}from"../../assets/index-6776fa06.js";import{u as z}from"../vue-router/vue-router.47595bf3.js";import{P as L}from"../PlayList/PlayList.2c71dd27.js";import{L as x}from"../Loading/Loading.9df501c6.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const U=["infinite-scroll-disabled"],_=(a=>(v("data-v-0b436feb"),a=a(),y(),a))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),P={class:"banner"},S=E(e({__name:"RadioView",setup(e){i((a=>({"30e2b7d2":d(v),"5def11a0":d(y)})));const v=f().get("shadow"),y=f().get("fontColor"),E=z(),S=t([]),O=t([]),I=t([]),T=o(0),V=h("firstLoading"),q=h("hideScroll"),A=o(!1),F=o(!1),G=async()=>{const a=await C(O[T.value].id),{djRadios:s}=a;I.push([]),s.forEach((a=>{const{picUrl:s,name:e,id:i,playCount:t}=a;I[T.value].push({name:e,id:i,image:s,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),A.value=!1,F.value=!1},K=()=>{A.value=!0,F.value=!0,T.value++,T.value<O.length?setTimeout((()=>{G()}),1e3):(F.value=!1,b(w.SUCCESS,"已经到达底部！"))};return g((async()=>{try{const a=await R(),{data:s}=a;s.forEach((a=>{const{targetId:s,pic:e}=a;S.push({id:s,pic:e})}))}catch(a){b(w.ERROR,a.message)}try{const a=await k(),{categories:s}=a;s.forEach((a=>{const{id:s,name:e}=a;O.push({id:s,name:e})}))}catch(a){b(w.ERROR,a.message)}try{G()}catch(a){b(w.ERROR,a.message)}V.value=!1}),V),(e,i)=>{const t=a,o=s;return l((u(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":A.value,style:{overflow:"auto"}},[_,n("div",P,[(u(!0),r(p,null,m(S,(a=>(u(),j(t,{key:a.id,src:a.pic,onClick:s=>{return e=a.id,q(),void E.push({name:"playlist",query:{id:e,type:"radio"}});var e}},null,8,["src","onClick"])))),128))]),(u(!0),r(p,null,m(I,((a,s)=>(u(),r("div",{class:"radio",key:O[s].id},[c(L,{title:O[s].name,playlists:a,type:"radio"},null,8,["title","playlists"])])))),128)),c(x,{"is-loading":F.value},null,8,["is-loading"])],8,U)),[[o,K]])}}}),[["__scopeId","data-v-0b436feb"]]);export{S as default};
