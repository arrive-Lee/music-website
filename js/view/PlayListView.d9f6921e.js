import{g as a,u as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as t,Z as o,d as l,c as r,P as i,V as n,U as c,a as m,T as p,F as u,a7 as d,u as v,M as g,R as j,O as y,o as f,z as h}from"../@vue/@vue.7ad02ad1.js";import{b as _}from"../vue-router/vue-router.53ff932e.js";import{g as b,a as B,b as L,l as P,e as k,d as w,m as C,i as S,j as x,s as R,_ as z}from"../../assets/index-436cfb30.js";import{_ as M}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.ad9427ec.js";import{P as O}from"../PlayButton/PlayButton.fe46fe0f.js";import{D as U}from"../DecoratedButton/DecoratedButton.b48bbfae.js";import{N as D}from"../NoSearch/NoSearch.49149f92.js";import{T as E}from"../Tab/Tab.3823af0d.js";import{M as I}from"../MoreButton/MoreButton.5f08b1c6.js";import{_ as T}from"../OnlineBatch/OnlineBatch.8f93b637.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";const N={class:"playlist-container scroll-container"},A={class:"header"},F=["src"],G={class:"right"},V={class:"title"},$={class:"creator"},q={class:"creator-name"},Z={class:"tag"},H={class:"description"},J={class:"header-operation"},K=z(e({__name:"PlayListView",setup(e){t((a=>({e0f65852:v(z),"043d9a68":v(K),e5cf2d82:v(Q)})));const z=b().get("fontColor"),K=b().get("fontBlack"),Q=b().get("shadow"),W=B(),X=_(),Y=X.query.id+"",aa=o({id:Y,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),sa=o([]),ea=h("firstLoading"),ta=h("hideScroll"),oa=l(!1),la=a=>{oa.value=a},ra=a=>{ta(),oa.value=a},ia=()=>{R("我有一个精品歌单分享给你："+aa.name+"，地址：https://www.liyinchao.cloud/#"+X.fullPath)},na=()=>{ta()};return L((async()=>{try{const a=await P(Y),{playlist:{name:s,coverImgUrl:e,description:t,tags:o,creator:l,playCount:r}}=a;aa.name=s,aa.image=e,aa.description=t,aa.tag=o,aa.creator.avatarUrl=l.avatarUrl,aa.creator.nickname=l.nickname,aa.playCount=r,W.initLoveStatus(aa,W.lovePlaylistId)}catch(a){k(w.ERROR,a.message)}try{const a=await C(Y),{songs:s}=a,e=[];s.forEach((a=>{S(e,sa,a)})),W.initLoveMusic(sa),x(e.join(","),sa)}catch(a){k(w.ERROR,a.message)}ea.value=!1}),ea),(e,t)=>{const o=a,l=s;return f(),r("div",N,[i(c(T,{songs:sa,onCloseSelect:la},null,8,["songs"]),[[n,oa.value]]),i(m("div",A,[m("img",{src:aa.image,class:"left-image"},null,8,F),m("div",G,[m("p",V,p(aa.name),1),m("div",$,[c(o,{src:aa.creator.avatarUrl},null,8,["src"]),m("span",q,p(aa.creator.nickname),1),m("div",Z,[(f(!0),r(u,null,d(aa.tag,(a=>(f(),r("span",{key:a},"#"+p(a),1)))),128))])]),m("p",H,p(aa.description),1),m("div",J,[c(O,{songs:sa},null,8,["songs"]),c(U,{name:aa.isLove?"取消收藏":"收藏",icon:aa.isLove?"":"","icon-style":aa.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=a=>v(W).addLove(aa,v(W).lovePlaylist,v(W).lovePlaylistId,"lovePlaylist"))},null,8,["name","icon","icon-style"]),oa.value?j("",!0):(f(),g(I,{key:0,"share-to":ia,onOpenSelect:ra}))])])],512),[[n,!oa.value]]),i(c(E,{active:"song",class:"playlist-tab",onGetActive:na},{content:y((()=>[c(l,{label:`歌曲 ${sa.length}`,name:"song"},{default:y((()=>[c(M,{songs:sa},null,8,["songs"])])),_:1},8,["label"]),c(l,{label:`评论 ${Math.floor(+aa.playCount%1e3)}`,name:"comment"},{default:y((()=>[c(D)])),_:1},8,["label"])])),_:1},512),[[n,!oa.value]])])}}}),[["__scopeId","data-v-09127dcb"]]);export{K as default};
