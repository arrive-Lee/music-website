import{g as a,u as s}from"../element-plus/element-plus.ec47f34a.js";import{G as e,ax as t,d as o,Z as n,i as l,c as r,P as i,V as m,U as c,u as p,a as u,T as g,F as d,a7 as v,M as j,R as y,O as f,z as h,o as _}from"../@vue/@vue.7ad02ad1.js";import{b as k}from"../vue-router/vue-router.47595bf3.js";import{g as b,a as L,b as P,l as R,e as B,d as C,m as w,i as x,j as O,n as S,o as U,C as z,s as E,_ as M}from"../../assets/index-c145966f.js";import{O as I}from"../OnlineBatch/OnlineBatch.80afdb55.js";import{_ as T}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.f26b4a9e.js";import{T as D}from"../Tab/Tab.1f81391c.js";import{P as G}from"../PlayButton/PlayButton.2669c6de.js";import{D as V}from"../DecoratedButton/DecoratedButton.f278dc44.js";import{M as A}from"../MoreButton/MoreButton.2e86418e.js";import{_ as F}from"../NoSearch/NoSearch.b33ea10b.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const N={class:"playlist-container scroll-container"},$={class:"header"},q=["src"],H={class:"right"},Z={class:"title"},J={class:"creator"},K={class:"creator-name"},Q={class:"tag"},W={class:"description"},X={class:"header-operation"},Y=M(e({__name:"PlayListView",setup(e){t((a=>({"4ef011ea":p(M),"4f0f50b2":p(Y),62278982:p(aa),"1fc42dbb":p(sa)})));const M=b().get("fontColor"),Y=b().get("fontBlack"),aa=b().get("shadow"),sa=h("fontGray"),ea=o(!1),ta=L(),oa=k(),na=oa.query.id+"",la=n({id:na,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),ra=n([]),ia=n([]),ma=l((()=>new Map(ra.map(((a,s)=>[a.id,s]))))),ca=h("firstLoading"),pa=h("hideScroll"),ua=o(!1),ga=a=>{ua.value=a},da=a=>{pa(),ua.value=a},va=()=>{E("我有一个精品歌单分享给你："+la.name+"，地址："+{}.VITE_APP_URL+oa.fullPath)},ja=()=>{pa()};return P((async()=>{try{const a=await R(na),{playlist:{name:s,coverImgUrl:e,description:t,tags:o,creator:n,playCount:l}}=a;la.name=s,la.image=e,la.description=t,la.tag=o,la.creator.avatarUrl=n.avatarUrl,la.creator.nickname=n.nickname,la.playCount=l,ta.initLoveStatus(la,ta.lovePlaylistId)}catch(a){B(C.ERROR,a.message)}try{const a=await w(na),{songs:s}=a,e=[];s.forEach((a=>{x(e,ra,a)})),ta.initLoveMusic(ra),O(e.join(","),ra)}catch(a){B(C.ERROR,a.message)}try{const a=await S(na,100),{comments:s,hotComments:e}=a;U(e,ia),U(s,ia),ea.value=0==ia.length}catch(a){B(C.ERROR,a.message)}ca.value=!1}),ca),(e,t)=>{const o=a,n=s;return _(),r("div",N,[i(c(I,{"song-id-mapper":p(ma),songs:ra,onCloseSelect:ga},null,8,["song-id-mapper","songs"]),[[m,ua.value]]),i(u("div",$,[u("img",{src:la.image,class:"left-image"},null,8,q),u("div",H,[u("p",Z,g(la.name),1),u("div",J,[c(o,{src:la.creator.avatarUrl},null,8,["src"]),u("span",K,g(la.creator.nickname),1),u("div",Q,[(_(!0),r(d,null,v(la.tag,(a=>(_(),r("span",{key:a},"#"+g(a),1)))),128))])]),u("p",W,g(la.description),1),u("div",X,[c(G,{songs:ra},null,8,["songs"]),c(V,{name:la.isLove?"取消收藏":"收藏",icon:la.isLove?"":"","icon-style":la.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=a=>p(ta).addLove(la,p(ta).lovePlaylist,p(ta).lovePlaylistId))},null,8,["name","icon","icon-style"]),ua.value?y("",!0):(_(),j(A,{key:0,"share-to":va,onOpenSelect:da}))])])],512),[[m,!ua.value]]),i(c(D,{active:"song",class:"playlist-tab",onGetActive:ja},{content:f((()=>[c(n,{label:`歌曲 ${ra.length}`,name:"song"},{default:f((()=>[c(T,{songs:ra,"song-id-mapper":p(ma)},null,8,["songs","song-id-mapper"])])),_:1},8,["label"]),c(n,{label:`评论 ${ia.length<10?ia.length+10:ia.length}`,name:"comment"},{default:f((()=>[ea.value?(_(),j(F,{key:1,size:280,text:"暂无评论数据"})):(_(),j(z,{key:0,comments:ia},null,8,["comments"]))])),_:1},8,["label"])])),_:1},512),[[m,!ua.value]])])}}}),[["__scopeId","data-v-4f1f038a"]]);export{Y as default};
