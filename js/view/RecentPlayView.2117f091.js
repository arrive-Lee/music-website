import{u as s}from"../element-plus/element-plus.1b7b143d.js";import{G as a,Z as e,d as o,c as t,U as n,O as i,z as l,o as r,a as m,u as p,ay as u,az as c,aA as d}from"../@vue/@vue.8ad7c23d.js";import{g as j,a as v,s as g,D as h,i as f,j as y,e as _,d as b,E as B,_ as z}from"../../assets/index-26ab7b85.js";import{T as R,_ as S}from"../Tab/Tab.783e2233.js";import{P as x}from"../PlayButton/PlayButton.9652400c.js";import{D}from"../DecoratedButton/DecoratedButton.7a8461df.js";import{S as E}from"../SearchButton/SearchButton.79c45d2d.js";import{M as P}from"../Mv/Mv.747b0640.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.975449d5.js";import"../@element-plus/@element-plus.6a4138c6.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.5e0359dc.js";import"../lodash/lodash.57b1d944.js";import"../vue-router/vue-router.b970196e.js";import"../nprogress/nprogress.8c6d26c7.js";const w={class:"recent-container scroll-container"},G={class:"operation"},O=(s=>(c("data-v-a1595a8e"),s=s(),d(),s))((()=>m("p",{class:"tip"},"自动同步该账号下最近一周播放的歌曲",-1))),A=z(a({__name:"RecentPlayView",setup(a){var c;u((s=>({86320880:p(d)})));const d=j().get("fontColor"),z=null==(c=v(g.SESSION,"userInfo"))?void 0:c.uid,A=e([]),C=e([]);let I;const M=o(""),T=l("firstLoading");T.value=!0;const U=l("hideScroll"),$=s=>{I=e([]),M.value=s;const a=A.filter((s=>s.name.includes(M.value)||s.album.includes(M.value)||s.singer.includes(M.value)));I.push(...a)},k=()=>{U()};return h(z).then((s=>{const{weekData:a}=s;if(a){const s=[];a.forEach((a=>{f(s,A,a.song)})),y(s.join(","),A)}T.value=!1})).catch((s=>{_(b.ERROR,s.message)})),B().then((s=>{const{data:{videos:a}}=s;a&&a.forEach((s=>{const{id:a,text:e,coverUrl:o}=s.mlogBaseData;C.push({id:a,name:e,image:o,artist:"",playCount:""})}))})).catch((s=>{_(b.ERROR,s.message)})),(a,e)=>{const o=s;return r(),t("div",w,[n(R,{active:"song",onGetActive:k},{content:i((()=>[n(o,{label:`歌曲 ${A.length}`,name:"song"},{default:i((()=>[m("div",G,[n(x,{songs:A},null,8,["songs"]),n(D,{icon:"󰌄",name:"下载"}),n(D,{icon:"",name:"批量操作"}),n(E,{onGetContent:$})]),n(S,{songs:M.value?p(I):A,isPlaylist:!0,height:"420px"},null,8,["songs"]),O])),_:1},8,["label"]),n(o,{label:`视频 ${C.length}`,name:"video "},{default:i((()=>[n(P,{mvs:C},null,8,["mvs"])])),_:1},8,["label"])])),_:1})])}}}),[["__scopeId","data-v-a1595a8e"]]);export{A as default};
