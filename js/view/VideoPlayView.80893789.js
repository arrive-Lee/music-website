import{G as a,ax as s,i as e,d as t,Z as o,y as i,c as l,a as r,T as n,P as c,V as m,U as p,u,S as d,z as v,o as y,ay as h,az as j}from"../@vue/@vue.7ad02ad1.js";import{b as f}from"../vue-router/vue-router.47595bf3.js";import{u as R,p as g,g as b,a as w,b as C,v as E,e as k,d as O,w as x,x as T,y as z,o as V,z as _,r as I,A as L,B as D,D as N,C as B,s as P,_ as A}from"../../assets/index-a1baacc7.js";import{h as F}from"../hotkeys-js/hotkeys-js.e364e5e1.js";import{s as M}from"../pinia/pinia.07d51cb2.js";import{D as S}from"../DecoratedButton/DecoratedButton.c86a3fec.js";import{M as U}from"../Mv/Mv.37c21fc9.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const Z={class:"video-container scroll-container"},G=["src","poster"],q={class:"detail"},$={class:"title"},H={class:"artist-info"},J={class:"operation"},K={class:"comment-area"},Q={class:"title"},W=(a=>(h("data-v-6bb8ccc0"),a=a(),j(),a))((()=>r("span",{class:"iconfont_1"}," ",-1))),X=A(a({__name:"VideoPlayView",setup(a){s((a=>({"7303f722":u(X),"732335ea":u(Y),"501d96e6":u(aa),14363852:u(sa),b13a3246:u(ea)})));const h=R(),{isPlay:j}=M(h);F("space",(()=>{var a,s,e;j.value&&(j.value=!1),(null==(a=oa.value)?void 0:a.paused)?null==(s=oa.value)||s.play():null==(e=oa.value)||e.pause()}));const A=g(),X=b().get("fontColor"),Y=b().get("fontBlack"),aa=b().get("shadow"),sa=v("fontGray"),ea=e((()=>A.isFullScreen?"650px":"520px")),ta=w(),oa=t(),ia=f(),la=ia.query.id+"",ra=o({id:la,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),na=o([]),ca=v("firstLoading"),ma=o([]),pa=t(!1),ua=()=>{P("我在https://www.liyinchao.cloud/#"+ia.fullPath+"观看"+ra.name+",快来和我一起观看把！")};return C((async()=>{if(/.*[A-Z]+.*/.test(la)){try{const a=await _(la),{data:{title:s,coverUrl:e,publishTime:t,playTime:o,creator:i}}=a;ra.name=s,ra.image=e,ra.playCount=o,ra.publishTime=I(t),ra.artist=i.nickname}catch(a){k(O.ERROR,a.message)}try{const a=await L(la),{urls:s}=a;s?ra.url=s[0].url:k(O.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){k(O.ERROR,a.message)}try{const a=await D(la),{data:s}=a;s.forEach((a=>{const{title:s,coverUrl:e,vid:t,playTime:o,creator:i}=a;na.push({id:t,name:s,image:e,playCount:o,artist:i[0].userName})}))}catch(a){k(O.ERROR,a.message)}try{const a=await N(la,100),{comments:s,hotComments:e}=a;V(e,ma),V(s,ma)}catch(a){k(O.ERROR,a.message)}}else{try{const a=await E(la),{data:{name:s,artistName:e,cover:t,playCount:o,duration:i,publishTime:l}}=a;ra.name=s,ra.image=t,ra.artist=e,ra.playCount=o,ra.time=i,ra.publishTime=l}catch(a){k(O.ERROR,a.message)}try{const a=await x(la),{data:{url:s,fee:e}}=a;s?(ra.url=s,ra.available=e):k(O.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){k(O.ERROR,a.message)}try{const a=await T(la),{mvs:s}=a;s&&s.forEach((a=>{na.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){k(O.ERROR,a.message)}try{const a=await z(la,1e4),{comments:s,hotComments:e}=a;V(e,ma),V(s,ma)}catch(a){k(O.ERROR,a.message)}}ta.addRecord(ra,ta.videoRecord,ta.videoRecordId),ta.initLoveStatus(ra,ta.loveVideoId),ca.value=!1}),ca),i((()=>{F.unbind("space")})),(a,s)=>(y(),l("div",Z,[r("video",{src:ra.url,poster:ra.image,controls:"",ref_key:"video",ref:oa,class:"video-player"},null,8,G),r("div",q,[r("p",$,n(ra.name),1),r("div",H,[r("span",null,n(/.*[A-Z]+.*/.test(la)?"创作者："+ra.artist:"演唱："+ra.artist),1),r("span",null,n(ra.playCount)+"次观看",1),r("span",null,"发布时间："+n(ra.publishTime),1)]),c(r("div",J,[p(S,{name:ra.isLove?"取消收藏":"收藏",icon:ra.isLove?"":"","icon-style":ra.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>u(ta).addLove(ra,u(ta).loveVideo,u(ta).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),p(S,{name:"下载",onClick:s[1]||(s[1]=a=>u(ta).addVideoDownload(ra)),icon:"",class:"operate"}),p(S,{name:"分享",icon:"",onClick:ua,class:"operate"}),p(S,{name:"评论",icon:"",onClick:s[2]||(s[2]=a=>pa.value=!0),class:"operate"})],512),[[m,!pa.value]])]),c(p(U,{mvs:na,title:"相关推荐"},null,8,["mvs"]),[[m,!pa.value]]),c(r("div",K,[r("h4",Q,"全部评论"+n(`(${ma.length})`),1),r("button",{class:"exit",onClick:s[3]||(s[3]=a=>pa.value=!1)},[W,d(" 退出 ")]),p(B,{comments:ma},null,8,["comments"])],512),[[m,pa.value]])]))}}),[["__scopeId","data-v-6bb8ccc0"]]);export{X as default};
