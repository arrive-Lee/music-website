import{g as a}from"../element-plus/element-plus.1ffadbb7.js";import{G as e,ax as s,i as t,r as o,Z as i,y as l,c as n,a as r,U as c,O as m,W as d,T as u,P as p,V as v,u as y,S as h,z as g,o as f,F as j,a7 as R,ay as w,az as C,n as k,aq as b}from"../@vue/@vue.59fec093.js";import{b as x,u as E}from"../vue-router/vue-router.2f940de9.js";import{t as O,g as V,a as T,b as I,B as S,w as q,e as z,d as D,D as L,E as _,F,o as B,G as N,H as G,I as M,J as P,C as U,s as Z,_ as A}from"../../assets/index-933c3f88.js";import{D as H}from"../dplayer/dplayer.6b26f8aa.js";import{D as J}from"../DecoratedButton/DecoratedButton.d972464c.js";import{M as W}from"../Mv/Mv.f8f9a7b3.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const $=a=>(w("data-v-ce6a1aa1"),a=a(),C(),a),K={class:"video-container scroll-container"},Q={class:"players-container"},X={class:"recommend-container"},Y={class:"content"},aa={class:"mask"},ea=["onClick"],sa=$((()=>r("div",{class:"players"},null,-1))),ta={class:"detail"},oa={class:"title"},ia={class:"artist-info"},la={class:"operation"},na={class:"comment-area"},ra={class:"title"},ca=$((()=>r("span",{class:"iconfont_1"}," ",-1))),ma=A(e({__name:"VideoPlayView",setup(e){s((a=>({79642731:y(C),"795487cd":y(A),"0c2e60d5":y(da),"394b611f":y(ua),"0303b9a8":y($),"1fa9bfdd":y(ma)})));const w=O(),C=V().get("fontColor"),A=V().get("fontBlack"),$=V().get("shadow"),ma=V().get("themeColor"),da=g("fontGray"),ua=t((()=>w.isFullScreen?"695px":"555px")),pa=T(),va=o(),ya=x(),ha=E(),ga=ya.query.id+"",fa=i({id:ga,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),ja=i([]),Ra=t((()=>[fa,...ja])),wa=g("firstLoading"),Ca=o(!1),ka=i([]),ba=o(!1),xa=()=>{Z("我在https://www.liyinchao.cloud/#"+ya.fullPath+"观看"+fa.name+",快来和我一起观看把！")};return I((async()=>{if(/.*[A-Z]+.*/.test(ga)){try{const a=await N(ga),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;fa.name=e,fa.image=s,fa.playCount=o,fa.publishTime=q(t),fa.artist=i.nickname}catch(a){z(D.ERROR,a.message)}try{const a=await G(ga),{urls:e}=a;e?fa.url=e[0].url:z(D.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){z(D.ERROR,a.message)}try{const a=await M(ga),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;ja.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){z(D.ERROR,a.message)}try{const a=await P(ga,100),{comments:e,hotComments:s}=a;B(s,ka),B(e,ka)}catch(a){z(D.ERROR,a.message)}}else{try{const a=await S(ga),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;fa.name=e,fa.playCount=o,fa.image=t,fa.artist=s,fa.time=i,fa.publishTime=q(l)}catch(a){z(D.ERROR,a.message)}try{const a=await L(ga),{data:{url:e,fee:s}}=a;e?(fa.url=e,fa.available=s):z(D.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){z(D.ERROR,a.message)}try{const a=await _(ga),{mvs:e}=a;e&&e.forEach((a=>{const{id:e,cover:s,name:t,artistName:o,playCount:i}=a;ja.push({id:e,image:s,name:t,artist:o,playCount:i})}))}catch(a){z(D.ERROR,a.message)}try{const a=await F(ga,1e4),{comments:e,hotComments:s}=a;B(s,ka),B(e,ka)}catch(a){z(D.ERROR,a.message)}}pa.addRecord(fa,pa.videoRecord,pa.videoRecordId),pa.initLoveStatus(fa,pa.loveVideoId),(async()=>{await k(),va.value=new H({container:document.querySelector(".players"),video:{url:fa.url,thumbnails:fa.image,type:"video/mp4",pic:fa.image},autoplay:!1,loop:!1,hotkey:!0,theme:"#1ed2a9",chromecast:!0,lang:"zh-cn",screenshot:!0,preload:"auto",volume:.9,playbackSpeed:[.75,1,1.25,1.5,1.75,2],contextmenu:[{text:"下载",click:()=>{pa.addVideoDownload(fa)}},{text:"收藏",click:()=>{pa.addLove(fa,pa.loveVideo,pa.loveVideoId)}},{text:"分享",click:()=>{xa()}}]}),document.querySelector(".dplayer-video").onended=()=>{Ca.value=!0}})(),wa.value=!1}),wa),l((()=>{var a;document.querySelector(".dplayer-video").onended=null,null==(a=va.value)||a.destroy()})),(e,s)=>{const t=a,o=b("prevent");return f(),n("div",K,[r("div",Q,[c(d,{name:"show"},{default:m((()=>[p(r("div",X,[p(r("h4",null,"相关推荐",512),[[v,y(Ra).length>1]]),r("div",Y,[(f(!0),n(j,null,R(y(Ra),((a,e)=>(f(),n("div",{class:"recommend-video",key:a.id},[c(t,{src:a.image,class:"image"},null,8,["src"]),r("div",aa,[p((f(),n("span",{class:"iconfont play",onClick:s=>((a,e)=>{0==a?(Ca.value=!1,document.querySelector(".dplayer-video").play()):ha.push({name:"video",query:{id:e}})})(e,a.id)},[h("")],8,ea)),[[o]])])])))),128))])],512),[[v,Ca.value]])])),_:1}),sa]),r("div",ta,[r("p",oa,u(fa.name),1),r("div",ia,[r("span",null,u(/.*[A-Z]+.*/.test(ga)?"创作者："+fa.artist:"演唱："+fa.artist),1),r("span",null,u(fa.playCount)+"次观看",1),r("span",null,"发布时间："+u(fa.publishTime),1)]),p(r("div",la,[c(J,{name:fa.isLove?"取消收藏":"收藏",icon:fa.isLove?"":"","icon-style":fa.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>y(pa).addLove(fa,y(pa).loveVideo,y(pa).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),c(J,{name:"下载",onClick:s[1]||(s[1]=a=>y(pa).addVideoDownload(fa)),icon:"",class:"operate"}),c(J,{name:"分享",icon:"",onClick:xa,class:"operate"}),c(J,{name:"评论",icon:"",onClick:s[2]||(s[2]=a=>ba.value=!0),class:"operate"})],512),[[v,!ba.value]])]),p(c(W,{mvs:ja,title:"相关推荐"},null,8,["mvs"]),[[v,!ba.value&&ja.length>0]]),p(r("div",na,[r("h4",ra,"全部评论"+u(`(${ka.length})`),1),r("button",{class:"exit",onClick:s[3]||(s[3]=a=>ba.value=!1)},[ca,h(" 退出 ")]),c(U,{comments:ka},null,8,["comments"])],512),[[v,ba.value]])])}}}),[["__scopeId","data-v-ce6a1aa1"]]);export{ma as default};
