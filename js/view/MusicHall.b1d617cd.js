import{v as s,g as e,w as a}from"../element-plus/element-plus.f3996937.js";import{G as l,ax as o,d as t,Z as i,P as n,c as r,F as c,a7 as u,a as d,u as m,V as p,o as v,T as j,a2 as g,U as h,z as f,ay as y,az as b}from"../@vue/@vue.7ad02ad1.js";import{u as w}from"../vue-router/vue-router.53ff932e.js";import{g as x,b as z,w as k,x as _,k as E,l as I,S as M,_ as R}from"../../assets/index-80ac5bcd.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../lodash/lodash.57b1d944.js";import"../nprogress/nprogress.8c6d26c7.js";const F=["infinite-scroll-disabled"],N={class:"title"},O={class:"content"},S=["onMousedown"],T=(s=>(y("data-v-968cd52e"),s=s(),b(),s))((()=>d("span",{class:"iconfont play"},"",-1))),q=["element-loading-background","element-loading-spinner"],C=R(l({__name:"MusicHall",setup(l){o((s=>({dbcfbdbe:m(b),"4f500189":m(R)})));const y=w(),b=x().get("fontColor"),R=x().get("shadow"),C=x().get("background"),G=t(1),H=t(!1),L=t(!1),P=i([]),U=i([]),V=f("firstLoading"),Z=f("hideScroll"),A=()=>{G.value<P.length?(L.value=!0,H.value=!0,setTimeout((async()=>{await B(P[G.value].id),L.value=!1,H.value=!1,G.value++}),1e3)):(H.value=!0,E(I.INFO,"已达到底部"))};z((async()=>{const s=await k(),{data:e}=s;e.forEach(((s,e)=>{const{tagId:a,tagName:l}=s;P.push({id:a,name:l}),e<G.value&&B(a)})),V.value=!1}),V);const B=s=>{_(s).then((s=>{const{data:{playlist:e}}=s,a=i([]);e.forEach((s=>{const{id:e,name:l,cover:o}=s;a.push({id:e,name:l,cover:o})})),U.push(a)})).catch((s=>{E(I.ERROR,s.message)}))};return(l,o)=>{const t=e,i=s,f=a;return n((v(),r("div",{class:"music-hall-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":H.value,style:{overflow:"auto"}},[(v(!0),r(c,null,u(P.slice(0,G.value),((s,e)=>(v(),r("div",{key:s.id,class:"style-container"},[d("h4",N,j(s.name),1),d("div",O,[(v(!0),r(c,null,u(U[e],(s=>(v(),r("div",{onMousedown:g((e=>{return a=s.id,Z(),void y.push({name:"playlist",query:{id:a+""}});var a}),["prevent"]),key:s.id,class:"style"},[T,h(t,{src:s.cover,lazy:""},null,8,["src"]),d("span",null,j(s.name),1)],40,S)))),128))])])))),128)),n(d("div",{"element-loading-background":m(C),"element-loading-text":"加载中，请勿继续滚动！","element-loading-spinner":m(M),class:"tip"},null,8,q),[[p,L.value],[i,L.value]])],8,F)),[[f,A]])}}}),[["__scopeId","data-v-968cd52e"]]);export{C as default};
