import{s,t as a,g as e}from"../element-plus/element-plus.f7914039.js";import{G as t,ax as i,M as l,O as o,o as n,c as r,a7 as c,a as p,F as m,Z as u,U as d,u as v,z as g,T as f,ay as h,az as y,n as j}from"../@vue/@vue.7ad02ad1.js";import{s as R}from"../pinia/pinia.07d51cb2.js";import{_ as k,g as _,u as b,a as w,b as I,c as C,e as z,d as E,f as O,h as x,i as L,j as M,k as P}from"../../assets/index-bb49ba19.js";import{P as U}from"../PlayList/PlayList.c64e1cd7.js";import{M as F}from"../Mv/Mv.4ad05b75.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.47595bf3.js";import"../nprogress/nprogress.9249ff62.js";const N=["src"],B=k(t({__name:"Carousel",props:{pictures:null,type:null,height:null,position:null},setup:e=>(i((s=>({"3f94e001":e.height}))),(t,i)=>{const u=a,d=s;return n(),l(d,{height:e.height,type:e.type,"indicator-position":e.position,class:"carousel"},{default:o((()=>[(n(!0),r(m,null,c(e.pictures,(s=>(n(),l(u,{key:s},{default:o((()=>[p("img",{src:s.pic},null,8,N)])),_:2},1024)))),128))])),_:1},8,["height","type","indicator-position"])})}),[["__scopeId","data-v-b786cda1"]]),G=s=>(h("data-v-0e7dfc64"),s=s(),y(),s),T={class:"main-container"},A={class:"musiclist"},V=G((()=>p("h4",{class:"title"},"推荐新音乐",-1))),Z={class:"content"},q=["onClick"],D=[G((()=>p("span",{class:"iconfont"},"",-1)))],H={class:"right"},J=k(t({__name:"RecommendView",setup(s){i((s=>({"9c10b6fe":v(a),"9c2ff5c6":v(t),"3b9736f8":v(l),"3f8df985":v(o)})));const a=_().get("fontColor"),t=_().get("fontBlack"),l=_().get("shadow"),o=g("fontGray"),h=b(),{songList:y,current:k,isPlay:N,playProcess:G,playTime:J,songListId:K}=R(h),Q=w(),S=u([]),W=u([]),X=u([]),Y=u([]),$=g("firstLoading");return I((async()=>{try{const s=await C(),{banners:a}=s;a.forEach((s=>{const{imageUrl:a,targetId:e}=s;S.push({id:e,pic:a})}))}catch(s){z(E.ERROR,s.message)}try{const s=await O(10),{playlists:a}=s;a.forEach((s=>{if(W.length<10){const{name:a,id:e,coverImgUrl:t,playCount:i,description:l,tags:o,creator:n}=s;W.push({name:a,id:e,playCount:i,description:l,image:t,tag:o,creator:{avatarUrl:n.avatarUrl,nickname:n.nickname}})}}))}catch(s){z(E.ERROR,s.message)}try{const s=await x(40),{data:{list:a}}=s,e=[];for(let t of a){const{fee:s}=t.data;if(!(X.length<10))break;"0"!=s&&"8"!=s||L(e,X,t.data)}M(e.join(","),X)}catch(s){z(E.ERROR,s.message)}try{const s=await P(10,"内地","全部","最新"),{data:a}=s;a.forEach((s=>{const{id:a,name:e,cover:t,playCount:i,artistName:l}=s;Y.push({id:a,name:e,image:t,playCount:i,artist:l})}))}catch(s){z(E.ERROR,s.message)}$.value=!1}),$),(s,a)=>{const t=e;return n(),r("div",T,[d(B,{pictures:S.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),d(U,{title:"你的歌单补给站",playlists:W},null,8,["playlists"]),p("div",A,[V,p("div",Z,[(n(!0),r(m,null,c(X,(s=>(n(),r("div",{key:s.id,class:"song-recommend"},[p("div",{onClick:a=>(async s=>{if("0"==s.available||"8"==s.available){const a=K.value.get(s.id);null==a?(Q.addRecord(s,Q.songRecord,Q.loveMusicId),0==k.value?(N&&(N.value=!1),G.value=0,J.value=0,y.value.unshift(s),await j(),N.value=!0):(y.value.unshift(s),k.value=0)):k.value!=a?k.value=a:N.value=!0}else"1"==s.available?z(E.INFO,"此歌曲为vip专属"):"10"==s.available&&z(E.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")})(s),class:"mask"},D,8,q),d(t,{src:s.songImage,loading:"lazy",class:"left"},null,8,["src"]),p("div",H,[p("p",null,f(s.name),1),p("p",null,f(s.singer),1)])])))),128))])]),d(F,{title:"最新mv",mvs:Y,class:"mv-list"},null,8,["mvs"])])}}}),[["__scopeId","data-v-0e7dfc64"]]);export{J as default};
