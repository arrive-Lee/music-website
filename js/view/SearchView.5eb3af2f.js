import{u as s}from"../element-plus/element-plus.e3268319.js";import{T as a,_ as e}from"../Tab/Tab.6c9baa6c.js";import{b as t}from"../vue-router/vue-router.f91b6d5b.js";import{n as l,j as o,e as n,d as i,o as r,_ as m}from"../../assets/index-c6c9497e.js";import{P as u}from"../PlayButton/PlayButton.763039eb.js";import{D as c}from"../DecoratedButton/DecoratedButton.658abbfa.js";import{M as p}from"../Mv/Mv.97b22c16.js";import{A as d}from"../Albums/Albums.f17e2c96.js";import{P as g}from"../PlayList/PlayList.5d279afe.js";import{L as h}from"../Loading/Loading.6ff9131b.js";import{S as v}from"../Singer/Singer.f9574e0a.js";import{N as j}from"../NoSearch/NoSearch.6f084a83.js";import{G as f,Z as y,d as b,c as R,U as _,O as k,z as E,o as L,a as S,M as x,R as z}from"../@vue/@vue.69a1071d.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.ea52d298.js";import"../@element-plus/@element-plus.a36f95b2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.294e9718.js";import"../axios/axios.d4208f68.js";import"../lodash/lodash.57b1d944.js";import"../nprogress/nprogress.8c6d26c7.js";const O={class:"search-container scroll-container"},P={class:"song"},U={class:"operation-top"},A={class:"singers"},B=m(f({__name:"SearchView",setup(m){const f=t().query.keyWord,B=y([]),C=b(!1),I=E("firstLoading");I.value=!0;const T=E("hideScroll"),D=y([]),M=y([]),N=y([]),w=y([]);l(1,40,f+"").then((s=>{const{result:{songs:a}}=s;if(a){const s=[];a.forEach((a=>{const{id:e,name:t,artists:l,album:o,fee:n}=a;s.push(e),B.push({id:e,name:t,singer:l.map((s=>s.name)).join(","),songImage:l[0].img1v1Url,album:o.name,available:n,url:"",time:""})})),o(s.join(","),B)}I.value=!1})).catch((s=>{n(i.ERROR,s.message)}));const G=s=>{T(),"video"==s&&0==D.length?(C.value=!0,l(1004,60,f+"").then((s=>{const{result:{mvs:a}}=s;a&&a.forEach((s=>{const{id:a,name:e,cover:t,artistName:l,playCount:o}=s;D.push({id:a,name:e,image:t,artist:l,playCount:o})})),C.value=!1})).catch((s=>{n(i.ERROR,s.message)}))):"album"==s&&0==M.length?(C.value=!0,l(10,60,f+"").then((s=>{const{result:{albums:a}}=s;a&&a.forEach((s=>{const{id:a,name:e,picUrl:t,publishTime:l,artist:o}=s;M.push({id:a,name:e,cover:t,publishTime:r(l),artistId:o.id})})),C.value=!1})).catch((s=>{n(i.ERROR,s.message)}))):"playList"==s&&0==N.length?(C.value=!0,l(1e3,60,f+"").then((s=>{const{result:{playlists:a}}=s;a&&a.forEach((s=>{const{id:a,name:e,coverImgUrl:t,playCount:l}=s;N.push({id:a,name:e,image:t,playCount:l,description:"",tag:[],creator:{nickname:"",avatarUrl:""}})})),C.value=!1})).catch((s=>{n(i.ERROR,s.message)}))):"singer"==s&&0==w.length&&(C.value=!0,l(100,60,f+"").then((s=>{const{result:{artists:a}}=s;a&&a.forEach((s=>{const{id:a,name:e,picUrl:t,accountId:l}=s;w.push({id:a,name:e,avatar:t,score:l})})),C.value=!1})).catch((s=>{n(i.ERROR,s.message)})))};return(t,l)=>{const o=e,n=s;return L(),R("div",O,[_(a,{onGetActive:G,active:"song",class:"search-tab"},{content:k((()=>[_(n,{label:"歌曲",name:"song"},{default:k((()=>[S("div",P,[S("div",U,[_(u,{songs:B},null,8,["songs"]),_(c,{name:"下载",icon:"󰌄"}),_(c,{name:"批量操作",icon:""})]),_(o,{songs:B,height:"440px"},null,8,["songs"])])])),_:1}),_(n,{label:"视频",name:"video"},{default:k((()=>[C.value?(L(),x(h,{key:0,"is-loading":C.value},null,8,["is-loading"])):z("",!0),0==D.length?(L(),x(j,{key:1})):z("",!0),_(p,{mvs:D},null,8,["mvs"])])),_:1}),_(n,{label:"专辑",name:"album"},{default:k((()=>[C.value?(L(),x(h,{key:0,"is-loading":C.value},null,8,["is-loading"])):z("",!0),0==M.length?(L(),x(j,{key:1})):z("",!0),_(d,{albums:M},null,8,["albums"])])),_:1}),_(n,{label:"歌单",name:"playList"},{default:k((()=>[C.value?(L(),x(h,{key:0,"is-loading":C.value},null,8,["is-loading"])):z("",!0),0==N.length?(L(),x(j,{key:1})):z("",!0),_(g,{playlists:N,title:""},null,8,["playlists"])])),_:1}),_(n,{label:"歌手",name:"singer"},{default:k((()=>[0==w.length?(L(),x(j,{key:0})):z("",!0),S("div",A,[_(v,{"singer-list":w},null,8,["singer-list"])])])),_:1}),_(n,{label:"歌词",name:"songWord"},{default:k((()=>[0==D.length?(L(),x(j,{key:0})):z("",!0)])),_:1}),_(n,{label:"用户",name:"user"},{default:k((()=>[0==D.length?(L(),x(j,{key:0})):z("",!0)])),_:1})])),_:1})])}}}),[["__scopeId","data-v-6c49c5fa"]]);export{B as default};
