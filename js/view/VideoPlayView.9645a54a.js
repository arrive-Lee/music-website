import{G as a,ax as e,i as s,d as t,Z as o,c as i,a as l,T as n,P as r,V as c,U as m,u as p,S as d,z as u,o as v,ay as y,az as h,n as j}from"../@vue/@vue.7ad02ad1.js";import{b as f}from"../vue-router/vue-router.47595bf3.js";import{p as R,g,a as w,b as C,v as k,e as b,d as x,w as E,x as V,y as O,o as T,z as _,r as z,A as I,B as L,D,C as A,s as N,_ as P}from"../../assets/index-c145966f.js";import{D as B}from"../DecoratedButton/DecoratedButton.f278dc44.js";import{M as F}from"../Mv/Mv.82e7a11d.js";import{D as S}from"../dplayer/dplayer.6b26f8aa.js";import"../element-plus/element-plus.ec47f34a.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const U={class:"video-container scroll-container"},M={class:"players-container"},Z={class:"detail"},G={class:"title"},q={class:"artist-info"},$={class:"operation"},H={class:"comment-area"},J={class:"title"},K=(a=>(y("data-v-aac94ef6"),a=a(),h(),a))((()=>l("span",{class:"iconfont_1"}," ",-1))),Q=P(a({__name:"VideoPlayView",setup(a){e((a=>({"6ae97ca7":p(h),"6ad9dd43":p(P),"668d849f":p(W),"425d9dd6":p(X),"16ede1c4":p(Q)})));const y=R(),h=g().get("fontColor"),P=g().get("fontBlack"),Q=g().get("shadow"),W=u("fontGray"),X=s((()=>y.isFullScreen?"650px":"520px")),Y=w(),aa=t(),ea=t(),sa=f(),ta=sa.query.id+"",oa=o({id:ta,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),ia=o([]),la=u("firstLoading"),na=o([]),ra=t(!1),ca=()=>{N("我在"+{}.VITE_APP_URL+sa.fullPath+"观看"+oa.name+",快来和我一起观看把！")};return C((async()=>{if(/.*[A-Z]+.*/.test(ta)){try{const a=await _(ta),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;oa.name=e,oa.image=s,oa.playCount=o,oa.publishTime=z(t),oa.artist=i.nickname}catch(a){b(x.ERROR,a.message)}try{const a=await I(ta),{urls:e}=a;e?oa.url=e[0].url:b(x.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){b(x.ERROR,a.message)}try{const a=await L(ta),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;ia.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){b(x.ERROR,a.message)}try{const a=await D(ta,100),{comments:e,hotComments:s}=a;T(s,na),T(e,na)}catch(a){b(x.ERROR,a.message)}}else{try{const a=await k(ta),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;oa.name=e,oa.image=t,oa.artist=s,oa.playCount=o,oa.time=i,oa.publishTime=l}catch(a){b(x.ERROR,a.message)}try{const a=await E(ta),{data:{url:e,fee:s}}=a;e?(oa.url=e,oa.available=s):b(x.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){b(x.ERROR,a.message)}try{const a=await V(ta),{mvs:e}=a;e&&e.forEach((a=>{ia.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){b(x.ERROR,a.message)}try{const a=await O(ta,1e4),{comments:e,hotComments:s}=a;T(s,na),T(e,na)}catch(a){b(x.ERROR,a.message)}}Y.addRecord(oa,Y.videoRecord,Y.videoRecordId),Y.initLoveStatus(oa,Y.loveVideoId),(async()=>{await j(),ea.value=new S({container:aa.value,video:{url:oa.url,thumbnails:oa.image,type:"video/mp4",pic:oa.image},autoplay:!1,loop:!0,hotkey:!0,theme:"#1ed2a9",chromecast:!0,lang:"zh-cn",screenshot:!0,preload:"auto",volume:.9,playbackSpeed:[.75,1,1.25,1.5,1.75,2],contextmenu:[{text:"下载",click:()=>{Y.addVideoDownload(oa)}},{text:"收藏",click:()=>{Y.addLove(oa,Y.loveVideo,Y.loveVideoId)}},{text:"分享",click:()=>{ca()}}]})})(),la.value=!1}),la),(a,e)=>(v(),i("div",U,[l("div",M,[l("div",{ref_key:"video",ref:aa,class:"players"},null,512)]),l("div",Z,[l("p",G,n(oa.name),1),l("div",q,[l("span",null,n(/.*[A-Z]+.*/.test(ta)?"创作者："+oa.artist:"演唱："+oa.artist),1),l("span",null,n(oa.playCount)+"次观看",1),l("span",null,"发布时间："+n(oa.publishTime),1)]),r(l("div",$,[m(B,{name:oa.isLove?"取消收藏":"收藏",icon:oa.isLove?"":"","icon-style":oa.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>p(Y).addLove(oa,p(Y).loveVideo,p(Y).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),m(B,{name:"下载",onClick:e[1]||(e[1]=a=>p(Y).addVideoDownload(oa)),icon:"",class:"operate"}),m(B,{name:"分享",icon:"",onClick:ca,class:"operate"}),m(B,{name:"评论",icon:"",onClick:e[2]||(e[2]=a=>ra.value=!0),class:"operate"})],512),[[c,!ra.value]])]),r(m(F,{mvs:ia,title:"相关推荐"},null,8,["mvs"]),[[c,!ra.value]]),r(l("div",H,[l("h4",J,"全部评论"+n(`(${na.length})`),1),l("button",{class:"exit",onClick:e[3]||(e[3]=a=>ra.value=!1)},[K,d(" 退出 ")]),m(A,{comments:na},null,8,["comments"])],512),[[c,ra.value]])]))}}),[["__scopeId","data-v-aac94ef6"]]);export{Q as default};
