import{u as e}from"../element-plus/element-plus.372e8740.js";import{G as s,i as l,d as a,Z as o,c as t,a as i,U as n,O as u,o as r,P as m,V as v,u as p,z as c,n as d}from"../@vue/@vue.7ad02ad1.js";import{a as g,u as f,c as j,l as h,f as S,h as y,e as _,s as L,_ as C}from"../../assets/index-aba7f600.js";import{s as b}from"../pinia/pinia.07d51cb2.js";import{T as A}from"../Tab/Tab.358c1c9c.js";import{P as D}from"../PlayButton/PlayButton.814eb13b.js";import{D as w}from"../DecoratedButton/DecoratedButton.95a3f5e5.js";import{_ as x}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.dbf25251.js";import{S as P}from"../SearchButton/SearchButton.35cc32cb.js";import{M as G}from"../Mv/Mv.f9d0f3d8.js";import{S as I}from"../Singer/Singer.0077b7c8.js";import{A as O}from"../Albums/Albums.e551d3ee.js";import{P as E}from"../PlayList/PlayList.b0d184f2.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";const k={class:"love-container common-container"},B={class:"top-operation"},z={class:"top-operation operation-select"},N={class:"singers"},M=C(s({__name:"LoveView",setup(s){const C=g(),{loveSongs:M,loveVideo:T,loveSinger:U,lovePlaylist:V,loveAlbum:F}=b(C),H=f(),{isPlay:Z,songList:q,songListId:J,playProcess:K,playTime:Q,current:R}=b(H),W=l((()=>M.value.filter((e=>e.name.includes(X.value)||e.album.includes(X.value)||e.singer.includes(X.value))))),X=a(""),Y=c("firstLoading"),$=c("hideScroll"),ee=()=>{$()},se=a(!1);let le=o([]);const ae=e=>{le=o([]),le.push(...e)},oe=async()=>{le.length>0?(Z.value=!1,K.value=0,Q.value=0,await d(),le.forEach((e=>{null==J.value.get(e.id)&&q.value.unshift(e)})),R.value=J.value.get(le[0].id),Z.value=!0,S(y.SUCCESS,"已添加到播放列表！")):S(y.INFO,"请添加歌曲！")},te=()=>{if(le.length>0){const e=le.map((e=>e.id)),s=M.value.filter((s=>!e.includes(s.id)));e.map((e=>J.value.get(e))).forEach((e=>{null!=e&&(q.value[e].isLove=!1)})),M.value.splice(0),M.value.push(...s),_(L.LOCAL,"loveSongs",M.value),S(y.SUCCESS,"已清除选中的歌曲！")}else S(y.INFO,"请添加歌曲")},ie=()=>{le.forEach((e=>{C.addMuiscDownload(e)}))},ne=()=>{M.value.map((e=>e.id)).forEach((e=>{const s=J.value.get(e);null!=s&&(q.value[s].isLove=!1)})),M.value.splice(0),_(L.LOCAL,"loveSongs",M.value),S(y.SUCCESS,"已全部清除喜欢的歌曲！")},ue=e=>{X.value=e},re=e=>{T.value.splice(e,1),_(L.LOCAL,"loveVideo",T.value)},me=e=>{F.value.splice(e,1),_(L.LOCAL,"loveAlbum",F.value)},ve=e=>{U.value.splice(e,1),_(L.LOCAL,"loveSinger",U.value)},pe=e=>{V.value.splice(e,1),_(L.LOCAL,"lovePlaylist",V.value)};return j((async()=>{const e=M.value.map((e=>e.id)).join(",");h(e,M.value),Y.value=!1}),Y),(s,l)=>{const a=e;return r(),t("div",null,[i("div",k,[n(A,{active:"song",onGetActive:ee},{content:u((()=>[n(a,{label:"歌曲",name:"song"},{default:u((()=>[m(i("div",B,[n(D,{songs:p(M)},null,8,["songs"]),n(w,{icon:"",onClick:ne,name:"取消全部收藏"}),n(w,{icon:"",name:"批量操作",onClick:l[0]||(l[0]=e=>se.value=!se.value)}),n(P,{onGetContent:ue})],512),[[v,!se.value]]),m(i("div",z,[n(w,{icon:"",name:"播放",class:"play",onClick:oe}),n(w,{icon:"",name:"删除",onClick:te}),n(w,{icon:"󰌄",onClick:ie,name:"下载"}),n(w,{icon:"",name:"取消操作",onClick:l[1]||(l[1]=e=>se.value=!se.value)})],512),[[v,se.value]]),n(x,{songs:p(W),showSelect:se.value,onGetSelectItems:ae,height:"440px"},null,8,["songs","showSelect"])])),_:1}),n(a,{label:"视频",name:"video"},{default:u((()=>[n(G,{mvs:p(T),transitionName:"list",showDelete:!0,onGetDeleteIndex:re},null,8,["mvs"])])),_:1}),n(a,{label:"歌单",name:"playlist"},{default:u((()=>[n(E,{playlists:p(V),transitionName:"list",showDelete:!0,onGetDeleteIndex:pe},null,8,["playlists"])])),_:1}),n(a,{label:"歌手",name:"singer"},{default:u((()=>[i("div",N,[n(I,{"singer-list":p(U),transitionName:"list",showDelete:!0,"show-all-avatar":!1,onGetDeleteIndex:ve},null,8,["singer-list"])])])),_:1}),n(a,{label:"专辑",name:"album"},{default:u((()=>[n(O,{albums:p(F),transitionName:"list",showDelete:!0,onGetDeleteIndex:me},null,8,["albums"])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-9edd2bf1"]]);export{M as default};
