import{G as a,ax as s,Z as e,d as t,c as o,a as i,T as l,P as r,V as n,U as c,u as m,S as p,z as u,o as d,ay as v,az as h}from"../@vue/@vue.7ad02ad1.js";import{b as y}from"../vue-router/vue-router.47595bf3.js";import{g as R,a as f,b as j,v as g,e as w,d as C,w as b,x as E,y as O,o as T,z as k,r as x,A as z,B as V,D,C as I,s as L,_}from"../../assets/index-428da170.js";import{D as N}from"../DecoratedButton/DecoratedButton.e99d007c.js";import{M as B}from"../Mv/Mv.c9e526b9.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const A={class:"video-container scroll-container"},M=["src"],P={class:"detail"},U={class:"title"},Z={class:"artist-info"},F={class:"operation"},G={class:"comment-area"},S={class:"title"},q=(a=>(v("data-v-5ac06afc"),a=a(),h(),a))((()=>i("span",{class:"iconfont_1"}," ",-1))),$=_(a({__name:"VideoPlayView",setup(a){s((a=>({"4c1397dd":m(v),"4c03f879":m(h),"5499ab58":m(_),"0ab82aa9":m($)})));const v=R().get("fontColor"),h=R().get("fontBlack"),_=R().get("shadow"),$=u("fontGray"),H=f(),J=y(),K=J.query.id+"",Q=e({id:K,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),W=e([]),X=u("firstLoading"),Y=e([]),aa=t(!1),sa=()=>{L("我在https://www.liyinchao.cloud/#"+J.fullPath+"观看"+Q.name+",快来和我一起观看把！")};return j((async()=>{if(/.*[A-Z]+.*/.test(K)){try{const a=await k(K),{data:{title:s,coverUrl:e,publishTime:t,playTime:o,creator:i}}=a;Q.name=s,Q.image=e,Q.playCount=o,Q.publishTime=x(t),Q.artist=i.nickname}catch(a){w(C.ERROR,a.message)}try{const a=await z(K),{urls:s}=a;s?Q.url=s[0].url:w(C.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){w(C.ERROR,a.message)}try{const a=await V(K),{data:s}=a;s.forEach((a=>{const{title:s,coverUrl:e,vid:t,playTime:o,creator:i}=a;W.push({id:t,name:s,image:e,playCount:o,artist:i[0].userName})}))}catch(a){w(C.ERROR,a.message)}try{const a=await D(K,100),{comments:s,hotComments:e}=a;T(e,Y),T(s,Y)}catch(a){w(C.ERROR,a.message)}}else{try{const a=await g(K),{data:{name:s,artistName:e,cover:t,playCount:o,duration:i,publishTime:l}}=a;Q.name=s,Q.image=t,Q.artist=e,Q.playCount=o,Q.time=i,Q.publishTime=l}catch(a){w(C.ERROR,a.message)}try{const a=await b(K),{data:{url:s,fee:e}}=a;s?(Q.url=s,Q.available=e):w(C.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){w(C.ERROR,a.message)}try{const a=await E(K),{mvs:s}=a;s&&s.forEach((a=>{W.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){w(C.ERROR,a.message)}try{const a=await O(K,1e4),{comments:s,hotComments:e}=a;T(e,Y),T(s,Y)}catch(a){w(C.ERROR,a.message)}}H.addRecord(Q,H.videoRecord,H.videoRecordId),H.initLoveStatus(Q,H.loveVideoId),X.value=!1}),X),(a,s)=>(d(),o("div",A,[i("video",{src:Q.url,controls:"",ref:"video",class:"video-player"},null,8,M),i("div",P,[i("p",U,l(Q.name),1),i("div",Z,[i("span",null,l(/.*[A-Z]+.*/.test(K)?"创作者："+Q.artist:"演唱："+Q.artist),1),i("span",null,l(Q.playCount)+"次观看",1),i("span",null,"发布时间："+l(Q.publishTime),1)]),r(i("div",F,[c(N,{name:Q.isLove?"取消收藏":"收藏",icon:Q.isLove?"":"","icon-style":Q.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>m(H).addLove(Q,m(H).loveVideo,m(H).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),c(N,{name:"下载",onClick:s[1]||(s[1]=a=>m(H).addVideoDownload(Q)),icon:"",class:"operate"}),c(N,{name:"分享",icon:"",onClick:sa,class:"operate"}),c(N,{name:"评论",icon:"",onClick:s[2]||(s[2]=a=>aa.value=!0),class:"operate"})],512),[[n,!aa.value]])]),r(c(B,{mvs:W,title:"相关推荐"},null,8,["mvs"]),[[n,!aa.value]]),r(i("div",G,[i("h4",S,"全部评论"+l(`(${Y.length})`),1),i("button",{class:"exit",onClick:s[3]||(s[3]=a=>aa.value=!1)},[q,p(" 退出 ")]),c(I,{comments:Y},null,8,["comments"])],512),[[n,aa.value]])]))}}),[["__scopeId","data-v-5ac06afc"]]);export{$ as default};
