import{G as a,ax as e,Z as s,d as t,c as o,a as i,T as l,P as r,V as n,U as m,u as c,o as p,z as u}from"../@vue/@vue.7ad02ad1.js";import{b as d}from"../vue-router/vue-router.47595bf3.js";import{g as v,a as h,b as y,w as R,e as j,d as f,x as g,y as C,z as w,o as b,A as E,q as O,B as T,C as k,D as V,s as x,_ as z}from"../../assets/index-18827e65.js";import{D}from"../DecoratedButton/DecoratedButton.06e12d65.js";import{M as I}from"../Mv/Mv.9944bf12.js";import{C as L}from"../Comment/Comment.65190aad.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const N={class:"video-container common-container"},_=["src"],B={class:"detail"},A={class:"title"},F={class:"artist-info"},M={class:"operation"},P={class:"comment-area"},U={class:"title"},Z=z(a({__name:"VideoPlayView",setup(a){e((a=>({"7237ab5b":c(z),"780e5538":c(Z),b868427a:c(q)})));const z=v().get("fontColor"),Z=v().get("fontBlack"),q=v().get("shadow"),G=h(),S=d(),$=S.query.id+"",H=s({id:$,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),J=s([]),K=u("firstLoading"),Q=s([]),W=t(!1),X=()=>{x("我在https://www.liyinchao.cloud/#"+S.fullPath+"观看"+H.name+",快来和我一起观看把！")};return y((async()=>{if(/.*[A-Z]+.*/.test($)){try{const a=await E($),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;H.name=e,H.image=s,H.playCount=o,H.publishTime=O(t),H.artist=i.nickname}catch(a){j(f.ERROR,a.message)}try{const a=await T($),{urls:e}=a;e?H.url=e[0].url:j(f.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){j(f.ERROR,a.message)}try{const a=await k($),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;J.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){j(f.ERROR,a.message)}try{const a=await V($,1e4),{comments:e,hotComments:s}=a;b(s,Q),b(e,Q)}catch(a){j(f.ERROR,a.message)}}else{try{const a=await R($),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;H.name=e,H.image=t,H.artist=s,H.playCount=o,H.time=i,H.publishTime=l}catch(a){j(f.ERROR,a.message)}try{const a=await g($),{data:{url:e,fee:s}}=a;e?(H.url=e,H.available=s):j(f.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){j(f.ERROR,a.message)}try{const a=await C($),{mvs:e}=a;e&&e.forEach((a=>{J.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){j(f.ERROR,a.message)}try{const a=await w($,1e4),{comments:e,hotComments:s}=a;b(s,Q),b(e,Q)}catch(a){j(f.ERROR,a.message)}}G.addRecord(H,G.videoRecord,G.videoRecordId,"videoRecord"),G.initLoveStatus(H,G.loveVideoId),K.value=!1}),K),(a,e)=>(p(),o("div",N,[i("video",{src:H.url,controls:"",ref:"video",class:"video-player"},null,8,_),i("div",B,[i("p",A,l(H.name),1),i("div",F,[i("span",null,l(/.*[A-Z]+.*/.test($)?"创作者："+H.artist:"演唱："+H.artist),1),i("span",null,l(H.playCount)+"次观看",1),i("span",null,"发布时间："+l(H.publishTime),1)]),r(i("div",M,[m(D,{name:H.isLove?"取消收藏":"收藏",icon:H.isLove?"":"","icon-style":H.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>c(G).addLove(H,c(G).loveVideo,c(G).loveVideoId,"loveVideo")),class:"operate"},null,8,["name","icon","icon-style"]),m(D,{name:"下载",onClick:e[1]||(e[1]=a=>c(G).addVideoDownload(H)),icon:"",class:"operate"}),m(D,{name:"分享",icon:"",onClick:X,class:"operate"}),m(D,{name:"评论",icon:"",onClick:e[2]||(e[2]=a=>W.value=!0),class:"operate"})],512),[[n,!W.value]])]),r(m(I,{mvs:J,title:"相关推荐"},null,8,["mvs"]),[[n,!W.value]]),r(i("div",P,[i("h4",U,"全部评论"+l(`(${Q.length})`),1),i("button",{class:"exit",onClick:e[3]||(e[3]=a=>W.value=!1)}," 退出 "),m(L,{comments:Q},null,8,["comments"])],512),[[n,W.value]])]))}}),[["__scopeId","data-v-0404fd5a"]]);export{Z as default};
