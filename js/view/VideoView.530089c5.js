import{w as e}from"../element-plus/element-plus.372e8740.js";import{G as a,ax as s,Z as t,d as l,i as o,P as i,c as u,U as n,u as r,a as v,S as c,V as p,z as m,o as d,ay as h,az as j,n as f}from"../@vue/@vue.7ad02ad1.js";import{g,b as y,k as w,e as C,d as G,_ as S}from"../../assets/index-438c1617.js";import{M as b}from"../Mv/Mv.e949dab7.js";import{B as z}from"../ButtonGroup/ButtonGroup.baf734d1.js";import{S as B}from"../SearchButton/SearchButton.bbcb3085.js";import{L as R}from"../Loading/Loading.11a8dbb6.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.47595bf3.js";import"../nprogress/nprogress.8c6d26c7.js";const V=e=>(h("data-v-45a31485"),e=e(),j(),e),k=["infinite-scroll-disabled"],x=V((()=>v("h4",{class:"title video-choice"},"视频类型",-1))),E=V((()=>v("h4",{class:"title all"},"全部视频",-1))),L=V((()=>v("span",{class:"iconfont"},"",-1))),M=S(a({__name:"VideoView",setup(a){s((e=>({"7f267b6b":r(h),"7f16dc07":r(S),"39d8c54a":r(V),"08c60de2":r(j)})));const h=g().get("fontColor"),j=g().get("shadow"),S=g().get("fontBlack"),V=m("fontGray"),M=t(["全部","韩国","日本","欧美","港台","内地"]),_=t(["全部","官方版","现场版","网易出品"]),A=t(["上升最快","最新","最热"]),N=l(0),O=l(0),U=l(0),I=t(new Map),J=t(new Map);let K=t([]),P=t([]);const T=l(1500),Z=l(30),q=l(!1),D=l(!1),F=m("firstLoading"),H=m("hideScroll"),Q=l(!1),W=o((()=>P.filter((e=>e.name.includes(X.value)||e.artist.includes(X.value))))),X=l(""),Y=e=>{X.value=e},$=async(e,a)=>{J.set(N.value+""+O.value+U.value,T.value),H(),K.splice(0),P.splice(0),"视频地区"==a?N.value=e:"视频来源"==a?O.value=e:U.value=e,Z.value=40;const s=J.get(N.value+""+O.value+U.value);T.value=s||1500,await f();const t=I.get(N.value+""+O.value+U.value);t?(K.push(...t),P.push(...t.slice(0,Z.value))):se()},ee=()=>{X.value||(q.value=!0,Z.value+=10,Z.value<K.length?setTimeout((()=>{P.push(...K.slice(P.length,Z.value)),q.value=!1}),100):T.value==K.length?(T.value*=2,Q.value=!0):(P.push(...K.slice(P.length)),C(G.SUCCESS,"已经到达底部！")))},ae=()=>{Q.value=!1,y((async()=>{try{const e=await w(T.value,M[N.value],_[O.value],A[U.value]),{data:a}=e;a.slice(K.length).forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:o}=e;K.push({id:a,name:s,image:t,playCount:l,artist:o})})),I.set(N.value+""+O.value+U.value,[...K]),P.push(...K.slice(P.length,Z.value))}catch(e){C(G.ERROR,e.message)}D.value=!1,q.value=!1}),D)},se=()=>{y((async()=>{try{const e=await w(T.value,M[N.value],_[O.value],A[U.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:s,cover:t,playCount:l,artistName:o}=e;K.push({id:a,name:s,image:t,playCount:l,artist:o})})),I.set(N.value+""+O.value+U.value,[...K]),P.push(...K.slice(0,Z.value))}catch(e){C(G.ERROR,e.message)}F.value=!1}),F)};return se(),(a,s)=>{const t=e;return i((d(),u("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":q.value,style:{overflow:"auto"}},[n(B,{onGetContent:Y}),x,n(z,{onGetActive:$,title:"视频地区",activeValue:0,"show-title":!1,type:M,class:"area"},null,8,["type"]),n(z,{onGetActive:$,title:"视频来源",activeValue:0,"show-title":!1,type:_},null,8,["type"]),n(z,{onGetActive:$,title:"视频排序","show-title":!1,activeValue:0,type:A},null,8,["type"]),E,n(b,{mvs:r(W)},null,8,["mvs"]),n(R,{"is-loading":D.value},null,8,["is-loading"]),i(v("button",{class:"more-video",onClick:ae},[c(" 更多精彩视频"),L],512),[[p,Q.value]])],8,k)),[[t,ee]])}}}),[["__scopeId","data-v-45a31485"]]);export{M as default};
