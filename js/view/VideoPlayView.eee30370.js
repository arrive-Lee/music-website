import{G as a,ax as s,i as e,d as t,Z as o,y as i,c as l,a as r,T as n,P as m,V as c,U as p,u,S as d,z as v,o as y,ay as h,az as j}from"../@vue/@vue.7ad02ad1.js";import{b as R}from"../vue-router/vue-router.47595bf3.js";import{p as f,g,a as b,b as w,v as C,e as E,d as k,w as O,x,y as T,o as z,z as V,r as _,A as I,B as L,D,C as N,s as B,_ as A}from"../../assets/index-3ee13454.js";import{D as F}from"../DecoratedButton/DecoratedButton.f06a7c1e.js";import{M}from"../Mv/Mv.b0d85a1f.js";import{h as P}from"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const S={class:"video-container scroll-container"},U=["src","poster"],Z={class:"detail"},G={class:"title"},q={class:"artist-info"},$={class:"operation"},H={class:"comment-area"},J={class:"title"},K=(a=>(h("data-v-147b5b69"),a=a(),j(),a))((()=>r("span",{class:"iconfont_1"}," ",-1))),Q=A(a({__name:"VideoPlayView",setup(a){s((a=>({"28a3c920":u(j),"289429bc":u(A),"9b7948d2":u(Q),"2ee975f4":u(W),"172a434e":u(X)}))),P("space",(()=>{var a,s,e;(null==(a=aa.value)?void 0:a.paused)?null==(s=aa.value)||s.play():null==(e=aa.value)||e.pause()}));const h=f(),j=g().get("fontColor"),A=g().get("fontBlack"),Q=g().get("shadow"),W=v("fontGray"),X=e((()=>h.isFullScreen?"650px":"520px")),Y=b(),aa=t(),sa=R(),ea=sa.query.id+"",ta=o({id:ea,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),oa=o([]),ia=v("firstLoading"),la=o([]),ra=t(!1),na=()=>{B("我在https://www.liyinchao.cloud/#"+sa.fullPath+"观看"+ta.name+",快来和我一起观看把！")};return w((async()=>{if(/.*[A-Z]+.*/.test(ea)){try{const a=await V(ea),{data:{title:s,coverUrl:e,publishTime:t,playTime:o,creator:i}}=a;ta.name=s,ta.image=e,ta.playCount=o,ta.publishTime=_(t),ta.artist=i.nickname}catch(a){E(k.ERROR,a.message)}try{const a=await I(ea),{urls:s}=a;s?ta.url=s[0].url:E(k.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){E(k.ERROR,a.message)}try{const a=await L(ea),{data:s}=a;s.forEach((a=>{const{title:s,coverUrl:e,vid:t,playTime:o,creator:i}=a;oa.push({id:t,name:s,image:e,playCount:o,artist:i[0].userName})}))}catch(a){E(k.ERROR,a.message)}try{const a=await D(ea,100),{comments:s,hotComments:e}=a;z(e,la),z(s,la)}catch(a){E(k.ERROR,a.message)}}else{try{const a=await C(ea),{data:{name:s,artistName:e,cover:t,playCount:o,duration:i,publishTime:l}}=a;ta.name=s,ta.image=t,ta.artist=e,ta.playCount=o,ta.time=i,ta.publishTime=l}catch(a){E(k.ERROR,a.message)}try{const a=await O(ea),{data:{url:s,fee:e}}=a;s?(ta.url=s,ta.available=e):E(k.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){E(k.ERROR,a.message)}try{const a=await x(ea),{mvs:s}=a;s&&s.forEach((a=>{oa.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){E(k.ERROR,a.message)}try{const a=await T(ea,1e4),{comments:s,hotComments:e}=a;z(e,la),z(s,la)}catch(a){E(k.ERROR,a.message)}}Y.addRecord(ta,Y.videoRecord,Y.videoRecordId),Y.initLoveStatus(ta,Y.loveVideoId),ia.value=!1}),ia),i((()=>{P.unbind("space")})),(a,s)=>(y(),l("div",S,[r("video",{src:ta.url,poster:ta.image,controls:"",ref_key:"video",ref:aa,class:"video-player"},null,8,U),r("div",Z,[r("p",G,n(ta.name),1),r("div",q,[r("span",null,n(/.*[A-Z]+.*/.test(ea)?"创作者："+ta.artist:"演唱："+ta.artist),1),r("span",null,n(ta.playCount)+"次观看",1),r("span",null,"发布时间："+n(ta.publishTime),1)]),m(r("div",$,[p(F,{name:ta.isLove?"取消收藏":"收藏",icon:ta.isLove?"":"","icon-style":ta.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>u(Y).addLove(ta,u(Y).loveVideo,u(Y).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),p(F,{name:"下载",onClick:s[1]||(s[1]=a=>u(Y).addVideoDownload(ta)),icon:"",class:"operate"}),p(F,{name:"分享",icon:"",onClick:na,class:"operate"}),p(F,{name:"评论",icon:"",onClick:s[2]||(s[2]=a=>ra.value=!0),class:"operate"})],512),[[c,!ra.value]])]),m(p(M,{mvs:oa,title:"相关推荐"},null,8,["mvs"]),[[c,!ra.value]]),m(r("div",H,[r("h4",J,"全部评论"+n(`(${la.length})`),1),r("button",{class:"exit",onClick:s[3]||(s[3]=a=>ra.value=!1)},[K,d(" 退出 ")]),p(N,{comments:la},null,8,["comments"])],512),[[c,ra.value]])]))}}),[["__scopeId","data-v-147b5b69"]]);export{Q as default};
