import{G as a,ax as s,i as e,Z as t,d as o,c as i,a as l,T as r,P as n,V as m,U as c,u as p,S as u,z as d,o as v,ay as h,az as y}from"../@vue/@vue.7ad02ad1.js";import{b as f}from"../vue-router/vue-router.47595bf3.js";import{p as R,g,a as j,b as w,v as C,e as b,d as E,w as O,x,y as T,o as k,z,r as V,A as D,B as I,D as L,C as _,s as N,_ as B}from"../../assets/index-f2c2582e.js";import{D as A}from"../DecoratedButton/DecoratedButton.47667f48.js";import{M as F}from"../Mv/Mv.2c5334f1.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const M={class:"video-container scroll-container"},P=["src","poster"],S={class:"detail"},U={class:"title"},Z={class:"artist-info"},G={class:"operation"},q={class:"comment-area"},$={class:"title"},H=(a=>(h("data-v-4a3fff9b"),a=a(),y(),a))((()=>l("span",{class:"iconfont_1"}," ",-1))),J=B(a({__name:"VideoPlayView",setup(a){s((a=>({f4ca2996:p(y),f4e9685e:p(B),"0f3a7dac":p(J),"1865e75e":p(K),"12e13423":p(Q)})));const h=R(),y=g().get("fontColor"),B=g().get("fontBlack"),J=g().get("shadow"),K=d("fontGray"),Q=e((()=>h.isFullScreen?"650px":"520px")),W=j(),X=f(),Y=X.query.id+"",aa=t({id:Y,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),sa=t([]),ea=d("firstLoading"),ta=t([]),oa=o(!1),ia=()=>{N("我在https://www.liyinchao.cloud/#"+X.fullPath+"观看"+aa.name+",快来和我一起观看把！")};return w((async()=>{if(/.*[A-Z]+.*/.test(Y)){try{const a=await z(Y),{data:{title:s,coverUrl:e,publishTime:t,playTime:o,creator:i}}=a;aa.name=s,aa.image=e,aa.playCount=o,aa.publishTime=V(t),aa.artist=i.nickname}catch(a){b(E.ERROR,a.message)}try{const a=await D(Y),{urls:s}=a;s?aa.url=s[0].url:b(E.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){b(E.ERROR,a.message)}try{const a=await I(Y),{data:s}=a;s.forEach((a=>{const{title:s,coverUrl:e,vid:t,playTime:o,creator:i}=a;sa.push({id:t,name:s,image:e,playCount:o,artist:i[0].userName})}))}catch(a){b(E.ERROR,a.message)}try{const a=await L(Y,100),{comments:s,hotComments:e}=a;k(e,ta),k(s,ta)}catch(a){b(E.ERROR,a.message)}}else{try{const a=await C(Y),{data:{name:s,artistName:e,cover:t,playCount:o,duration:i,publishTime:l}}=a;aa.name=s,aa.image=t,aa.artist=e,aa.playCount=o,aa.time=i,aa.publishTime=l}catch(a){b(E.ERROR,a.message)}try{const a=await O(Y),{data:{url:s,fee:e}}=a;s?(aa.url=s,aa.available=e):b(E.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){b(E.ERROR,a.message)}try{const a=await x(Y),{mvs:s}=a;s&&s.forEach((a=>{sa.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){b(E.ERROR,a.message)}try{const a=await T(Y,1e4),{comments:s,hotComments:e}=a;k(e,ta),k(s,ta)}catch(a){b(E.ERROR,a.message)}}W.addRecord(aa,W.videoRecord,W.videoRecordId),W.initLoveStatus(aa,W.loveVideoId),ea.value=!1}),ea),(a,s)=>(v(),i("div",M,[l("video",{src:aa.url,poster:aa.image,controls:"",ref:"video",class:"video-player"},null,8,P),l("div",S,[l("p",U,r(aa.name),1),l("div",Z,[l("span",null,r(/.*[A-Z]+.*/.test(Y)?"创作者："+aa.artist:"演唱："+aa.artist),1),l("span",null,r(aa.playCount)+"次观看",1),l("span",null,"发布时间："+r(aa.publishTime),1)]),n(l("div",G,[c(A,{name:aa.isLove?"取消收藏":"收藏",icon:aa.isLove?"":"","icon-style":aa.isLove?"color:#ff6a6a;":"",onClick:s[0]||(s[0]=a=>p(W).addLove(aa,p(W).loveVideo,p(W).loveVideoId)),class:"operate"},null,8,["name","icon","icon-style"]),c(A,{name:"下载",onClick:s[1]||(s[1]=a=>p(W).addVideoDownload(aa)),icon:"",class:"operate"}),c(A,{name:"分享",icon:"",onClick:ia,class:"operate"}),c(A,{name:"评论",icon:"",onClick:s[2]||(s[2]=a=>oa.value=!0),class:"operate"})],512),[[m,!oa.value]])]),n(c(F,{mvs:sa,title:"相关推荐"},null,8,["mvs"]),[[m,!oa.value]]),n(l("div",q,[l("h4",$,"全部评论"+r(`(${ta.length})`),1),l("button",{class:"exit",onClick:s[3]||(s[3]=a=>oa.value=!1)},[H,u(" 退出 ")]),c(_,{comments:ta},null,8,["comments"])],512),[[m,oa.value]])]))}}),[["__scopeId","data-v-4a3fff9b"]]);export{J as default};
