import{v as e,w as a}from"../element-plus/element-plus.f3996937.js";import{G as t,ax as s,u as l,d as i,o,c as n,a as u,T as c,F as r,a7 as v,I as p,Z as m,P as d,U as g,V as h,ay as y,az as j,z as f,n as b}from"../@vue/@vue.7ad02ad1.js";import{g as w,_,b as x,l as C,e as V,f as k,S as z}from"../../assets/index-1a5908cb.js";import{M as R}from"../Mv/Mv.186257e0.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../lodash/lodash.57b1d944.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";const A={class:"button-group-container"},G={class:"title"},E={class:"type"},M=["onClick"],S=_(t({__name:"ButtonGroup",props:{title:null,activeValue:null,type:null},emits:["getActive"],setup(e,{emit:a}){const t=e;s((e=>({c356da7c:l(m),"1ec8baaa":l(d)})));const m=w().get("fontColor"),d=w().get("boxShadow"),g=i(t.activeValue);return(s,l)=>(o(),n("div",A,[u("h4",G,c(e.title),1),u("div",E,[(o(!0),n(r,null,v(e.type,((e,s)=>(o(),n("button",{onClick:e=>(e=>{g.value=e,a("getActive",e,t.title)})(s),key:e,class:p({"is-active":s==g.value})},c(e),11,M)))),128))])]))}}),[["__scopeId","data-v-67b80a25"]]),I=["infinite-scroll-disabled"],B=(e=>(y("data-v-8c8486a3"),e=e(),j(),e))((()=>u("h4",{class:"title all"},"全部mv",-1))),N=["element-loading-background","element-loading-spinner"],O=_(t({__name:"VideoView",setup(t){s((e=>({71641236:l(c),"375d012e":l(v),"53393fc4":l(r)})));const c=w().get("fontColor"),r=w().get("boxShadow"),v=w().get("fontBlack"),p=w().get("background"),y=m(["全部","韩国","日本","欧美","港台","内地"]),j=m(["全部","官方版","现场版","网易出品"]),_=m(["上升最快","最新","最热"]),A=i(0),G=i(0),E=i(0),M=m(new Map);let O=m([]),T=m([]);const F=i(50),L=i(30),P=i(!1),U=i(!1),Z=f("firstLoading"),q=f("hideScroll"),D=async(e,a)=>{q(),L.value=40,O.splice(0),T.splice(0),"视频地区"==a?A.value=e:"视频来源"==a?G.value=e:E.value=e,await b();const t=M.get(A.value+""+G.value+E.value);t?(O.push(...t),T.push(...t.slice(0,L.value))):K()},H=()=>{U.value=!0,P.value=!0,setTimeout((()=>{L.value+=10,L.value<F.value?(T.push(...O.slice(T.length,L.value)),U.value=!1,P.value=!1):(F.value*=2,J())}),1e3)},J=()=>{x((async()=>{try{const e=await C(F.value,y[A.value],j[G.value],_[E.value]),{data:a}=e;a.slice(O.length).forEach((e=>{const{id:a,name:t,cover:s,playCount:l,artistName:i}=e;O.push({id:a,name:t,image:s,playCount:l,artist:i})})),M.set(A.value+""+G.value+E.value,[...O]),T.push(...O.slice(T.length,L.value))}catch(e){V(k.ERROR,e.message)}U.value=!1,P.value=!1}),U)},K=()=>{x((async()=>{try{const e=await C(F.value,y[A.value],j[G.value],_[E.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:t,cover:s,playCount:l,artistName:i}=e;O.push({id:a,name:t,image:s,playCount:l,artist:i})})),M.set(A.value+""+G.value+E.value,[...O]),T.push(...O.slice(0,L.value))}catch(e){V(k.ERROR,e.message)}Z.value=!1}),Z)};return K(),(t,s)=>{const i=e,c=a;return d((o(),n("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":P.value,style:{overflow:"auto"}},[g(S,{onGetActive:D,title:"视频地区",activeValue:0,type:y},null,8,["type"]),g(S,{onGetActive:D,title:"视频来源",activeValue:0,type:j},null,8,["type"]),g(S,{onGetActive:D,title:"视频排序",activeValue:0,type:_},null,8,["type"]),B,g(R,{mvs:l(T)},null,8,["mvs"]),d(u("div",{"element-loading-background":l(p),"element-loading-text":"加载中，请勿继续滚动！","element-loading-spinner":l(z),class:"tip"},null,8,N),[[h,U.value],[i,U.value]])],8,I)),[[c,H]])}}}),[["__scopeId","data-v-8c8486a3"]]);export{O as default};
