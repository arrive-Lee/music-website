import{g as a,w as s}from"../element-plus/element-plus.a3a17194.js";import{G as e,ax as i,Z as t,r as o,P as r,c as l,a as n,F as p,a7 as m,U as c,u as d,o as u,M as j,ay as v,az as y,z as g}from"../@vue/@vue.59fec093.js";import{g as h,b as f,W as R,e as b,d as w,X as k,Y as C,_ as E}from"../../assets/index-2c02ac3d.js";import{u as L}from"../vue-router/vue-router.2f940de9.js";import{P as z}from"../PlayList/PlayList.ebb8e84d.js";import{L as P}from"../Loading/Loading.e6baf2fc.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";import"../Pagination/Pagination.2864d965.js";const x=["infinite-scroll-disabled"],_=(a=>(v("data-v-0b436feb"),a=a(),y(),a))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),S={class:"banner"},U=E(e({__name:"RadioView",setup(e){i((a=>({"30e2b7d2":d(v),"5def11a0":d(y)})));const v=h().get("shadow"),y=h().get("fontColor"),E=L(),U=t([]),O=t([]),I=t([]),q=o(0),A=g("firstLoading"),F=g("hideScroll"),G=o(!1),M=o(!1),T=async()=>{const a=await C(O[q.value].id),{djRadios:s}=a;I.push([]),s.forEach((a=>{const{picUrl:s,name:e,id:i,playCount:t}=a;I[q.value].push({name:e,id:i,image:s,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),G.value=!1,M.value=!1},V=()=>{G.value=!0,M.value=!0,q.value++,q.value<O.length?setTimeout((()=>{T()}),1e3):(M.value=!1,b(w.SUCCESS,"已经到达底部！"))};return f((async()=>{try{const a=await R(),{data:s}=a;s.forEach((a=>{const{targetId:s,pic:e}=a;U.push({id:s,pic:e})}))}catch(a){b(w.ERROR,a.message)}try{const a=await k(),{categories:s}=a;s.forEach((a=>{const{id:s,name:e}=a;O.push({id:s,name:e})}))}catch(a){b(w.ERROR,a.message)}try{T()}catch(a){b(w.ERROR,a.message)}A.value=!1}),A),(e,i)=>{const t=a,o=s;return r((u(),l("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":G.value,style:{overflow:"auto"}},[_,n("div",S,[(u(!0),l(p,null,m(U,(a=>(u(),j(t,{key:a.id,src:a.pic,onClick:s=>{return e=a.id,F(),void E.push({name:"playlist",query:{id:e,type:"radio"}});var e}},null,8,["src","onClick"])))),128))]),(u(!0),l(p,null,m(I,((a,s)=>(u(),l("div",{class:"radio",key:O[s].id},[c(z,{title:O[s].name,playlists:a,type:"radio"},null,8,["title","playlists"])])))),128)),c(P,{"is-loading":M.value},null,8,["is-loading"])],8,x)),[[o,V]])}}}),[["__scopeId","data-v-0b436feb"]]);export{U as default};
