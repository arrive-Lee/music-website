import{G as a,ax as e,Z as s,c as t,a as o,T as i,U as l,u as r,o as n,z as m}from"../@vue/@vue.7ad02ad1.js";import{b as c}from"../vue-router/vue-router.53ff932e.js";import{g as p,a as d,c as u,t as v,f as h,h as y,v as f,w as j,x as R,q as g,y as w,z as C,A as b,_ as T}from"../../assets/index-0cefdbff.js";import{D as E}from"../DecoratedButton/DecoratedButton.f452dc7a.js";import{M as O}from"../Mv/Mv.f289674d.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const z={class:"video-container common-container"},V=["src"],x={class:"detail"},I={class:"title"},L={class:"artist-info"},k={class:"operation"},N=T(a({__name:"VideoPlayView",setup(a){e((a=>({b4cfaed2:r(T),"60c13da8":r(N),"0bf35dff":r(_)})));const T=p().get("fontColor"),N=p().get("fontBlack"),_=p().get("shadow"),D=d(),A=c(),B=A.query.id+"",M=s({id:B,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),U=s([]),Z=m("firstLoading"),q=()=>{b("我在https://www.liyinchao.cloud/#"+A.fullPath+"观看"+M.name+",快来和我一起观看把！")};return u((async()=>{if(/.*[A-Z]+.*/.test(B)){try{const a=await R(B),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;M.name=e,M.image=s,M.playCount=o,M.publishTime=g(t),M.artist=i.nickname}catch(a){h(y.ERROR,a.message)}try{const a=await w(B),{urls:e}=a;e?M.url=e[0].url:h(y.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){h(y.ERROR,a.message)}try{const a=await C(B),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;U.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){h(y.ERROR,a.message)}}else{try{const a=await v(B),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;M.name=e,M.image=t,M.artist=s,M.playCount=o,M.time=i,M.publishTime=l}catch(a){h(y.ERROR,a.message)}try{const a=await f(B),{data:{url:e,fee:s}}=a;e?(M.url=e,M.available=s):h(y.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){h(y.ERROR,a.message)}try{const a=await j(B),{mvs:e}=a;e&&e.forEach((a=>{U.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){h(y.ERROR,a.message)}}D.addRecord(M,D.videoRecord,D.videoRecordId,"videoRecord"),D.initLoveStatus(M,D.loveVideoId),Z.value=!1}),Z),(a,e)=>(n(),t("div",z,[o("video",{src:M.url,controls:"",ref:"video",class:"video-player"},null,8,V),o("div",x,[o("p",I,i(M.name),1),o("div",L,[o("span",null,i(/.*[A-Z]+.*/.test(B)?"创作者："+M.artist:"演唱："+M.artist),1),o("span",null,i(M.playCount)+"次观看",1),o("span",null,"发布时间："+i(M.publishTime),1)]),o("div",k,[l(E,{name:M.isLove?"取消收藏":"收藏",icon:M.isLove?"":"","icon-style":M.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>r(D).addLove(M,r(D).loveVideo,r(D).loveVideoId,"loveVideo")),class:"operate"},null,8,["name","icon","icon-style"]),l(E,{name:"下载",onClick:e[1]||(e[1]=a=>r(D).addVideoDownload(M)),icon:"",class:"operate"}),l(E,{name:"分享",icon:"",onClick:q,class:"operate"}),l(E,{name:"评论",icon:"",class:"operate"})])]),l(O,{mvs:U,title:"相关推荐"},null,8,["mvs"])]))}}),[["__scopeId","data-v-d19aa37f"]]);export{N as default};
