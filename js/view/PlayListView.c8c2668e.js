import{g as a,u as s}from"../element-plus/element-plus.f3996937.js";import{G as e,ax as t,Z as o,c as r,a as l,T as i,U as n,F as c,a7 as m,O as p,u,o as d,z as g}from"../@vue/@vue.7ad02ad1.js";import{b as j}from"../vue-router/vue-router.53ff932e.js";import{g as f,b as v,m as h,e as y,f as b,n as w,j as _,k,o as C,_ as z}from"../../assets/index-0ada9847.js";import{T as B,_ as P}from"../Tab/Tab.5a2f9c93.js";import{P as R}from"../PlayButton/PlayButton.89cc97d4.js";import{D as U}from"../DecoratedButton/DecoratedButton.a5352f99.js";import{N as x}from"../NoSearch/NoSearch.9e404bcd.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const T={class:"playlist-container scroll-container"},D={class:"header"},E=["src"],N={class:"right"},O={class:"title"},S={class:"creator"},A={class:"creator-name"},G={class:"tag"},I={class:"description"},L={class:"operation"},$=z(e({__name:"PlayListView",setup(e){t((a=>({"7f41c088":u(z),"6fbdf457":u($),"463d9570":u(q)})));const z=f().get("fontColor"),$=f().get("fontBlack"),q=f().get("shadow"),F=j(),M=F.query.id+"",V=o({id:M,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),Z=o([]),H=g("firstLoading"),J=g("hideScroll"),K=()=>{J()},Q=()=>{C("我有一个精品歌单分享给你："+V.name+"，地址：https://www.liyinchao.cloud/#"+F.fullPath)};return v((async()=>{try{const a=await h(M),{playlist:{name:s,coverImgUrl:e,description:t,tags:o,creator:r,playCount:l}}=a;V.name=s,V.image=e,V.description=t,V.tag=o,V.creator.avatarUrl=r.avatarUrl,V.creator.nickname=r.nickname,V.playCount=l}catch(a){y(b.ERROR,a.message)}try{const a=await w(M),{songs:s}=a,e=[];s.forEach((a=>{_(e,Z,a)})),k(e.join(","),Z)}catch(a){y(b.ERROR,a.message)}H.value=!1}),H),(e,t)=>{const o=a,u=s;return d(),r("div",T,[l("div",D,[l("img",{src:V.image,class:"left-image"},null,8,E),l("div",N,[l("p",O,i(V.name),1),l("div",S,[n(o,{src:V.creator.avatarUrl},null,8,["src"]),l("span",A,i(V.creator.nickname),1),l("div",G,[(d(!0),r(c,null,m(V.tag,(a=>(d(),r("span",{key:a},"#"+i(a),1)))),128))])]),l("p",I,i(V.description),1),l("div",L,[n(R,{songs:Z},null,8,["songs"]),n(U,{name:"分享",onClick:Q,icon:""})])])]),n(B,{active:"song",class:"playlist-tab",onGetActive:K},{content:p((()=>[n(u,{label:`歌曲 ${Z.length}`,name:"song"},{default:p((()=>[n(P,{songs:Z,isPlaylist:!0},null,8,["songs"])])),_:1},8,["label"]),n(u,{label:`评论 ${Math.floor(+V.playCount%1e3)}`,name:"comment"},{default:p((()=>[n(x)])),_:1},8,["label"])])),_:1})])}}}),[["__scopeId","data-v-afb34c77"]]);export{$ as default};
