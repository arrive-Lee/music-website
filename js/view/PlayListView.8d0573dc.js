import{g as a,u as s}from"../element-plus/element-plus.372e8740.js";import{G as e,ax as t,Z as o,d as l,c as i,P as r,V as n,U as c,a as m,T as p,F as u,a7 as d,u as v,M as g,R as y,O as j,o as f,z as h}from"../@vue/@vue.7ad02ad1.js";import{b as _}from"../vue-router/vue-router.53ff932e.js";import{g as b,a as P,b as B,l as L,e as k,d as w,m as C,i as S,j as x,s as R,_ as z}from"../../assets/index-b4bf3e49.js";import{_ as M}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.b5ca6b08.js";import{P as O}from"../PlayButton/PlayButton.eb4d2d93.js";import{D as U}from"../DecoratedButton/DecoratedButton.e6f62703.js";import{N as D}from"../NoSearch/NoSearch.0466d3b9.js";import{T as E}from"../Tab/Tab.6c04dd12.js";import{M as I}from"../MoreButton/MoreButton.61c3e0ca.js";import{_ as T}from"../OnlineBatch/OnlineBatch.117c65e9.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";const N={class:"playlist-container scroll-container"},A={class:"header"},F=["src"],G={class:"right"},V={class:"title"},$={class:"creator"},q={class:"creator-name"},Z={class:"tag"},H={class:"description"},J={class:"operation"},K=z(e({__name:"PlayListView",setup(e){t((a=>({"246a03ca":v(z),"7d698ab8":v(K),a8105cfa:v(Q)})));const z=b().get("fontColor"),K=b().get("fontBlack"),Q=b().get("shadow"),W=P(),X=_(),Y=X.query.id+"",aa=o({id:Y,name:"",image:"",playCount:"",tag:[],description:"",creator:{nickname:"",avatarUrl:""}}),sa=o([]),ea=h("firstLoading"),ta=h("hideScroll"),oa=l(!1),la=a=>{oa.value=a},ia=a=>{ta(),oa.value=a},ra=()=>{R("我有一个精品歌单分享给你："+aa.name+"，地址：https://www.liyinchao.cloud/#"+X.fullPath)},na=()=>{ta()};return B((async()=>{try{const a=await L(Y),{playlist:{name:s,coverImgUrl:e,description:t,tags:o,creator:l,playCount:i}}=a;aa.name=s,aa.image=e,aa.description=t,aa.tag=o,aa.creator.avatarUrl=l.avatarUrl,aa.creator.nickname=l.nickname,aa.playCount=i,W.initLoveStatus(aa,W.lovePlaylistId)}catch(a){k(w.ERROR,a.message)}try{const a=await C(Y),{songs:s}=a,e=[];s.forEach((a=>{S(e,sa,a)})),W.initLoveMusic(sa),x(e.join(","),sa)}catch(a){k(w.ERROR,a.message)}ea.value=!1}),ea),(e,t)=>{const o=a,l=s;return f(),i("div",N,[r(c(T,{songs:sa,"is-playlist":!0,onCloseSelect:la},null,8,["songs"]),[[n,oa.value]]),r(m("div",A,[m("img",{src:aa.image,class:"left-image"},null,8,F),m("div",G,[m("p",V,p(aa.name),1),m("div",$,[c(o,{src:aa.creator.avatarUrl},null,8,["src"]),m("span",q,p(aa.creator.nickname),1),m("div",Z,[(f(!0),i(u,null,d(aa.tag,(a=>(f(),i("span",{key:a},"#"+p(a),1)))),128))])]),m("p",H,p(aa.description),1),m("div",J,[c(O,{songs:sa},null,8,["songs"]),c(U,{name:aa.isLove?"取消收藏":"收藏",icon:aa.isLove?"":"","icon-style":aa.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=a=>v(W).addLove(aa,v(W).lovePlaylist,v(W).lovePlaylistId,"lovePlaylist")),class:"operate"},null,8,["name","icon","icon-style"]),oa.value?y("",!0):(f(),g(I,{key:0,"share-to":ra,onOpenSelect:ia}))])])],512),[[n,!oa.value]]),r(c(E,{active:"song",class:"playlist-tab",onGetActive:na},{content:j((()=>[c(l,{label:`歌曲 ${sa.length}`,name:"song"},{default:j((()=>[c(M,{songs:sa,isPlaylist:!0},null,8,["songs"])])),_:1},8,["label"]),c(l,{label:`评论 ${Math.floor(+aa.playCount%1e3)}`,name:"comment"},{default:j((()=>[c(D)])),_:1},8,["label"])])),_:1},512),[[n,!oa.value]])])}}}),[["__scopeId","data-v-e942f53d"]]);export{K as default};
