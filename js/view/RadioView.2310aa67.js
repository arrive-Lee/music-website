import{g as a,x as s}from"../element-plus/element-plus.4a0090f9.js";import{G as e,ax as i,Z as t,r as o,P as l,c as r,a as n,F as p,a7 as m,U as c,u as d,o as u,M as j,ay as v,az as y,z as h}from"../@vue/@vue.59fec093.js";import{g as f,b as g,X as R,e as b,d as k,Y as w,Z as C,_ as E}from"../../assets/index-f978d246.js";import{u as x}from"../vue-router/vue-router.2f940de9.js";import{P as z}from"../PlayList/PlayList.f573c20c.js";import{L}from"../Loading/Loading.c3b151b3.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.c2bb539f.js";import"../@element-plus/@element-plus.189e73a2.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.81428a33.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const _=["infinite-scroll-disabled"],P=(a=>(v("data-v-0b436feb"),a=a(),y(),a))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),S={class:"banner"},U=E(e({__name:"RadioView",setup(e){i((a=>({"30e2b7d2":d(v),"5def11a0":d(y)})));const v=f().get("shadow"),y=f().get("fontColor"),E=x(),U=t([]),O=t([]),I=t([]),Z=o(0),q=h("firstLoading"),A=h("hideScroll"),F=o(!1),G=o(!1),K=async()=>{const a=await C(O[Z.value].id),{djRadios:s}=a;I.push([]),s.forEach((a=>{const{picUrl:s,name:e,id:i,playCount:t}=a;I[Z.value].push({name:e,id:i,image:s,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),F.value=!1,G.value=!1},M=()=>{F.value=!0,G.value=!0,Z.value++,Z.value<O.length?setTimeout((()=>{K()}),1e3):(G.value=!1,b(k.SUCCESS,"已经到达底部！"))};return g((async()=>{try{const a=await R(),{data:s}=a;s.forEach((a=>{const{targetId:s,pic:e}=a;U.push({id:s,pic:e})}))}catch(a){b(k.ERROR,a.message)}try{const a=await w(),{categories:s}=a;s.forEach((a=>{const{id:s,name:e}=a;O.push({id:s,name:e})}))}catch(a){b(k.ERROR,a.message)}try{K()}catch(a){b(k.ERROR,a.message)}q.value=!1}),q),(e,i)=>{const t=a,o=s;return l((u(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":F.value,style:{overflow:"auto"}},[P,n("div",S,[(u(!0),r(p,null,m(U,(a=>(u(),j(t,{key:a.id,src:a.pic,onClick:s=>{return e=a.id,A(),void E.push({name:"playlist",query:{id:e,type:"radio"}});var e}},null,8,["src","onClick"])))),128))]),(u(!0),r(p,null,m(I,((a,s)=>(u(),r("div",{class:"radio",key:O[s].id},[c(z,{title:O[s].name,playlists:a,type:"radio"},null,8,["title","playlists"])])))),128)),c(L,{"is-loading":G.value},null,8,["is-loading"])],8,_)),[[o,M]])}}}),[["__scopeId","data-v-0b436feb"]]);export{U as default};
