import{g as s,u as e}from"../element-plus/element-plus.372e8740.js";import{_ as a}from"../OnlineBatch/OnlineBatch.8f93b637.js";import{G as o,ax as t,Z as l,d as i,c as n,P as r,V as m,U as u,a as p,T as c,u as d,M as v,R as h,O as j,o as b,S as f,z as g}from"../@vue/@vue.7ad02ad1.js";import{b as y}from"../vue-router/vue-router.53ff932e.js";import{g as _,a as A,b as T,F as B,o as w,e as L,d as x,J as z,i as R,j as S,s as I,_ as O}from"../../assets/index-436cfb30.js";import{A as k}from"../Albums/Albums.4cfd645f.js";import{T as D}from"../Tab/Tab.3823af0d.js";import{_ as M}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.ad9427ec.js";import{P}from"../PlayButton/PlayButton.fe46fe0f.js";import{D as E}from"../DecoratedButton/DecoratedButton.b48bbfae.js";import{M as C}from"../MoreButton/MoreButton.5f08b1c6.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const G={class:"album-detail-container scroll-container"},U={class:"header"},q={class:"right"},F={class:"artist"},V={class:"header-operation"},J={class:"content"},Z={class:"info"},H={class:"desc"},K=O(o({__name:"AlbumDetailView",setup(o){t((s=>({"376ee73e":d(O),"4b2ae13e":d(K),"416c7126":d(N)})));const O=_().get("fontColor"),K=_().get("fontBlack"),N=_().get("shadow"),Q=A(),W=y(),X=W.query.id+"",Y=W.query.artistId+"",$=l({id:X,artistId:Y,name:"",cover:"",artist:"",publishTime:""}),ss=l([]),es=l([]),as=g("firstLoading"),os=g("hideScroll"),ts=i(!1),ls=s=>{ts.value=s},is=s=>{os(),ts.value=s},ns=()=>{I("我有一个精品专辑分享给你："+$.name+"，地址：https://www.liyinchao.cloud/#"+W.fullPath)},rs=()=>{os()};return T((async()=>{try{const s=await B(Y),{hotAlbums:e}=s;for(let a of e){const{id:s}=a;if(s!=X&&ss.length<=5){const{picUrl:e,name:o,publishTime:t}=a;ss.push({name:o,id:s,cover:e,publishTime:w(t),artistId:Y+""})}else if(ss.length>5)break}}catch(s){L(x.ERROR,s.message)}try{const s=await z(X),{album:{picUrl:e,artist:a,publishTime:o,name:t,company:l,description:i},songs:n}=s;$.name=t,$.cover=e,$.publishTime=w(o),$.artist=a.name,$.company=l,$.description=i,Q.initLoveStatus($,Q.loveAlbumId);const r=[];n.forEach((s=>{R(r,es,s)})),Q.initLoveMusic(es),S(r.join(","),es)}catch(s){L(x.ERROR,s.message)}as.value=!1}),as),(o,t)=>{const l=a,i=s,g=e;return b(),n("div",G,[r(u(l,{songs:es,onCloseSelect:ls},null,8,["songs"]),[[m,ts.value]]),r(p("div",U,[u(i,{src:$.cover,loading:"lazy",class:"left"},null,8,["src"]),p("div",q,[p("h4",null,c($.name),1),p("p",F,c($.artist),1),p("p",null,c($.publishTime),1),p("div",V,[u(P,{songs:es},null,8,["songs"]),u(E,{name:$.isLove?"取消收藏":"收藏",icon:$.isLove?"":"","icon-style":$.isLove?"color:#ff6a6a;":"",onClick:t[0]||(t[0]=s=>d(Q).addLove($,d(Q).loveAlbum,d(Q).loveAlbumId,"loveAlbum"))},null,8,["name","icon","icon-style"]),ts.value?h("",!0):(b(),v(C,{key:0,"share-to":ns,onOpenSelect:is}))])])],512),[[m,!ts.value]]),r(p("div",J,[u(D,{active:"songs",onGetActive:rs},{content:j((()=>[u(g,{label:"歌曲",name:"songs"},{default:j((()=>[u(M,{songs:es},null,8,["songs"]),u(k,{albums:ss,title:"该歌手的其它专辑"},null,8,["albums"])])),_:1}),u(g,{label:"详情",name:"album"},{default:j((()=>[p("div",Z,[p("p",null,[f(" 专辑："),p("span",null,c($.name),1)]),p("p",null,[f(" 歌手："),p("span",null,c($.artist),1)]),p("p",null,[f(" 唱片公司："),p("span",null,c($.company),1)]),p("p",null,[f(" 发布时间："),p("span",null,c($.publishTime),1)]),p("p",null,[f(" 专辑简介："),p("span",H,c($.description),1)])])])),_:1})])),_:1})],512),[[m,!ts.value]])])}}}),[["__scopeId","data-v-8084d47b"]]);export{K as default};
