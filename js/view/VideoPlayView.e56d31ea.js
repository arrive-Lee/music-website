import{G as a,ax as e,Z as s,d as t,c as o,a as i,T as l,P as r,V as n,U as m,u as c,S as p,o as d,ay as u,az as v,z as h}from"../@vue/@vue.7ad02ad1.js";import{b as y}from"../vue-router/vue-router.47595bf3.js";import{g as R,a as f,b as j,w as g,e as w,d as C,x as b,y as E,z as O,o as T,A as k,q as V,B as x,D as z,E as D,C as I,s as L,_}from"../../assets/index-785d7a82.js";import{D as N}from"../DecoratedButton/DecoratedButton.998fefae.js";import{M as B}from"../Mv/Mv.3f61d418.js";import"../element-plus/element-plus.372e8740.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";const A={class:"video-container scroll-container"},M=["src"],P={class:"detail"},U={class:"title"},Z={class:"artist-info"},q={class:"operation"},F={class:"comment-area"},S={class:"title"},G=(a=>(u("data-v-14e89889"),a=a(),v(),a))((()=>i("span",{class:"iconfont_1"}," ",-1))),$=_(a({__name:"VideoPlayView",setup(a){e((a=>({"74ef17b7":c(u),"77fa7af0":c(v),"69fdbd1f":c(_)})));const u=R().get("fontColor"),v=R().get("fontBlack"),_=R().get("shadow"),$=f(),H=y(),J=H.query.id+"",K=s({id:J,name:"",image:"",artist:"",playCount:"",url:"",time:"",publishTime:"",available:""}),Q=s([]),W=h("firstLoading"),X=s([]),Y=t(!1),aa=()=>{L("我在https://www.liyinchao.cloud/#"+H.fullPath+"观看"+K.name+",快来和我一起观看把！")};return j((async()=>{if(/.*[A-Z]+.*/.test(J)){try{const a=await k(J),{data:{title:e,coverUrl:s,publishTime:t,playTime:o,creator:i}}=a;K.name=e,K.image=s,K.playCount=o,K.publishTime=V(t),K.artist=i.nickname}catch(a){w(C.ERROR,a.message)}try{const a=await x(J),{urls:e}=a;e?K.url=e[0].url:w(C.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){w(C.ERROR,a.message)}try{const a=await z(J),{data:e}=a;e.forEach((a=>{const{title:e,coverUrl:s,vid:t,playTime:o,creator:i}=a;Q.push({id:t,name:e,image:s,playCount:o,artist:i[0].userName})}))}catch(a){w(C.ERROR,a.message)}try{const a=await D(J,100),{comments:e,hotComments:s}=a;T(s,X),T(e,X)}catch(a){w(C.ERROR,a.message)}}else{try{const a=await g(J),{data:{name:e,artistName:s,cover:t,playCount:o,duration:i,publishTime:l}}=a;K.name=e,K.image=t,K.artist=s,K.playCount=o,K.time=i,K.publishTime=l}catch(a){w(C.ERROR,a.message)}try{const a=await b(J),{data:{url:e,fee:s}}=a;e?(K.url=e,K.available=s):w(C.INFO,"此视频暂无播放资源，请切换下一个。")}catch(a){w(C.ERROR,a.message)}try{const a=await E(J),{mvs:e}=a;e&&e.forEach((a=>{Q.push({id:a.id,image:a.cover,name:a.name,artist:a.artistName,playCount:a.playCount})}))}catch(a){w(C.ERROR,a.message)}try{const a=await O(J,1e4),{comments:e,hotComments:s}=a;T(s,X),T(e,X)}catch(a){w(C.ERROR,a.message)}}$.addRecord(K,$.videoRecord,$.videoRecordId,"videoRecord"),$.initLoveStatus(K,$.loveVideoId),W.value=!1}),W),(a,e)=>(d(),o("div",A,[i("video",{src:K.url,controls:"",ref:"video",class:"video-player"},null,8,M),i("div",P,[i("p",U,l(K.name),1),i("div",Z,[i("span",null,l(/.*[A-Z]+.*/.test(J)?"创作者："+K.artist:"演唱："+K.artist),1),i("span",null,l(K.playCount)+"次观看",1),i("span",null,"发布时间："+l(K.publishTime),1)]),r(i("div",q,[m(N,{name:K.isLove?"取消收藏":"收藏",icon:K.isLove?"":"","icon-style":K.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>c($).addLove(K,c($).loveVideo,c($).loveVideoId,"loveVideo")),class:"operate"},null,8,["name","icon","icon-style"]),m(N,{name:"下载",onClick:e[1]||(e[1]=a=>c($).addVideoDownload(K)),icon:"",class:"operate"}),m(N,{name:"分享",icon:"",onClick:aa,class:"operate"}),m(N,{name:"评论",icon:"",onClick:e[2]||(e[2]=a=>Y.value=!0),class:"operate"})],512),[[n,!Y.value]])]),r(m(B,{mvs:Q,title:"相关推荐"},null,8,["mvs"]),[[n,!Y.value]]),r(i("div",F,[i("h4",S,"全部评论"+l(`(${X.length})`),1),i("button",{class:"exit",onClick:e[3]||(e[3]=a=>Y.value=!1)},[G,p(" 退出 ")]),m(I,{comments:X},null,8,["comments"])],512),[[n,Y.value]])]))}}),[["__scopeId","data-v-14e89889"]]);export{$ as default};
