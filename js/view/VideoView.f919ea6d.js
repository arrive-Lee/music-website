import{w as e}from"../element-plus/element-plus.372e8740.js";import{G as a,ax as t,u as s,d as l,o as i,c as o,a as u,T as n,F as r,a7 as v,I as c,Z as p,P as m,U as d,ay as h,az as g,z as j,n as f}from"../@vue/@vue.7ad02ad1.js";import{g as y,_ as b,c as w,m as C,f as _,h as x}from"../../assets/index-0cefdbff.js";import{M as z}from"../Mv/Mv.f289674d.js";import{L as V}from"../Loading/Loading.219459e7.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const G={class:"button-group-container"},R={class:"title"},S={class:"type"},A=["onClick"],E=b(a({__name:"ButtonGroup",props:{title:null,activeValue:null,type:null},emits:["getActive"],setup(e,{emit:a}){const p=e;t((e=>({"22b6271f":s(m),"95424ef2":s(d)})));const m=y().get("fontColor"),d=y().get("boxShadow"),h=l(p.activeValue);return(t,s)=>(i(),o("div",G,[u("h4",R,n(e.title),1),u("div",S,[(i(!0),o(r,null,v(e.type,((e,t)=>(i(),o("button",{key:e,onClick:e=>(e=>{h.value=e,a("getActive",e,p.title)})(t),class:c({"is-active":t==h.value})},n(e),11,A)))),128))])]))}}),[["__scopeId","data-v-9811bb3b"]]),k=["infinite-scroll-disabled"],L=(e=>(h("data-v-62daba58"),e=e(),g(),e))((()=>u("h4",{class:"title all"},"全部mv",-1))),M=b(a({__name:"VideoView",setup(a){t((e=>({"5a97c532":s(u),"2fa249ed":s(r),"6f6595cc":s(n)})));const u=y().get("fontColor"),n=y().get("boxShadow"),r=y().get("fontBlack"),v=p(["全部","韩国","日本","欧美","港台","内地"]),c=p(["全部","官方版","现场版","网易出品"]),h=p(["上升最快","最新","最热"]),g=l(0),b=l(0),G=l(0),R=p(new Map);let S=p([]),A=p([]);const M=l(50),I=l(30),B=l(!1),N=l(!1),O=j("firstLoading"),T=j("hideScroll"),U=async(e,a)=>{T(),I.value=40,M.value=50,S.splice(0),A.splice(0),"视频地区"==a?g.value=e:"视频来源"==a?b.value=e:G.value=e,await f();const t=R.get(g.value+""+b.value+G.value);t?(S.push(...t),A.push(...t.slice(0,I.value))):Z()},F=()=>{N.value=!0,B.value=!0,setTimeout((()=>{I.value+=10,I.value<=S.length?(A.push(...S.slice(A.length,I.value)),N.value=!1,B.value=!1):M.value==S.length?(M.value*=2,P()):(A.push(...S.slice(A.length)),N.value=!1,_(x.SUCCESS,"已经到达底部！"))}),1e3)},P=()=>{w((async()=>{try{const e=await C(M.value,v[g.value],c[b.value],h[G.value]),{data:a}=e;a.slice(S.length).forEach((e=>{const{id:a,name:t,cover:s,playCount:l,artistName:i}=e;S.push({id:a,name:t,image:s,playCount:l,artist:i})})),R.set(g.value+""+b.value+G.value,[...S]),A.push(...S.slice(A.length,I.value))}catch(e){_(x.ERROR,e.message)}N.value=!1,B.value=!1}),N)},Z=()=>{w((async()=>{try{const e=await C(M.value,v[g.value],c[b.value],h[G.value]),{data:a}=e;a.forEach((e=>{const{id:a,name:t,cover:s,playCount:l,artistName:i}=e;S.push({id:a,name:t,image:s,playCount:l,artist:i})})),R.set(g.value+""+b.value+G.value,[...S]),A.push(...S.slice(0,I.value))}catch(e){_(x.ERROR,e.message)}O.value=!1}),O)};return Z(),(a,t)=>{const l=e;return m((i(),o("div",{class:"rvideo-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":B.value,style:{overflow:"auto"}},[d(E,{onGetActive:U,title:"视频地区",activeValue:0,type:v},null,8,["type"]),d(E,{onGetActive:U,title:"视频来源",activeValue:0,type:c},null,8,["type"]),d(E,{onGetActive:U,title:"视频排序",activeValue:0,type:h},null,8,["type"]),L,d(z,{mvs:s(A)},null,8,["mvs"]),d(V,{"is-loading":N.value},null,8,["is-loading"])],8,k)),[[l,F]])}}}),[["__scopeId","data-v-62daba58"]]);export{M as default};
