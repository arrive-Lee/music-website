import{u as a}from"../element-plus/element-plus.f3996937.js";import{T as s,_ as e}from"../Tab/Tab.5a2f9c93.js";import{b as t}from"../vue-router/vue-router.53ff932e.js";import{b as l,p as o,e as i,f as n,q as r,r as m,j as c,k as u,_ as p}from"../../assets/index-0ada9847.js";import{P as d}from"../PlayButton/PlayButton.89cc97d4.js";import{D as g}from"../DecoratedButton/DecoratedButton.a5352f99.js";import{M as v}from"../Mv/Mv.f8110976.js";import{A as y}from"../Albums/Albums.47c03477.js";import{P as h}from"../PlayList/PlayList.963aeb07.js";import{L as j}from"../Loading/Loading.c0056506.js";import{S as f}from"../Singer/Singer.9d3373e2.js";import{N as b}from"../NoSearch/NoSearch.9e404bcd.js";import{G as R,Z as k,d as E,c as _,U as w,O as L,o as S,a as O,M as x,R as z,z as C}from"../@vue/@vue.7ad02ad1.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const P={class:"search-container scroll-container"},T={class:"song"},U={class:"operation-top"},A={key:1,class:"singers"},B=p(R({__name:"SearchView",setup(p){const R=t().query.keyWord+"",B=k([]),M=k([]),N=k([]),D=k([]),I=k([]),q=k([]),G=E(!1),V=C("firstLoading"),F=C("hideScroll"),W=a=>{F(),"mv"==a&&0==N.length?l((async()=>{try{const a=await o(1004,60,R),{result:{mvs:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,cover:t,artistName:l,playCount:o}=a;N.push({id:s,name:e,image:t,artist:l,playCount:o})}))}catch(a){i(n.ERROR,a.message)}G.value=!1}),G):"album"==a&&0==D.length?l((async()=>{try{const a=await o(10,60,R),{result:{albums:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,picUrl:t,publishTime:l,artist:o}=a;D.push({id:s,name:e,cover:t,publishTime:r(l),artistId:o.id})}))}catch(a){i(n.ERROR,a.message)}G.value=!1}),G):"playList"==a&&0==I.length?l((async()=>{try{const a=await o(1e3,60,R),{result:{playlists:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,coverImgUrl:t,playCount:l}=a;I.push({id:s,name:e,image:t,playCount:l,description:"",tag:[],creator:{nickname:"",avatarUrl:""}})}))}catch(a){i(n.ERROR,a.message)}G.value=!1}),G):"singer"==a&&0==q.length?l((async()=>{try{const a=await o(100,60,R),{result:{artists:s}}=a;s&&s.forEach((a=>{const{id:s,name:e,picUrl:t,accountId:l}=a;q.push({id:s,name:e,avatar:t,score:l})}))}catch(a){i(n.ERROR,a.message)}G.value=!1}),G):"video"==a&&0==M.length&&l((async()=>{try{const a=await o(1014,60,R),{result:{videos:s}}=a;s&&s.forEach((a=>{const{vid:s,title:e,coverUrl:t,creator:l,playTime:o}=a;M.push({id:s,name:e,image:t,artist:l[0].userName,playCount:o})}))}catch(a){i(n.ERROR,a.message)}G.value=!1}),G)};return l((async()=>{try{const a=await o(1,100,R),{result:{songs:s}}=a;if(s){const a=s.map((a=>a.id)).join(","),e=await m(a),{songs:t}=e;t.forEach((a=>{c([],B,a)})),u(a,B)}}catch(a){i(n.ERROR,a.message)}V.value=!1}),V),(t,l)=>{const o=e,i=a;return S(),_("div",P,[w(s,{onGetActive:W,active:"song",class:"search-tab"},{content:L((()=>[w(i,{label:"歌曲",name:"song"},{default:L((()=>[O("div",T,[O("div",U,[w(d,{songs:B},null,8,["songs"]),w(g,{name:"下载",icon:"󰌄"}),w(g,{name:"批量操作",icon:""})]),w(o,{songs:B,isSearch:!0,height:"440px"},null,8,["songs"])])])),_:1}),w(i,{label:"视频",name:"video"},{default:L((()=>[G.value?(S(),x(j,{key:0,"is-loading":G.value},null,8,["is-loading"])):z("",!0),0==M.length?(S(),x(b,{key:1})):(S(),x(v,{key:2,mvs:M},null,8,["mvs"]))])),_:1}),w(i,{label:"MV",name:"mv"},{default:L((()=>[G.value?(S(),x(j,{key:0,"is-loading":G.value},null,8,["is-loading"])):z("",!0),0==N.length?(S(),x(b,{key:1})):(S(),x(v,{key:2,mvs:N},null,8,["mvs"]))])),_:1}),w(i,{label:"专辑",name:"album"},{default:L((()=>[G.value?(S(),x(j,{key:0,"is-loading":G.value},null,8,["is-loading"])):z("",!0),0==D.length?(S(),x(b,{key:1})):(S(),x(y,{key:2,albums:D},null,8,["albums"]))])),_:1}),w(i,{label:"歌单",name:"playList"},{default:L((()=>[G.value?(S(),x(j,{key:0,"is-loading":G.value},null,8,["is-loading"])):z("",!0),0==I.length?(S(),x(b,{key:1})):(S(),x(h,{key:2,playlists:I},null,8,["playlists"]))])),_:1}),w(i,{label:"歌手",name:"singer"},{default:L((()=>[0==q.length?(S(),x(b,{key:0})):(S(),_("div",A,[w(f,{"singer-list":q},null,8,["singer-list"])]))])),_:1})])),_:1})])}}}),[["__scopeId","data-v-ce3ad249"]]);export{B as default};
