import{u as e}from"../element-plus/element-plus.372e8740.js";import{G as s,i as l,d as a,Z as o,c as t,a as i,U as n,O as u,o as r,P as m,V as v,u as c,z as p,n as d}from"../@vue/@vue.7ad02ad1.js";import{a as g,u as f,c as j,l as h,f as S,h as y,e as _,s as L,_ as C}from"../../assets/index-dfd2942e.js";import{s as b}from"../pinia/pinia.07d51cb2.js";import{T as A}from"../Tab/Tab.11fd8cd7.js";import{P as D}from"../PlayButton/PlayButton.0af80b93.js";import{D as w}from"../DecoratedButton/DecoratedButton.3b1b6d67.js";import{_ as x}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.0c66c5ca.js";import{S as P}from"../SearchButton/SearchButton.3b8e2cf2.js";import{S as G}from"../SortButton/SortButton.6d89d3d5.js";import{M as B}from"../Mv/Mv.e68b57e3.js";import{S as I}from"../Singer/Singer.e84a93d6.js";import{A as O}from"../Albums/Albums.62aa8962.js";import{P as E}from"../PlayList/PlayList.1eca4251.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";const k={class:"love-container common-container"},z={class:"top-operation"},N={class:"top-operation operation-select"},M={class:"singers"},T=C(s({__name:"LoveView",setup(s){const C=g(),{loveSongs:T,loveVideo:U,loveSinger:V,lovePlaylist:F,loveAlbum:H}=b(C),J=f(),{isPlay:Z,songList:q,songListId:K,playProcess:Q,playTime:R,current:W}=b(J),X=l((()=>T.value.filter((e=>e.name.includes(Y.value)||e.album.includes(Y.value)||e.singer.includes(Y.value))))),Y=a(""),$=p("firstLoading"),ee=p("hideScroll"),se=()=>{ee()},le=o([!1,!1,!1,!1]),ae=a(!1),oe=(e,s)=>{for(let l=0;l<le.length;l++)le[l]=e[l];s&&(ae.value=s)},te=a(!1);let ie=o([]);const ne=e=>{ie=o([]),ie.push(...e)},ue=async()=>{ie.length>0?(Z.value=!1,Q.value=0,R.value=0,await d(),ie.forEach((e=>{null==K.value.get(e.id)&&q.value.unshift(e)})),W.value=K.value.get(ie[0].id),Z.value=!0,S(y.SUCCESS,"已添加到播放列表！")):S(y.INFO,"请添加歌曲！")},re=()=>{if(ie.length>0){const e=ie.map((e=>e.id)),s=T.value.filter((s=>!e.includes(s.id)));e.map((e=>K.value.get(e))).forEach((e=>{null!=e&&(q.value[e].isLove=!1)})),T.value.splice(0),T.value.push(...s),_(L.LOCAL,"loveSongs",T.value),S(y.SUCCESS,"已清除选中的歌曲！")}else S(y.INFO,"请添加歌曲")},me=()=>{ie.forEach((e=>{C.addMuiscDownload(e)}))},ve=()=>{T.value.map((e=>e.id)).forEach((e=>{const s=K.value.get(e);null!=s&&(q.value[s].isLove=!1)})),T.value.splice(0),_(L.LOCAL,"loveSongs",T.value),S(y.SUCCESS,"已全部清除喜欢的歌曲！")},ce=e=>{Y.value=e},pe=e=>{U.value.splice(e,1),_(L.LOCAL,"loveVideo",U.value)},de=e=>{H.value.splice(e,1),_(L.LOCAL,"loveAlbum",H.value)},ge=e=>{V.value.splice(e,1),_(L.LOCAL,"loveSinger",V.value)},fe=e=>{F.value.splice(e,1),_(L.LOCAL,"lovePlaylist",F.value)};return j((async()=>{const e=T.value.map((e=>e.id)).join(",");h(e,T.value),$.value=!1}),$),(s,l)=>{const a=e;return r(),t("div",null,[i("div",k,[n(A,{active:"song",onGetActive:se},{content:u((()=>[n(a,{label:"歌曲",name:"song"},{default:u((()=>[m(i("div",z,[n(D,{songs:c(T)},null,8,["songs"]),n(w,{icon:"",onClick:ve,name:"取消全部收藏"}),n(w,{icon:"",name:"批量操作",onClick:l[0]||(l[0]=e=>te.value=!te.value)}),n(P,{onGetContent:ce}),n(G,{onGetSortChoice:oe})],512),[[v,!te.value]]),m(i("div",N,[n(w,{icon:"",name:"播放",class:"play",onClick:ue}),n(w,{icon:"",name:"删除",onClick:re}),n(w,{icon:"󰌄",onClick:me,name:"下载"}),n(w,{icon:"",name:"取消操作",onClick:l[1]||(l[1]=e=>te.value=!te.value)})],512),[[v,te.value]]),n(x,{songs:c(X),showSelect:te.value,sort:le,"is-cancel-sort":ae.value,onGetSelectItems:ne,height:"440px"},null,8,["songs","showSelect","sort","is-cancel-sort"])])),_:1}),n(a,{label:"视频",name:"video"},{default:u((()=>[n(B,{mvs:c(U),transitionName:"list",showDelete:!0,onGetDeleteIndex:pe},null,8,["mvs"])])),_:1}),n(a,{label:"歌单",name:"playlist"},{default:u((()=>[n(E,{playlists:c(F),transitionName:"list",showDelete:!0,onGetDeleteIndex:fe},null,8,["playlists"])])),_:1}),n(a,{label:"歌手",name:"singer"},{default:u((()=>[i("div",M,[n(I,{"singer-list":c(V),transitionName:"list",showDelete:!0,"show-all-avatar":!1,onGetDeleteIndex:ge},null,8,["singer-list"])])])),_:1}),n(a,{label:"专辑",name:"album"},{default:u((()=>[n(O,{albums:c(H),transitionName:"list",showDelete:!0,onGetDeleteIndex:de},null,8,["albums"])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-7c537ad9"]]);export{T as default};
