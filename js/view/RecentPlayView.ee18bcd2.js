import{u as e}from"../element-plus/element-plus.372e8740.js";import{G as s,ax as a,d as o,Z as t,c as l,U as n,O as i,u as r,o as u,P as c,V as m,a as p,z as v,n as d,ay as j,az as g}from"../@vue/@vue.7ad02ad1.js";import{g as f,a as h,u as _,c as y,l as C,f as S,h as L,e as x,s as w,_ as z}from"../../assets/index-0cefdbff.js";import{T as B}from"../Tab/Tab.8cc6d4ba.js";import{P as I}from"../PlayButton/PlayButton.63362df6.js";import{D as P}from"../DecoratedButton/DecoratedButton.f452dc7a.js";import{_ as b}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.bea6b4d1.js";import{S as k}from"../SearchButton/SearchButton.6ea8afbf.js";import{M as E}from"../Mv/Mv.f289674d.js";import{s as O}from"../pinia/pinia.07d51cb2.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const R={class:"recent-container scroll-container"},A={class:"top-operation"},D={class:"top-operation operation-select"},G=(e=>(j("data-v-60f53607"),e=e(),g(),e))((()=>p("p",{class:"tip"},"自动同步该账号下最近一周播放的歌曲",-1))),M=z(s({__name:"RecentPlayView",setup(s){a((e=>({"7a70f9cc":r(j)})));const j=f().get("fontColor"),g=h(),{videoRecord:z,songRecord:M}=O(g),T=_(),{isPlay:U,songList:N,songListId:F,playProcess:V,playTime:Z,current:q}=O(T);let H;const J=o(""),K=v("firstLoading"),Q=v("hideScroll"),W=()=>{Q()},X=o(!1);let Y=t([]);const $=e=>{Y=t([]),Y.push(...e)},ee=async()=>{Y.length>0?(U.value=!1,V.value=0,Z.value=0,await d(),Y.forEach((e=>{null==F.value.get(e.id)&&N.value.unshift(e)})),q.value=F.value.get(Y[0].id),U.value=!0,S(L.SUCCESS,"已添加到播放列表！")):S(L.INFO,"请添加歌曲！")},se=()=>{Y.forEach((e=>{g.addMuiscDownload(e)}))},ae=()=>{if(Y.length>0){const e=Y.map((e=>e.id)),s=M.value.filter((s=>!e.includes(s.id)));M.value.splice(0),M.value.push(...s),x(w.LOCAL,"songRecord",M.value),S(L.SUCCESS,"已清除选中的歌曲！")}else S(L.INFO,"请添加歌曲！")},oe=()=>{M.value.splice(0),x(w.LOCAL,"songRecord",M.value),S(L.SUCCESS,"已清空全部记录！")},te=e=>{H=t([]),J.value=e;const s=M.value.filter((e=>e.name.includes(J.value)||e.album.includes(J.value)||e.singer.includes(J.value)));H.push(...s)},le=e=>{z.value.splice(e,1),x(w.LOCAL,"videoRecord",z)};return y((async()=>{const e=M.value.map((e=>e.id)).join(",");C(e,M.value),g.initLoveMusic(M.value),K.value=!1}),K),(s,a)=>{const o=e;return u(),l("div",R,[n(B,{active:"song",onGetActive:W},{content:i((()=>[n(o,{label:"歌曲",name:"song"},{default:i((()=>[c(p("div",A,[n(I,{songs:r(M)},null,8,["songs"]),n(P,{icon:"",name:"清空播放记录",onClick:oe}),n(P,{icon:"",name:"批量操作",onClick:a[0]||(a[0]=e=>X.value=!X.value)}),n(k,{onGetContent:te})],512),[[m,!X.value]]),c(p("div",D,[n(P,{icon:"",name:"播放",class:"play",onClick:ee}),n(P,{icon:"",onClick:ae,name:"删除"}),n(P,{icon:"󰌄",onClick:se,name:"下载"}),n(P,{icon:"",name:"取消操作",onClick:a[1]||(a[1]=e=>X.value=!X.value)})],512),[[m,X.value]]),n(b,{songs:J.value?r(H):r(M),showSelect:X.value,onGetSelectItems:$,height:"420px"},null,8,["songs","showSelect"]),G])),_:1}),n(o,{label:"视频",name:"video "},{default:i((()=>[n(E,{mvs:r(z),"show-delete":!0,transitionName:"list",onGetDeleteIndex:le},null,8,["mvs"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-60f53607"]]);export{M as default};
