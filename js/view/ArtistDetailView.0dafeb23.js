import{u as a}from"../element-plus/element-plus.372e8740.js";import{G as s,ax as e,d as t,Z as i,c as o,a as l,T as n,R as r,U as c,u as m,O as u,o as p,F as d,a7 as v,ay as g,az as f,z as h}from"../@vue/@vue.7ad02ad1.js";import{b as j}from"../vue-router/vue-router.53ff932e.js";import{g as y,a as b,c as _,F as L,f as R,h as w,G as E,q as x,H as D,I as S,J as k,r as z,k as A,l as I,_ as O}from"../../assets/index-725a1ee5.js";import{M as T}from"../Mv/Mv.02202c90.js";import{D as M}from"../DecoratedButton/DecoratedButton.ad4a819b.js";import{A as B}from"../Albums/Albums.e78db5d8.js";import{T as C}from"../Tab/Tab.224fdecb.js";import{_ as q}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.290c1891.js";import{L as F}from"../Loading/Loading.e1e93f09.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../pinia/pinia.07d51cb2.js";import"../nprogress/nprogress.8c6d26c7.js";const G={class:"artist-detail-container scroll-container"},U={class:"header"},N=["src"],H={class:"right"},J={class:"name"},V={class:"info"},Z={key:0},K=(a=>(g("data-v-cb0ac9c9"),a=a(),f(),a))((()=>l("p",{class:"job"},"职业：歌手、词曲创作者",-1))),P={class:"fans"},Q={class:"content"},W={class:"detail"},X={class:"desc"},Y=O(s({__name:"ArtistDetailView",setup(s){e((a=>({"56a386f1":m(g),c09670e4:m(f),"7113ff59":m(O)})));const g=y().get("fontColor"),f=y().get("fontBlack"),O=y().get("shadow"),Y=b(),$=j(),aa=$.query.id+"",sa=$.query.score,ea=t(!1),ta=h("firstLoading"),ia=h("hideScroll"),oa=i({name:"",score:Math.floor(Number.parseInt(sa)/1e4)+"万",id:aa,avatar:"",alias:[]}),la=i([]),na=i([]),ra=i([]),ca=i([]),ma=a=>{ia(),"mv"==a&&0==ra.length?_((async()=>{try{const a=await L(aa),{mvs:s}=a;s.forEach((a=>{const{id:s,name:e,artistName:t,imgurl16v9:i,playCount:o}=a;ra.push({id:s,name:e,artist:t,image:i,playCount:o})}))}catch(a){R(w.ERROR,a.message)}ea.value=!1}),ea):"album"==a&&0==ca.length?_((async()=>{try{const a=await E(aa),{hotAlbums:s}=a;s.forEach((a=>{const{picUrl:s,name:e,publishTime:t}=a;ca.push({name:e,id:a.id,cover:s,publishTime:x(t),artistId:aa+""})}))}catch(a){R(w.ERROR,a.message)}ea.value=!1}),ea):"detail"==a&&0==la.length&&_((async()=>{try{const a=await D(aa),{introduction:s}=a;s.forEach((a=>{la.push({title:a.ti,content:a.txt})}))}catch(a){R(w.ERROR,a.message)}ea.value=!1}),ea)};return _((async()=>{try{const a=await S(aa),{artist:s}=a,{name:e,alias:t,picUrl:i,briefDesc:o}=s;oa.name=e,oa.alias=t,oa.avatar=i,oa.briefDesc=o,Y.initLoveStatus(oa,Y.loveSingerId)}catch(a){R(w.ERROR,a.message)}try{const a=await k(aa,1e3),{songs:s}=a,e=s.map((a=>a.id)).join(","),t=await z(e),{songs:i}=t;i.forEach((a=>{A([],na,a)})),Y.initLoveMusic(na),I(e,na)}catch(a){R(w.ERROR,a.message)}ta.value=!1}),ta),(s,e)=>{var t,i;const g=a;return p(),o("div",G,[l("div",U,[l("img",{src:oa.avatar,class:"left"},null,8,N),l("div",H,[l("h4",J,n(oa.name),1),l("div",V,[0!=(null==(t=oa.alias)?void 0:t.length)?(p(),o("p",Z," 英文名："+n(null==(i=oa.alias)?void 0:i.join("、")),1)):r("",!0),K]),l("span",P,"粉丝数："+n(oa.score),1),l("div",null,[c(M,{name:oa.isLove?"取消关注":"关注",icon:oa.isLove?"":"","icon-style":oa.isLove?"color:#ff6a6a;":"",onClick:e[0]||(e[0]=a=>m(Y).addLove(oa,m(Y).loveSinger,m(Y).loveSingerId,"loveSinger")),class:"operate"},null,8,["name","icon","icon-style"]),c(M,{icon:"",name:"歌手电台",class:"operate"})])])]),l("div",Q,[c(C,{active:"hot",onGetActive:ma},{content:u((()=>[c(g,{label:"精选",name:"hot"},{default:u((()=>[c(q,{songs:na},null,8,["songs"])])),_:1}),c(g,{label:"专辑",name:"album"},{default:u((()=>[c(F,{isLoading:ea.value},null,8,["isLoading"]),c(B,{albums:ca},null,8,["albums"])])),_:1}),c(g,{label:"视频",name:"mv"},{default:u((()=>[c(F,{isLoading:ea.value},null,8,["isLoading"]),c(T,{mvs:ra},null,8,["mvs"])])),_:1}),c(g,{label:"详情",name:"detail"},{default:u((()=>[c(F,{isLoading:ea.value},null,8,["isLoading"]),l("div",W,[l("p",X,n(oa.briefDesc),1),la.length>0?(p(!0),o(d,{key:0},v(la,(a=>(p(),o(d,{key:a.title},[l("h4",null,n(a.title),1),l("p",null,n(a.content),1)],64)))),128)):r("",!0)])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-cb0ac9c9"]]);export{Y as default};
