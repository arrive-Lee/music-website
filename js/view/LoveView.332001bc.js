import{u as e}from"../element-plus/element-plus.372e8740.js";import{G as s,d as l,Z as a,c as o,a as t,U as i,O as n,o as u,P as r,V as m,u as v,z as p,n as c}from"../@vue/@vue.7ad02ad1.js";import{a as d,u as g,c as j,l as f,f as h,h as S,e as y,s as _,_ as L}from"../../assets/index-0cefdbff.js";import{T as C}from"../Tab/Tab.8cc6d4ba.js";import{P as b}from"../PlayButton/PlayButton.63362df6.js";import{D as A}from"../DecoratedButton/DecoratedButton.f452dc7a.js";import{_ as D}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.bea6b4d1.js";import{S as w}from"../SearchButton/SearchButton.6ea8afbf.js";import{M as x}from"../Mv/Mv.f289674d.js";import{S as P}from"../Singer/Singer.d98302a5.js";import{A as I}from"../Albums/Albums.54f8036d.js";import{P as O}from"../PlayList/PlayList.642f3bde.js";import{s as E}from"../pinia/pinia.07d51cb2.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.6b07a04c.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../axios/axios.d4208f68.js";import"../vue-router/vue-router.53ff932e.js";import"../nprogress/nprogress.8c6d26c7.js";import"../lodash/lodash.57b1d944.js";const G={class:"love-container common-container"},B={class:"top-operation"},k={class:"top-operation operation-select"},z={class:"singers"},N=L(s({__name:"LoveView",setup(s){const L=d(),{loveSongs:N,loveVideo:M,loveSinger:T,lovePlaylist:U,loveAlbum:V}=E(L),F=g(),{isPlay:H,songList:Z,songListId:q,playProcess:J,playTime:K,current:Q}=E(F);let R;const W=l(""),X=p("firstLoading"),Y=p("hideScroll"),$=()=>{Y()},ee=l(!1);let se=a([]);const le=e=>{se=a([]),se.push(...e)},ae=async()=>{se.length>0?(H.value=!1,J.value=0,K.value=0,await c(),se.forEach((e=>{null==q.value.get(e.id)&&Z.value.unshift(e)})),Q.value=q.value.get(se[0].id),H.value=!0,h(S.SUCCESS,"已添加到播放列表！")):h(S.INFO,"请添加歌曲！")},oe=()=>{if(se.length>0){const e=se.map((e=>e.id)),s=N.value.filter((s=>!e.includes(s.id)));e.map((e=>q.value.get(e))).forEach((e=>{null!=e&&(Z.value[e].isLove=!1)})),N.value.splice(0),N.value.push(...s),y(_.LOCAL,"loveSongs",N.value),h(S.SUCCESS,"已清除选中的歌曲！")}else h(S.INFO,"请添加歌曲")},te=()=>{se.forEach((e=>{L.addMuiscDownload(e)}))},ie=()=>{N.value.map((e=>e.id)).forEach((e=>{const s=q.value.get(e);null!=s&&(Z.value[s].isLove=!1)})),N.value.splice(0),y(_.LOCAL,"loveSongs",N.value),h(S.SUCCESS,"已全部清除喜欢的歌曲！")},ne=e=>{R=a([]),W.value=e;const s=N.value.filter((e=>e.name.includes(W.value)||e.album.includes(W.value)||e.singer.includes(W.value)));R.push(...s)},ue=e=>{M.value.splice(e,1),y(_.LOCAL,"loveVideo",M.value)},re=e=>{V.value.splice(e,1),y(_.LOCAL,"loveAlbum",V.value)},me=e=>{T.value.splice(e,1),y(_.LOCAL,"loveSinger",T.value)},ve=e=>{U.value.splice(e,1),y(_.LOCAL,"lovePlaylist",U.value)};return j((async()=>{const e=N.value.map((e=>e.id)).join(",");f(e,N.value),X.value=!1}),X),(s,l)=>{const a=e;return u(),o("div",null,[t("div",G,[i(C,{active:"song",onGetActive:$},{content:n((()=>[i(a,{label:"歌曲",name:"song"},{default:n((()=>[r(t("div",B,[i(b,{songs:v(N)},null,8,["songs"]),i(A,{icon:"",onClick:ie,name:"取消全部收藏"}),i(A,{icon:"",name:"批量操作",onClick:l[0]||(l[0]=e=>ee.value=!ee.value)}),i(w,{onGetContent:ne})],512),[[m,!ee.value]]),r(t("div",k,[i(A,{icon:"",name:"播放",class:"play",onClick:ae}),i(A,{icon:"",name:"删除",onClick:oe}),i(A,{icon:"󰌄",onClick:te,name:"下载"}),i(A,{icon:"",name:"取消操作",onClick:l[1]||(l[1]=e=>ee.value=!ee.value)})],512),[[m,ee.value]]),i(D,{songs:W.value?v(R):v(N),showSelect:ee.value,onGetSelectItems:le,height:"440px"},null,8,["songs","showSelect"])])),_:1}),i(a,{label:"视频",name:"video"},{default:n((()=>[i(x,{mvs:v(M),transitionName:"list",showDelete:!0,onGetDeleteIndex:ue},null,8,["mvs"])])),_:1}),i(a,{label:"歌单",name:"playlist"},{default:n((()=>[i(O,{playlists:v(U),transitionName:"list",showDelete:!0,onGetDeleteIndex:ve},null,8,["playlists"])])),_:1}),i(a,{label:"歌手",name:"singer"},{default:n((()=>[t("div",z,[i(P,{"singer-list":v(T),transitionName:"list",showDelete:!0,onGetDeleteIndex:me},null,8,["singer-list"])])])),_:1}),i(a,{label:"专辑",name:"album"},{default:n((()=>[i(I,{albums:v(V),transitionName:"list",showDelete:!0,onGetDeleteIndex:re},null,8,["albums"])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-73d3a9bb"]]);export{N as default};
