import{g as s,w as a}from"../element-plus/element-plus.ec47f34a.js";import{G as e,ax as i,Z as t,d as o,P as l,c as r,a as n,F as p,a7 as c,U as d,u as m,o as u,M as j,ay as v,az as y,z as h}from"../@vue/@vue.7ad02ad1.js";import{g,b as f,T as R,e as w,d as k,U as C,V as E,_ as L}from"../../assets/index-a0dd1abc.js";import{u as z}from"../vue-router/vue-router.47595bf3.js";import{P as x}from"../PlayList/PlayList.e284dc89.js";import{L as U}from"../Loading/Loading.11885157.js";import"../lodash-es/lodash-es.3125e237.js";import"../@vueuse/@vueuse.5f7505c4.js";import"../@element-plus/@element-plus.cef41b68.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../dayjs/dayjs.c1293ab3.js";import"../async-validator/async-validator.cf877c1f.js";import"../memoize-one/memoize-one.63ab667a.js";import"../escape-html/escape-html.1935ddb3.js";import"../normalize-wheel-es/normalize-wheel-es.3222b0a2.js";import"../@floating-ui/@floating-ui.333ef71e.js";import"../hotkeys-js/hotkeys-js.e364e5e1.js";import"../pinia/pinia.07d51cb2.js";import"../axios/axios.d4208f68.js";import"../nprogress/nprogress.9249ff62.js";const _=["infinite-scroll-disabled"],b=(s=>(v("data-v-2dd378e8"),s=s(),y(),s))((()=>n("h4",{class:"r-title"},"精彩推荐",-1))),P={class:"banner"},S=L(e({__name:"RadioView",setup(e){i((s=>({c4966f40:m(v),"141535e9":m(y)})));const v=g().get("shadow"),y=g().get("fontColor"),L=z(),S=t([]),O=t([]),I=t([]),T=o(0),V=h("firstLoading"),q=h("hideScroll"),A=o(!1),F=o(!1),G=async()=>{const s=await E(O[T.value].id),{djRadios:a}=s;I.push([]),a.forEach((s=>{const{picUrl:a,name:e,id:i,playCount:t}=s;I[T.value].push({name:e,id:i,image:a,playCount:t,creator:{nickname:"",avatarUrl:""},tag:[],description:""})})),A.value=!1,F.value=!1},M=()=>{A.value=!0,F.value=!0,T.value++,T.value<O.length?setTimeout((()=>{G()}),1e3):(F.value=!1,w(k.SUCCESS,"已经到达底部！"))};return f((async()=>{try{const s=await R(),{data:a}=s;a.forEach((s=>{const{targetId:a,pic:e}=s;S.push({id:a,pic:e})}))}catch(s){w(k.ERROR,s.message)}try{const s=await C(),{categories:a}=s;a.forEach((s=>{const{id:a,name:e}=s;O.push({id:a,name:e})}))}catch(s){w(k.ERROR,s.message)}try{G()}catch(s){w(k.ERROR,s.message)}V.value=!1}),V),(e,i)=>{const t=s,o=a;return l((u(),r("div",{class:"radio-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":A.value,style:{overflow:"auto"}},[b,n("div",P,[(u(!0),r(p,null,c(S,(s=>(u(),j(t,{key:s.id,src:s.pic,onClick:a=>{return e=s.id,q(),void L.push({name:"playlist",query:{id:e,type:"radio"}});var e}},null,8,["src","onClick"])))),128))]),(u(!0),r(p,null,c(I,((s,a)=>(u(),r("div",{class:"radio",key:O[a].id},[d(x,{title:O[a].name,playlists:s,type:"radio"},null,8,["title","playlists"])])))),128)),d(U,{"is-loading":F.value},null,8,["is-loading"])],8,_)),[[o,M]])}}}),[["__scopeId","data-v-2dd378e8"]]);export{S as default};
