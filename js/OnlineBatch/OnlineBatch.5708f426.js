import{u as s,a as e,e as a,d as o,q as n,r as l,_ as t}from"../../assets/index-2ea1dc3c.js";import{s as i}from"../pinia/pinia.07d51cb2.js";import{D as c}from"../DecoratedButton/DecoratedButton.f99c924f.js";import{_ as u}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.caaeb116.js";import{G as p,Z as r,c as d,a as v,U as g,o as m,n as _}from"../@vue/@vue.7ad02ad1.js";const h={class:"online-batch"},f={class:"operation-select"},S=t(p({__name:"OnlineBatch",props:{songs:null,songIdMapper:null},emits:["closeSelect"],setup(t,{emit:p}){const S=s(),{isPlay:y,songList:C,songListId:I,playProcess:L,playTime:j,current:k}=i(S),w=e(),{loveMusicId:x,loveSongs:B}=i(w),D=r([]),E=s=>{0!=D.length&&D.splice(0),D.push(...s)},M=async()=>{D.length>0?(y.value=!1,L.value=0,j.value=0,await _(),D.forEach((s=>{null==I.value.get(s.id)&&C.value.unshift(s)})),k.value=I.value.get(D[0].id),y.value=!0,a(o.SUCCESS,"已添加到播放列表！")):a(o.INFO,"请添加歌曲！")},O=()=>{D.forEach((s=>{w.addMuiscDownload(s)}))},G=()=>{D.forEach((s=>{s.isLove=!0;null==x.value.get(s.id)&&B.value.push(s)})),n(l.LOCAL,"loveSongs",B.value)};return(s,e)=>(m(),d("div",h,[v("div",f,[g(c,{icon:"",name:"播放",class:"play",onClick:M}),g(c,{icon:"",name:"收藏",onClick:G}),g(c,{icon:"󰌄",onClick:O,name:"下载"}),g(c,{icon:"",name:"取消操作",onClick:e[0]||(e[0]=s=>p("closeSelect",!1)),class:"cancel"})]),g(u,{songs:t.songs,"song-id-mapper":t.songIdMapper,"show-select":!0,"show-header":!1,onGetSelectItems:E},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-e6d9c05f"]]);export{S as O};
