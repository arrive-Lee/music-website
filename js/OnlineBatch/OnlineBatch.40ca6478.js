import{s}from"../pinia/pinia.07d51cb2.js";import{u as e,a,e as o,d as n,r as l,t,_ as i}from"../../assets/index-a9f97af9.js";import{D as c}from"../DecoratedButton/DecoratedButton.b173897c.js";import{_ as u}from"../SongList.vue_vue_type_style_index_0_lang/SongList.vue_vue_type_style_index_0_lang.734e9c00.js";import{G as p,Z as r,c as d,a as v,U as g,o as m,n as _}from"../@vue/@vue.7ad02ad1.js";const h={class:"online-batch"},f={class:"operation-select"},S=i(p({__name:"OnlineBatch",props:{songs:null,songIdMapper:null},emits:["closeSelect"],setup(i,{emit:p}){const S=e(),{isPlay:y,songList:C,songListId:I,playProcess:L,playTime:j,current:D}=s(S),k=a(),{loveMusicId:w,loveSongs:x}=s(k),E=r([]),M=s=>{0!=E.length&&E.splice(0),E.push(...s)},O=async()=>{E.length>0?(y.value=!1,L.value=0,j.value=0,await _(),E.forEach((s=>{null==I.value.get(s.id)&&C.value.unshift(s)})),D.value=I.value.get(E[0].id),y.value=!0,o(n.SUCCESS,"已添加到播放列表！")):o(n.INFO,"请添加歌曲！")},B=()=>{E.forEach((s=>{k.addMuiscDownload(s)}))},A=()=>{E.forEach((s=>{s.isLove=!0;null==w.value.get(s.id)&&x.value.push(s)})),l(t.LOCAL,"loveSongs",x.value)};return(s,e)=>(m(),d("div",h,[v("div",f,[g(c,{icon:"",name:"播放",class:"play",onClick:O}),g(c,{icon:"",name:"收藏",onClick:A}),g(c,{icon:"󰌄",onClick:B,name:"下载"}),g(c,{icon:"",name:"取消操作",onClick:e[0]||(e[0]=s=>p("closeSelect",!1)),class:"cancel"})]),g(u,{songs:i.songs,"song-id-mapper":i.songIdMapper,"show-select":!0,"show-header":!1,onGetSelectItems:M},null,8,["songs","song-id-mapper"])]))}}),[["__scopeId","data-v-efa04d35"]]);export{S as O};
