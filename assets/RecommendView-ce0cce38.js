import{d as U,c as T,w as P,E as W,o as m,a as S,r as j,b as c,F as D,u as $,e as X,_ as z,g as N,f as Y,s as Z,h as f,i as g,j as i,k as ee,l as O,m as r,n as u,p as se,q as te,t as ae,v as V,x as oe,y,z as ce,A as F,B as le,C as ne,D as ie,G as re,H as w}from"./index-424b24d2.js";import{P as ue}from"./PlayList-8418bc5f.js";import{M as me}from"./Mv-336267c4.js";const de=["src"],_e=U({__name:"Carousel",props:{pictures:null,type:null,height:null,position:null},setup(o){return $(I=>({"694f0987":o.height})),(I,B)=>{const E=X,b=W;return m(),T(b,{height:o.height,type:o.type,"indicator-position":o.position,class:"carousel"},{default:P(()=>[(m(!0),S(D,null,j(o.pictures,l=>(m(),T(E,{key:l},{default:P(()=>[c("img",{src:l},null,8,de)]),_:2},1024))),128))]),_:1},8,["height","type","indicator-position"])}}});const pe=z(_e,[["__scopeId","data-v-3ac905cd"]]),A=o=>(le("data-v-bc158b9e"),o=o(),ne(),o),he={class:"main-container"},ve={class:"musiclist"},fe=A(()=>c("h4",{class:"title"},"推荐新音乐",-1)),ge={class:"content"},ye=["onClick"],Se=A(()=>c("span",{class:"iconfont"},"",-1)),Ie=[Se],Ee={class:"right"},be=U({__name:"RecommendView",setup(o){$(e=>({"60f87472":w(I),"328d22ad":w(B),"4444445a":w(E)}));const I=N().get("fontColor"),B=N().get("fontBlack"),E=N().get("shadow"),b=Y(),{songList:l,current:d,isPlay:_,playProcess:H,playTime:q,songNum:G}=Z(b),p=f(g(i.SESSION,"recommend-banners")||[]),h=f(g(i.SESSION,"recommend-playlists")||[]),v=f(g(i.SESSION,"recommend-songlists")||[]),C=f(g(i.SESSION,"recommend-mvlists")||[]),L=ce("firstLoading"),J=async e=>{if(e.available=="0"||e.available=="8"){const s=l.value.findIndex(a=>a.id==e.id);s==-1?d.value==0?(_&&(_.value=!1),H.value=0,q.value=0,l.value.unshift(e),await ie(),_.value=!0):(l.value.unshift(e),d.value=0):d.value!=s?d.value=s:_.value=!0}else(e.available="1")?r(u.INFO,"此歌曲为vip专属"):(e.available="10")&&r(u.INFO,"此歌曲尚未拥有版权，请切换其它歌曲")},K=()=>{if(G.value>0){const e=l.value.map(s=>s.id);V(e.join(","),l.value,"userPlaylist")}};return p.length==0&&(L.value=!0,ee().then(e=>{const{banners:s}=e;s.forEach(a=>{const{imageUrl:t}=a;p.push(t)}),O(i.SESSION,"recommend-banners",p)}).catch(e=>{r(u.ERROR,e.message)}),se().then(e=>{const{playlists:s}=e;s.forEach(a=>{if(h.length<10){const{name:t,id:n,coverImgUrl:R,playCount:k,description:x,tags:Q,creator:M}=a;h.push({name:t,id:n,playCount:k,description:x,image:R,tag:Q,creator:{avatarUrl:M.avatarUrl,nickname:M.nickname}})}}),O(i.SESSION,"recommend-playlists",h)}).catch(e=>{r(u.ERROR,e.message)}),te(40).then(e=>{const{data:{list:s}}=e,a=[];for(let t of s){const{fee:n}=t.data;if(v.length<10)(n=="0"||n=="8")&&ae(a,v,t.data);else break}V(a.join(","),v,"recommend-songlists"),setTimeout(()=>{L.value=!1},500)}).catch(e=>{r(u.ERROR,e.message)}),oe(10,"内地").then(e=>{const{data:s}=e;s.forEach(a=>{const{id:t,name:n,cover:R,playCount:k,artistName:x}=a;C.push({id:t,name:n,image:R,playCount:k,artist:x})}),O(i.SESSION,"recommend-mvlists",C)}).catch(e=>{r(u.ERROR,e.message)}),K()),(e,s)=>{const a=re;return m(),S("div",he,[y(pe,{pictures:p.slice(0,5),type:"card",height:"230px"},null,8,["pictures"]),y(ue,{title:"你的歌单补给站",playlists:h},null,8,["playlists"]),c("div",ve,[fe,c("div",ge,[(m(!0),S(D,null,j(v,t=>(m(),S("div",{key:t.id,class:"song-recommend"},[c("div",{onClick:n=>J(t),class:"mask"},Ie,8,ye),y(a,{src:t.songImage,lazy:"",class:"left"},null,8,["src"]),c("div",Ee,[c("p",null,F(t.name),1),c("p",null,F(t.singer),1)])]))),128))])]),y(me,{title:"最新mv",mvs:C,class:"mv-list"},null,8,["mvs"])])}}});const xe=z(be,[["__scopeId","data-v-bc158b9e"]]);export{xe as default};
