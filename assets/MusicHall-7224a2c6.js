import{d as O,g as f,M as m,h as y,$ as T,m as b,n as S,a0 as z,U as x,a as i,F as L,r as k,b as d,H as g,V as P,z as E,W as $,o as r,A as R,a1 as j,y as q,Y as A,u as G,Q,G as U,B as W,C as Y,Z,_ as J}from"./index-424b24d2.js";import"./el-infinite-scroll-4ed993c7.js";const K=u=>(W("data-v-2649b7b3"),u=u(),Y(),u),X=["infinite-scroll-disabled"],ee={class:"title"},se={class:"content"},ae=["onMousedown"],te=K(()=>d("span",{class:"iconfont play"},"",-1)),ne=["element-loading-background","element-loading-spinner"],oe=O({__name:"MusicHall",setup(u){G(e=>({"3c143b44":g(C),"0bc0dc46":g(H)}));const B=Q(),C=f().get("fontColor"),H=f().get("shadow"),N=f().get("background"),l=m(1),_=m(!1),v=m(!1),p=y([]),w=y([]),M=E("firstLoading");M.value=!0;const V=E("hideScroll"),D=e=>{V(),B.push({name:"playlist",query:{id:e+""}})},F=()=>{l.value<p.length?(v.value=!0,_.value=!0,setTimeout(async()=>{await I(p[l.value].id),v.value=!1,_.value=!1,l.value++},1e3)):(_.value=!0,b(S.INFO,"已达到底部"))};T().then(e=>{const{data:s}=e;s.forEach((c,a)=>{const{tagId:t,tagName:n}=c;p.push({id:t,name:n}),a<l.value&&I(t)}),M.value=!1}).catch(e=>{b(S.ERROR,e.message)});const I=e=>{z(e).then(s=>{const{data:{playlist:c}}=s,a=y([]);c.forEach(t=>{const{id:n,name:h,cover:o}=t;a.push({id:n,name:h,cover:o})}),w.push(a)}).catch(s=>{b(S.ERROR,s.message)})};return(e,s)=>{const c=U,a=$,t=Z;return x((r(),i("div",{class:"music-hall-container scroll-container","infinite-scroll-distance":"2","infinite-scroll-immediate":!1,"infinite-scroll-disabled":_.value,style:{overflow:"auto"}},[(r(!0),i(L,null,k(p.slice(0,l.value),(n,h)=>(r(),i("div",{key:n.id,class:"style-container"},[d("h4",ee,R(n.name),1),d("div",se,[(r(!0),i(L,null,k(w[h],o=>(r(),i("div",{onMousedown:j(le=>D(o.id),["prevent"]),key:o.id,class:"style"},[te,q(c,{src:o.cover,lazy:""},null,8,["src"]),d("span",null,R(o.name),1)],40,ae))),128))])]))),128)),x(d("div",{"element-loading-background":g(N),"element-loading-text":"加载中，请勿继续滚动！","element-loading-spinner":g(A),class:"tip"},null,8,ne),[[P,v.value],[a,v.value]])],8,X)),[[t,F]])}}});const re=J(oe,[["__scopeId","data-v-2649b7b3"]]);export{re as default};
