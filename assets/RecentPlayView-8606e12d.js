import{d as V,g as w,i as E,j as I,h as u,M,a9 as T,t as D,v as U,m,n as f,aa as j,a as k,y as s,w as _,z as g,o as N,b,H as h,u as O,L as $,B as A,C as G,_ as L}from"./index-424b24d2.js";import{T as z,_ as H}from"./Tab-0354cbb1.js";import{P as q}from"./PlayButton-b1b8e6d4.js";import{D as v}from"./DecoratedButton-379cc501.js";import{S as F}from"./SearchButton-e92b353c.js";import{M as J}from"./Mv-336267c4.js";const K=c=>(A("data-v-58be71f0"),c=c(),G(),c),Q={class:"recent-container scroll-container"},W={class:"operation"},X=K(()=>b("p",{class:"tip"},"自动同步该账号下最近一周播放的歌曲",-1)),Y=V({__name:"RecentPlayView",setup(c){var p;O(e=>({"1b62fd3a":h(y)}));const y=w().get("fontColor"),R=(p=E(I.SESSION,"userInfo"))==null?void 0:p.uid,o=u([]),l=u([]);let i;const n=M(""),d=g("firstLoading");d.value=!0;const S=g("hideScroll"),x=e=>{i=u([]),n.value=e;const a=o.filter(t=>t.name.includes(n.value)||t.album.includes(n.value)||t.singer.includes(n.value));i.push(...a)},B=()=>{S()};return T(R).then(e=>{const{weekData:a}=e;if(a){const t=[];a.forEach(r=>{D(t,o,r.song)}),U(t.join(","),o)}d.value=!1}).catch(e=>{m(f.ERROR,e.message)}),j().then(e=>{const{data:{videos:a}}=e;a&&a.forEach(t=>{const{id:r,text:C,coverUrl:P}=t.mlogBaseData;l.push({id:r,name:C,image:P,artist:"",playCount:""})})}).catch(e=>{m(f.ERROR,e.message)}),(e,a)=>{const t=$;return N(),k("div",Q,[s(z,{active:"song",onGetActive:B},{content:_(()=>[s(t,{label:`歌曲 ${o.length}`,name:"song"},{default:_(()=>[b("div",W,[s(q,{songs:o},null,8,["songs"]),s(v,{icon:"󰌄",name:"下载"}),s(v,{icon:"",name:"批量操作"}),s(F,{onGetContent:x})]),s(H,{songs:n.value?h(i):o,isPlaylist:!0,height:"420px"},null,8,["songs"]),X]),_:1},8,["label"]),s(t,{label:`视频 ${l.length}`,name:"video "},{default:_(()=>[s(J,{mvs:l},null,8,["mvs"])]),_:1},8,["label"])]),_:1})])}}});const ne=L(Y,[["__scopeId","data-v-58be71f0"]]);export{ne as default};
