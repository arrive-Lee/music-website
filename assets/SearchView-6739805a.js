import{d as V,h as v,M as w,N as y,v as C,m as b,n as R,a as I,y as t,w as d,K as A,z as x,O as j,o as i,b as M,c as m,P as g,L as W,_ as D}from"./index-424b24d2.js";import{T as q,_ as z}from"./Tab-0354cbb1.js";import{P as G}from"./PlayButton-b1b8e6d4.js";import{D as B}from"./DecoratedButton-379cc501.js";import{M as K}from"./Mv-336267c4.js";import{A as $}from"./Albums-7d5fc406.js";import{P as F}from"./PlayList-8418bc5f.js";import{L as N}from"./Loading-7488edab.js";import{S as H}from"./Singer-158403b5.js";import{N as f}from"./NoSearch-415ddfe3.js";const J={class:"search-container scroll-container"},Q={class:"song"},X={class:"operation-top"},Y={class:"singers"},Z=V({__name:"SearchView",setup(ee){const p=A().query.keyWord,k=v([]),l=w(!1),T=x("firstLoading");T.value=!0;const O=x("hideScroll"),h=v([]),E=v([]),L=v([]),S=v([]);y(1,40,p+"").then(r=>{const{result:{songs:e}}=r;if(e){const a=[];e.forEach(s=>{const{id:n,name:c,artists:o,album:u,fee:_}=s;a.push(n),k.push({id:n,name:c,singer:o.map(U=>U.name).join(","),songImage:o[0].img1v1Url,album:u.name,available:_,url:"",time:""})}),C(a.join(","),k)}T.value=!1}).catch(r=>{b(R.ERROR,r.message)});const P=r=>{O(),r=="video"&&h.length==0?(l.value=!0,y(1004,60,p+"").then(e=>{const{result:{mvs:a}}=e;a&&a.forEach(s=>{const{id:n,name:c,cover:o,artistName:u,playCount:_}=s;h.push({id:n,name:c,image:o,artist:u,playCount:_})}),l.value=!1}).catch(e=>{b(R.ERROR,e.message)})):r=="album"&&E.length==0?(l.value=!0,y(10,60,p+"").then(e=>{const{result:{albums:a}}=e;a&&a.forEach(s=>{const{id:n,name:c,picUrl:o,publishTime:u,artist:_}=s;E.push({id:n,name:c,cover:o,publishTime:j(u),artistId:_.id})}),l.value=!1}).catch(e=>{b(R.ERROR,e.message)})):r=="playList"&&L.length==0?(l.value=!0,y(1e3,60,p+"").then(e=>{const{result:{playlists:a}}=e;a&&a.forEach(s=>{const{id:n,name:c,coverImgUrl:o,playCount:u}=s;L.push({id:n,name:c,image:o,playCount:u,description:"",tag:[],creator:{nickname:"",avatarUrl:""}})}),l.value=!1}).catch(e=>{b(R.ERROR,e.message)})):r=="singer"&&S.length==0&&(l.value=!0,y(100,60,p+"").then(e=>{const{result:{artists:a}}=e;a&&a.forEach(s=>{const{id:n,name:c,picUrl:o,accountId:u}=s;S.push({id:n,name:c,avatar:o,score:u})}),l.value=!1}).catch(e=>{b(R.ERROR,e.message)}))};return(r,e)=>{const a=z,s=W;return i(),I("div",J,[t(q,{onGetActive:P,active:"song",class:"search-tab"},{content:d(()=>[t(s,{label:"歌曲",name:"song"},{default:d(()=>[M("div",Q,[M("div",X,[t(G,{songs:k},null,8,["songs"]),t(B,{name:"下载",icon:"󰌄"}),t(B,{name:"批量操作",icon:""})]),t(a,{songs:k,height:"440px"},null,8,["songs"])])]),_:1}),t(s,{label:"视频",name:"video"},{default:d(()=>[l.value?(i(),m(N,{key:0,"is-loading":l.value},null,8,["is-loading"])):g("",!0),h.length==0?(i(),m(f,{key:1})):g("",!0),t(K,{mvs:h},null,8,["mvs"])]),_:1}),t(s,{label:"专辑",name:"album"},{default:d(()=>[l.value?(i(),m(N,{key:0,"is-loading":l.value},null,8,["is-loading"])):g("",!0),E.length==0?(i(),m(f,{key:1})):g("",!0),t($,{albums:E},null,8,["albums"])]),_:1}),t(s,{label:"歌单",name:"playList"},{default:d(()=>[l.value?(i(),m(N,{key:0,"is-loading":l.value},null,8,["is-loading"])):g("",!0),L.length==0?(i(),m(f,{key:1})):g("",!0),t(F,{playlists:L,title:""},null,8,["playlists"])]),_:1}),t(s,{label:"歌手",name:"singer"},{default:d(()=>[S.length==0?(i(),m(f,{key:0})):g("",!0),M("div",Y,[t(H,{"singer-list":S},null,8,["singer-list"])])]),_:1}),t(s,{label:"歌词",name:"songWord"},{default:d(()=>[h.length==0?(i(),m(f,{key:0})):g("",!0)]),_:1}),t(s,{label:"用户",name:"user"},{default:d(()=>[h.length==0?(i(),m(f,{key:0})):g("",!0)]),_:1})]),_:1})])}}});const ge=D(Z,[["__scopeId","data-v-6c49c5fa"]]);export{ge as default};
